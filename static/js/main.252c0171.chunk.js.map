{"version":3,"sources":["components/hocs/ProtectedRoute.tsx","redux/modules/call.ts","redux/modules/connection.ts","utils/utils.ts","redux/selectors.ts","i18n/config.ts","pages/Dashboard/index.tsx","pages/Call/RoomClient.js","pages/Call/index.tsx","pages/Call/useUserMedia.ts","pages/CallFeedback/index.tsx","utils/constants.ts","redux/modules/session.ts","redux/index.ts","api/Common.ts","api/User.ts","assets/logo.svg","pages/Login/index.tsx","components/menu/Sidebar.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["ProtectedRoute","props","redirectPath","isAuthenticated","authenticationPath","component","to","pathname","render","undefined","fetchCalls","createAsyncThunk","a","fetchAuthenticated","body","status","calls","data","map","call","camelcaseKeys","callAdapter","createEntityAdapter","callSlice","createSlice","name","initialState","getInitialState","reducers","extraReducers","builder","addCase","fulfilled","state","action","setAll","payload","actions","fetchConnections","connections","inmate","connectionAdapter","connectionSlice","getInitials","str","split","substr","join","genFullName","entity","firstName","lastName","openNotificationWithIcon","message","description","type","notification","showToast","key","content","duration","success","error","warning","loading","info","generateBgColor","label","BACKGROUND_COLORS","Math","abs","hash","i","length","charCodeAt","hashCode","notEmpty","value","getSelectors","selectAllCalls","selectAll","selectCallById","selectById","selectAllConnections","selectConnectionById","selectAllCallInfo","callId","plainCall","connection","connectionId","getCallEntities","selectUpcomingCalls","id","filter","resources","en","login","enLogin","dashboard","enDashboard","enCall","es","esLogin","esDashboard","esCall","i18n","use","initReactI18next","init","lng","ns","Content","Layout","mapDispatchToProps","push","connector","connect","session","user","items","t","useTranslation","tabList","tab","useState","QUOTES","floor","random","dailyQuote","Date","currTime","setCurrTime","activeContactTab","setActiveContactTab","useEffect","interval","setInterval","clearInterval","style","minHeight","title","direction","size","WRAPPER_PADDING","className","span","align","backgroundImage","background","width","Title","level","format","quote","Text","author","backgroundColor","gutter","extra","Link","onClick","date","tMinus","differenceInMinutes","start","Ribbon","text","isToday","justify","isTomorrow","end","src","profileImgPath","activeTabKey","onTabChange","MEDIA_TYPE","window","rc","consumers","producers","config","video","min","ideal","height","encodings","rid","maxBitrate","scalabilityMode","codecOptions","videoGoogleStartBitrate","RoomClient","mediasoupClient","socket","this","producerTransport","consumerTransport","device","micProducer","videoProducer","handlers","consume","Promise","resolve","reject","emit","response","transport","on","callback","errback","dtlsParameters","request","transportId","producerTransportInfo","consumerTransportInfo","routerRtpCapabilities","loadDevice","createSendTransport","handleTransportConnect","createRecvTransport","rtpCapabilities","kind","rtpParameters","producerId","consumer","stream","consumerId","forEach","f","deviceId","audio","mediaConstraints","getMediaConstraints","navigator","mediaDevices","getUserMedia","track","getAudioTracks","getVideoTracks","params","produce","producer","console","log","_kind","Device","load","MediaStream","addTrack","event","fn","contents","active","pause","resume","Sider","Loader","tip","CAPTURE_OPTIONS","MessageDisplay","from","strong","getDisplayName","timestamp","ownProps","parseInt","match","authInfo","initials","React","memo","isAuthed","setIsAuthed","setRc","setSocket","showOverlay","setShowOverlay","participantHasJoined","setParticipantHasJoined","chatCollapsed","setChatCollapsed","mediaStream","requestedMedia","setMediaStream","getTracks","stop","enableStream","useUserMedia","draftMessage","setDraftMessage","messages","setMessages","audioOn","setAudioOn","videoOn","setVideoOn","hasUnreadMessages","setHasUnreadMessages","peerAudioOn","setPeerAudioOn","peerVideoOn","setPeerVideoOn","meRef","useRef","current","srcObject","s","io","process","close","joinRoom","useCallback","connected","Debug","token","enumerateDevices","devices","videoInput","Array","audioInput","meta","toLocaleDateString","measuredRef","node","document","createElement","autoplay","appendChild","timeout","onMouseMove","clearTimeout","setTimeout","onSendMessage","participants","recipients","ref","onMouseOver","color","margin","toUpperCase","AudioMutedOutlined","fontSize","autoPlay","shape","icon","AudioOutlined","danger","pauseAudio","resumeAudio","PoweroffOutlined","VideoCameraOutlined","pauseWebcam","resumeWebcam","isVideoOn","dot","MessageOutlined","collapsed","theme","maxHeight","collapsible","onCollapse","overflowY","TextArea","rows","onChange","e","target","onPressEnter","_e","onSubmit","placeholder","autoFocus","bordered","desc","CallFeedbackBase","UNAUTHENTICATED_USER_ID","ROUTES","path","CallPage","display","character","HeartOutlined","tooltips","DashboardPage","TOKEN_KEY","padding","paddingTop","SET_SESSION","LOGOUT","setSession","userState","email","isLoggedIn","sessionReducer","history","createBrowserHistory","rootReducer","combineReducers","reducer","router","connectRouter","Store","configureStore","middleware","getDefaultMiddleware","concat","routerMiddleware","API_URL","fetchTimeout","fetchUrl","options","race","fetch","mode","_","Error","getState","requestOptions","headers","Accept","Authorization","json","initializeSession","dispatch","localStorage","setItem","loginWithCredentials","cred","url","method","JSON","stringify","node_id","inmate_number","inmateNumber","pin","_extends","Object","assign","arguments","source","prototype","hasOwnProperty","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","d","points","_ref6","_ref11","_ref14","_ref15","SvgLogo","_ref","svgRef","titleId","xmlns","viewBox","ForwardRef","onFinish","values","onFinishFailed","errorInfo","Item","rules","required","prefix","UserOutlined","Password","LockOutlined","htmlType","block","Sidebar","navigate","isVisible","setCollapsed","defaultSelectedKeys","HomeOutlined","location","defaultProtectedRouteProps","exact","LoginPage","route","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","store","getElementById"],"mappings":"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","file":"static/js/main.252c0171.chunk.js","sourcesContent":["import * as React from \"react\";\nimport { Redirect, Route, RouteProps } from \"react-router\";\n\nexport interface ProtectedRouteProps extends RouteProps {\n  isAuthenticated: boolean;\n  authenticationPath: string;\n}\n\nexport const ProtectedRoute: React.FC<ProtectedRouteProps> = (props) => {\n  let redirectPath = \"\";\n  if (!props.isAuthenticated) {\n    redirectPath = props.authenticationPath;\n  }\n\n  if (redirectPath) {\n    const renderComponent = () => <Redirect to={{ pathname: redirectPath }} />;\n    return <Route {...props} component={renderComponent} render={undefined} />;\n  } else {\n    return <Route {...props} />;\n  }\n};\n\nexport default ProtectedRoute;\n","import {\n  createSlice,\n  createEntityAdapter,\n  createAsyncThunk,\n} from \"@reduxjs/toolkit\";\nimport camelcaseKeys from \"camelcase-keys\";\nimport { fetchAuthenticated } from \"src/api/Common\";\nimport { BaseCall } from \"src/types/Call\";\n\nexport const fetchCalls = createAsyncThunk(\"calls/fetchAll\", async () => {\n  const body = await fetchAuthenticated(`calls`);\n  if (body.status !== 200) {\n    throw body;\n  }\n\n  const calls = ((body.data as Record<string, unknown>)\n    .calls as BaseCall[]).map((call) => camelcaseKeys(call));\n\n  return calls;\n});\n\nexport const callAdapter = createEntityAdapter<BaseCall>();\n\nexport const callSlice = createSlice({\n  name: \"calls\",\n  initialState: callAdapter.getInitialState(),\n  reducers: {},\n  extraReducers: (builder) => {\n    builder.addCase(fetchCalls.fulfilled, (state, action) =>\n      callAdapter.setAll(state, action.payload)\n    );\n  },\n});\n\nexport const callActions = callSlice.actions;\n","import {\n  createSlice,\n  createEntityAdapter,\n  createAsyncThunk,\n} from \"@reduxjs/toolkit\";\nimport camelcaseKeys from \"camelcase-keys\";\nimport { Connection } from \"src/types/Connection\";\nimport { fetchAuthenticated } from \"src/api/Common\";\n\nexport const fetchConnections = createAsyncThunk(\n  \"connections/fetchAll\",\n  async () => {\n    const body = await fetchAuthenticated(`connections`);\n    if (body.status !== 200) {\n      throw body;\n    }\n\n    const connections = ((body.data as Record<string, unknown>)\n      .connections as Connection[]).map((inmate) => camelcaseKeys(inmate));\n\n    return connections;\n  }\n);\n\nexport const connectionAdapter = createEntityAdapter<Connection>();\n\nexport const connectionSlice = createSlice({\n  name: \"connection\",\n  initialState: connectionAdapter.getInitialState(),\n  reducers: {},\n  extraReducers: (builder) => {\n    builder.addCase(fetchConnections.fulfilled, (state, action) => {\n      connectionAdapter.setAll(state, action.payload);\n    });\n  },\n});\n\nexport const connectionActions = connectionSlice.actions;\n","import { notification, message } from \"antd\";\nimport { BasePersona } from \"src/types/User\";\n\nexport function getRandomItem(items: Object[]) {\n  return items[Math.floor(Math.random() * items.length)];\n}\n\nexport const getInitials = (str: string) => {\n  return str\n    .split(\" \")\n    .map((substr) => substr[0])\n    .join(\"\");\n};\n\nexport const genFullName = (entity: BasePersona): string =>\n  entity ? `${entity.firstName} ${entity.lastName}` : \"\";\n\nexport const openNotificationWithIcon = (\n  message: string,\n  description: string,\n  type: \"success\" | \"info\" | \"error\" | \"warning\"\n) => {\n  notification[type]({\n    message,\n    description,\n  });\n};\nexport const showToast = (\n  key: string,\n  content: string,\n  type: \"success\" | \"error\" | \"warning\" | \"loading\" | \"info\",\n  duration = 3\n) => {\n  switch (type) {\n    case \"success\":\n      message.success({ content, key, duration });\n      break;\n    case \"error\":\n      message.error({ content, key, duration });\n      break;\n    case \"warning\":\n      message.warning({ content, key, duration });\n      break;\n    case \"loading\":\n      message.loading({ content, key, duration });\n      break;\n    default:\n      message.info({ content, key, duration });\n      break;\n  }\n};\n\nfunction hashCode(str: string): number {\n  var hash = 0;\n  for (var i = 0; i < str.length; i++) {\n    hash = str.charCodeAt(i) + ((hash << 6) - hash);\n  }\n  return hash;\n}\n\nexport function generateBgColor(label: string): string {\n  const BACKGROUND_COLORS = [\n    \"#093145\",\n    \"#3C6478\",\n    \"#107896\",\n    \"#43ABC9\",\n    \"#C2571A\",\n    \"#9A2617\",\n  ];\n  return BACKGROUND_COLORS[\n    Math.abs(hashCode(label) % BACKGROUND_COLORS.length)\n  ];\n}\nexport function notEmpty<TParam>(\n  value: TParam | null | undefined\n): value is TParam {\n  return value !== null && value !== undefined;\n}\n","import { RootState } from \".\";\nimport { callAdapter } from \"./modules/call\";\nimport { connectionAdapter } from \"./modules/connection\";\nimport { BaseCall, Call } from \"src/types/Call\";\nimport { notEmpty } from \"src/utils/utils\";\n// get selectors from entity adapter\nexport const {\n  selectAll: selectAllCalls,\n  selectById: selectCallById,\n} = callAdapter.getSelectors<RootState>((state) => state.calls);\n\nexport const {\n  selectAll: selectAllConnections,\n  selectById: selectConnectionById,\n} = connectionAdapter.getSelectors<RootState>((state) => state.connections);\n\nconst getCallEntities = (\n  state: RootState,\n  call: BaseCall\n): Call | undefined => {\n  const connection = selectConnectionById(state, call.connectionId);\n  if (!connection) return;\n\n  // TODO add kiosk info soon\n  // const kiosk = selectKioskById(state, call.kioskId);\n  // if (!kiosk) return;\n\n  return { ...call, connection };\n};\n\nexport const selectAllCallInfo = (state: RootState, callId: number) => {\n  const plainCall = selectCallById(state, callId);\n  if (!plainCall) return;\n  return getCallEntities(state, plainCall) as Call;\n};\n\nexport const selectUpcomingCalls = (state: RootState) => {\n  return selectAllCalls(state)\n    .map((call) => selectAllCallInfo(state, call.id))\n    .filter(notEmpty)\n    .filter((call) => call.status !== \"ended\" && call.status !== \"terminated\");\n};\n","import i18n from \"i18next\";\nimport enDashboard from \"./en/dashboard.json\";\nimport enCall from \"./en/call.json\";\nimport enLogin from \"./en/login.json\";\nimport esLogin from \"./es/login.json\";\nimport esDashboard from \"./es/dashboard.json\";\nimport esCall from \"./es/call.json\";\n\nimport { initReactI18next } from \"react-i18next\";\n\nexport const resources = {\n  en: {\n    login: enLogin,\n    dashboard: enDashboard,\n    call: enCall,\n  },\n  es: {\n    login: esLogin,\n    dashboard: esDashboard,\n    call: esCall,\n  },\n} as const;\n\ni18n.use(initReactI18next).init({\n  lng: \"en\",\n  ns: [\"login\", \"dashboard\", \"call\"],\n  resources,\n});\n","import React, { ReactElement, useEffect, useState } from \"react\";\nimport { RootState } from \"src/redux\";\nimport { connect, ConnectedProps } from \"react-redux\";\nimport { fetchCalls } from \"src/redux/modules/call\";\nimport {\n  Avatar,\n  Badge,\n  Button,\n  Card,\n  Col,\n  Layout,\n  PageHeader,\n  Row,\n  Space,\n  Typography,\n} from \"antd\";\nimport { selectAllConnections, selectUpcomingCalls } from \"src/redux/selectors\";\nimport { push } from \"connected-react-router\";\nimport { differenceInMinutes, format, isToday, isTomorrow } from \"date-fns\";\nimport { QUOTES, WRAPPER_PADDING } from \"src/utils/constants\";\nimport {\n  genFullName,\n  getInitials,\n  getRandomItem,\n  generateBgColor,\n} from \"src/utils/utils\";\nimport { Quote } from \"src/types/Common\";\nimport \"./index.css\";\nimport { useTranslation } from \"react-i18next\";\nimport \"src/i18n/config\";\n\nconst { Content } = Layout;\n\nconst mapStateToProps = (state: RootState) => ({\n  calls: selectUpcomingCalls(state),\n  connections: selectAllConnections(state),\n  firstName: state.session.user.firstName,\n});\n\nconst mapDispatchToProps = { fetchCalls, push };\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\ntype PropsFromRedux = ConnectedProps<typeof connector>;\n\nfunction DashboardPage({\n  calls,\n  connections,\n  fetchCalls,\n  push,\n  firstName,\n}: PropsFromRedux): ReactElement {\n  const { t } = useTranslation(\"dashboard\");\n\n  const tabList = [\n    {\n      key: \"approved\",\n      tab: t(\"connection.approved\"),\n    },\n    {\n      key: \"pending\",\n      tab: t(\"connection.pending\"),\n    },\n  ];\n  const [dailyQuote] = useState(getRandomItem(QUOTES) as Quote);\n\n  const [currTime, setCurrTime] = useState(new Date());\n  const [activeContactTab, setActiveContactTab] = useState(\"approved\");\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setCurrTime(new Date());\n    }, 1000);\n\n    return () => clearInterval(interval);\n  });\n  useEffect(() => {\n    (async () => await fetchCalls())();\n  }, [fetchCalls]);\n\n  const getDateLabel = (date: Date) => {\n    if (isToday(date)) return \"Today\";\n    if (isTomorrow(date)) return \"Tomorrow\";\n    return format(date, \"EEEE, MMMM d\");\n  };\n\n  return (\n    <Layout style={{ minHeight: \"100vh\" }}>\n      <Content>\n        <PageHeader title={`Hi ${firstName}!`}></PageHeader>\n        <Space\n          direction=\"vertical\"\n          size=\"large\"\n          style={WRAPPER_PADDING}\n          className=\"w-100\"\n        >\n          <Row>\n            <Col span={24}>\n              <div>\n                <Space\n                  direction=\"vertical\"\n                  align=\"center\"\n                  style={{\n                    backgroundImage: `url(${dailyQuote.background})`,\n                    width: \"100%\",\n                  }}\n                  className=\"dashboard-header-container\"\n                >\n                  <div>\n                    <Typography.Title\n                      level={2}\n                      className=\"dashboard-header-content\"\n                    >\n                      {format(currTime, \"HH:mm\")}\n                    </Typography.Title>\n                    {/* <Typography.Text>{format(currTime, \"EEEE MMMM dd\")}</Typography.Text> */}\n                  </div>\n                  <Typography.Title\n                    level={5}\n                    className=\"dashboard-header-content\"\n                  >\n                    {dailyQuote.quote}\n                  </Typography.Title>\n                  <Typography.Text className=\"dashboard-header-content\">\n                    {dailyQuote.author}\n                  </Typography.Text>\n                </Space>\n                <div style={{ width: \"100%\", backgroundColor: \"white\" }}></div>\n              </div>\n            </Col>\n          </Row>\n          <Row gutter={16}>\n            <Col span={16}>\n              <Card\n                title={t(\"call.title\")}\n                extra={\n                  <Typography.Link onClick={() => push(\"/\")}>\n                    {t(\"call.seeAll\")}\n                  </Typography.Link>\n                }\n              >\n                {!calls.length && (\n                  <Typography.Text>{t(\"call.noCalls\")}</Typography.Text>\n                )}\n                <Space></Space>\n                {calls.map((call) => {\n                  const tMinus = differenceInMinutes(\n                    new Date(call.start),\n                    new Date()\n                  );\n\n                  return (\n                    <Badge.Ribbon text={isToday(currTime) ? \"Today\" : \"\"}>\n                      <Card key={call.id}>\n                        <Row justify=\"space-between\" align=\"bottom\">\n                          <Space direction=\"vertical\">\n                            <Typography.Title level={5}>\n                              {getDateLabel(new Date(call.start))}\n                            </Typography.Title>\n                            <Typography.Text>\n                              {format(new Date(call.start), \"HH:mm\")} -{\" \"}\n                              {format(new Date(call.end), \"HH:mm\")} •{\" \"}\n                              {tMinus > 0 ? \"starts in \" : \"started \"}\n                              <Typography.Text\n                                type={tMinus >= 0 ? \"warning\" : \"danger\"}\n                              >\n                                {Math.abs(tMinus)} {t(\"call.minutes\")}{\" \"}\n                                {tMinus < 0 && `${t(\"call.ago\")}`}\n                              </Typography.Text>\n                            </Typography.Text>\n                            <Space>\n                              <Avatar\n                                src={call.connection.user.profileImgPath}\n                              />\n                              <Typography.Text type=\"secondary\">\n                                {genFullName(call.connection.user)}\n                              </Typography.Text>\n                            </Space>\n                          </Space>\n                          <Space>\n                            {/* TODO: add back this button with call options */}\n                            {/* <Button\n                              onClick={() =>\n                                push(`call/${call.id}`)\n                              }\n                            >\n                              <EllipsisOutlined />\n                            </Button> */}\n                            <Button\n                              size=\"large\"\n                              type=\"primary\"\n                              onClick={() => push(`call/${call.id}`)}\n                            >\n                              {t(\"call.join\")}\n                            </Button>\n                          </Space>\n                        </Row>\n                      </Card>\n                    </Badge.Ribbon>\n                  );\n                })}\n              </Card>\n            </Col>\n            <Col span={8}>\n              <Card\n                title={t(\"connection.title\")}\n                tabList={tabList}\n                activeTabKey={activeContactTab}\n                onTabChange={(key) => setActiveContactTab(key)}\n              >\n                <Row justify=\"space-around\">\n                  {connections\n                    .filter(\n                      (connection) => connection.status === activeContactTab\n                    )\n                    .map((connection) => (\n                      <Col\n                        key={connection.id}\n                        className=\"d-flex flex-column align-items-center\"\n                      >\n                        <Space direction=\"vertical\">\n                          <Avatar\n                            size={80}\n                            style={{\n                              backgroundColor: generateBgColor(\n                                genFullName(connection.user)\n                              ),\n                            }}\n                          >\n                            {getInitials(genFullName(connection.user))}\n                          </Avatar>\n                          <Typography.Text>\n                            {genFullName(connection.user)}\n                          </Typography.Text>\n                        </Space>\n                      </Col>\n                    ))}\n                </Row>\n              </Card>\n            </Col>\n          </Row>\n        </Space>\n      </Content>\n    </Layout>\n  );\n}\n\nexport default connector(DashboardPage);\n","/*\n  Copyright 2020 Ameelio.org.\n  Published under the GPL v3.\n\n  You can obtain a copy of the GPL v3 at:\n  https://www.gnu.org/licenses/gpl-3.0.en.html\n\n  This file was inspired by code from https://github.com/Dirvann/mediasoup-sfu-webrtc-video-rooms,\n  which was published under the Apache License.\n  Copyright 2020 github.com/Dirvann.\n\n  You can obtain a copy of the Apache License at:\n  http://www.apache.org/licenses/LICENSE-2.0\n\n  This file was substantially modified by Ameelio to streamline\n  the signalling protocol and change the structure of how a RoomClient\n  is initialized and what events it exposes for easier use by\n  Ameelio's client-side code, and to refactor and restructure the code\n  for easier maintainenance, among other changes.\n*/\nconst MEDIA_TYPE = {\n  audio: \"audioType\",\n  video: \"videoType\",\n  screen: \"screenType\",\n};\n\nwindow.rc = null;\nwindow.consumers = [];\nwindow.producers = [];\n\nconst config = {\n  video: {\n    width: { min: 640, ideal: 1920 },\n    height: { min: 400, ideal: 1080 },\n    encodings: [\n      {\n        rid: \"r0\",\n        maxBitrate: 100000,\n        scalabilityMode: \"S1T3\",\n      },\n      {\n        rid: \"r1\",\n        maxBitrate: 300000,\n        scalabilityMode: \"S1T3\",\n      },\n      {\n        rid: \"r2\",\n        maxBitrate: 900000,\n        scalabilityMode: \"S1T3\",\n      },\n    ],\n    codecOptions: {\n      videoGoogleStartBitrate: 1000,\n    },\n  },\n};\n\nclass RoomClient {\n  constructor(mediasoupClient, socket, callId) {\n    window.rc = this;\n    this.mediasoupClient = mediasoupClient;\n    this.socket = socket;\n    this.callId = callId;\n\n    // We will eventually have...\n    // Two transports (or one, if we are a monitor)\n    this.producerTransport = null;\n    this.consumerTransport = null;\n\n    // A device\n    this.device = null;\n\n    // Consumers and producers\n    this.consumers = {};\n    this.producers = {};\n    this.micProducer = null;\n    this.videoProducer = null;\n\n    // Event handlers\n    this.handlers = { consume: [] };\n  }\n\n  async request(name, data) {\n    return new Promise((resolve, reject) => {\n      this.socket.emit(name, data, (response) => {\n        if (response.error) reject(response.error);\n        else resolve(response);\n      });\n    });\n  }\n\n  async handleTransportConnect(transport) {\n    return new Promise((resolve, reject) => {\n      // Wait for the producer transport to connect...\n      transport.on(\"connect\", async ({ dtlsParameters }, callback, errback) => {\n        await this.request(\"establishDtls\", {\n          dtlsParameters,\n          callId: this.callId,\n          transportId: transport.id,\n        });\n\n        callback();\n        resolve();\n      });\n    });\n  }\n\n  async init() {\n    // Request to join the room.\n    // We will recieve two transports and\n    // and rtpCapabilities object, if we are allowed in.\n    const {\n      producerTransportInfo,\n      consumerTransportInfo,\n      routerRtpCapabilities,\n    } = await this.request(\"join\", { callId: this.callId });\n\n    // Load up a local media device consistent\n    // with the server's RTP capabilities.\n    this.device = await this.loadDevice(routerRtpCapabilities);\n\n    // Set up both transports and promise to send\n    // dtls info when they connect (this won't occur until\n    // someone actually produces).\n    if (producerTransportInfo) {\n      this.producerTransport = this.device.createSendTransport(\n        producerTransportInfo\n      );\n      this.handleTransportConnect(this.producerTransport);\n    }\n\n    this.consumerTransport = this.device.createRecvTransport(\n      consumerTransportInfo\n    );\n    this.handleTransportConnect(this.consumerTransport);\n\n    // Declare what our device is capable of.\n    await this.request(\"declareRtpCapabilities\", {\n      rtpCapabilities: this.device.rtpCapabilities,\n    });\n\n    // We don't actually need to wait for this request to come back.\n    this.request(\"finishConnecting\", { callId: this.callId });\n\n    // When our producer transport is producing a new stream,\n    // inform the server.\n\n    if (this.producerTransport) {\n      this.producerTransport.on(\n        \"produce\",\n        async ({ kind, rtpParameters }, callback, errback) => {\n          const { producerId } = await this.request(\"produce\", {\n            callId: this.callId,\n            kind,\n            rtpParameters,\n          });\n\n          callback({ id: producerId });\n        }\n      );\n    }\n\n    // When we get a consumer, fire an event.\n    this.socket.on(\"consume\", async (info) => {\n      const { consumer, stream } = await this.consume(info);\n\n      this.socket.emit(\"resumeConsumer\", {\n        callId: this.callId,\n        consumerId: consumer.id,\n      });\n\n      this.handlers.consume.forEach((f) => f(info.kind, stream, info.user));\n    });\n  }\n\n  getMediaConstraints(type, deviceId) {\n    if (type === MEDIA_TYPE.audio) {\n      return { audio: { deviceId } };\n    } else if (type === MEDIA_TYPE.video) {\n      return {\n        video: {\n          width: config.video.width,\n          height: config.video.height,\n          deviceId,\n        },\n      };\n    }\n  }\n\n  async produce(type, deviceId = null) {\n    const mediaConstraints = this.getMediaConstraints(type, deviceId);\n    const stream = await navigator.mediaDevices.getUserMedia(mediaConstraints);\n\n    const track = (type === MEDIA_TYPE.audio\n      ? stream.getAudioTracks()\n      : stream.getVideoTracks())[0];\n\n    const params = { track };\n\n    if (type === MEDIA_TYPE.video) {\n      params.encodings = config.video.encodings;\n      params.codecOptions = config.video.codecOptions;\n    }\n\n    const producer = await this.producerTransport.produce(params);\n    console.log(producer);\n    window.producers.push(producer);\n    this.producers[producer.id] = producer;\n    if (producer._kind === \"audio\") this.micProducer = producer;\n    else if (producer._kind === \"video\") this.videoProducer = producer;\n  }\n\n  async loadDevice(routerRtpCapabilities) {\n    const device = new this.mediasoupClient.Device();\n\n    await device.load({ routerRtpCapabilities });\n\n    return device;\n  }\n\n  async consume(info) {\n    const consumer = await this.consumerTransport.consume(info);\n    const stream = new MediaStream();\n\n    this.consumers[consumer.id] = consumer;\n\n    stream.addTrack(consumer.track);\n    return { consumer, stream };\n  }\n\n  async on(event, fn) {\n    if (!(event in this.handlers)) {\n      this.handlers[event] = [];\n    }\n    this.handlers[event].push(fn);\n  }\n\n  async terminate() {\n    await this.request(\"terminate\", { callId: this.callId });\n  }\n\n  pauseAudio() {\n    this.socket.emit(\"producerUpdate\", {\n      callId: this.callId,\n      contents: {\n        producerId: this.micProducer.id,\n        active: true,\n        type: \"audio\",\n      },\n    });\n\n    if (this.micProducer) this.micProducer.pause();\n  }\n\n  resumeAudio() {\n    this.socket.emit(\"producerUpdate\", {\n      callId: this.callId,\n      contents: {\n        producerId: this.micProducer.id,\n        active: false,\n        type: \"audio\",\n      },\n    });\n    if (this.micProducer) this.micProducer.resume();\n  }\n\n  // TODO need to access producer track and stop\n  resumeWebcam() {\n    this.socket.emit(\"producerUpdate\", {\n      callId: this.callId,\n      contents: {\n        producerId: this.videoProducer.id,\n        active: true,\n        type: \"video\",\n      },\n    });\n    if (this.videoProducer) this.videoProducer.resume();\n  }\n\n  pauseWebcam() {\n    this.socket.emit(\"producerUpdate\", {\n      callId: this.callId,\n      contents: {\n        callId: this.videoProducer.id,\n        active: false,\n        type: \"video\",\n      },\n    });\n\n    if (this.videoProducer) this.videoProducer.pause();\n  }\n}\n\nexport default RoomClient;\n","import React, {\n  ReactElement,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from \"react\";\nimport { RootState } from \"src/redux\";\nimport RoomClient from \"src/pages/Call/RoomClient\";\nimport * as mediasoupClient from \"mediasoup-client\";\nimport io from \"socket.io-client\";\nimport {\n  Button,\n  Space,\n  Spin,\n  Typography,\n  Layout,\n  PageHeader,\n  Input,\n  Divider,\n  Avatar,\n  Badge,\n} from \"antd\";\nimport { CallMessage, CallParticipant } from \"src/types/Call\";\nimport { connect, ConnectedProps } from \"react-redux\";\nimport { RouteComponentProps } from \"react-router\";\nimport { selectAllCallInfo } from \"src/redux/selectors\";\nimport \"./index.css\";\nimport {\n  AudioMutedOutlined,\n  AudioOutlined,\n  MessageOutlined,\n  PoweroffOutlined,\n  VideoCameraOutlined,\n} from \"@ant-design/icons\";\nimport { format } from \"date-fns\";\nimport { useUserMedia } from \"./useUserMedia\";\nimport { push } from \"connected-react-router\";\nimport { WRAPPER_PADDING } from \"src/utils/constants\";\nimport {\n  genFullName,\n  getInitials,\n  openNotificationWithIcon,\n  showToast,\n} from \"src/utils/utils\";\nimport { useTranslation } from \"react-i18next\";\nimport \"src/i18n/config\";\n\nconst { Sider } = Layout;\ndeclare global {\n  interface Window {\n    Debug: any;\n  }\n}\n\nfunction Loader({ message }: { message: string }): ReactElement {\n  return (\n    <div className=\"video-loading-spinner\">\n      <Spin tip={message} />\n    </div>\n  );\n}\n\nconst CAPTURE_OPTIONS = {\n  audio: false,\n  video: {\n    width: { min: 640, ideal: 1920 },\n    height: { min: 400, ideal: 1080 },\n  },\n};\n\nfunction MessageDisplay({ message }: { message: CallMessage }): ReactElement {\n  const { type } = message.from;\n  const getDisplayName = () => {\n    switch (type) {\n      case \"inmate\":\n        return \"You\";\n      case \"monitor\":\n        return \"DOC\";\n      case \"user\":\n        return \"Loved One\";\n    }\n  };\n  return (\n    <Space\n      direction=\"vertical\"\n      align={type === \"inmate\" ? \"end\" : \"start\"}\n      style={{ width: \"100%\" }}\n    >\n      <Space>\n        <Typography.Text strong>{getDisplayName()}</Typography.Text>\n        <Typography.Text type=\"secondary\">\n          {format(new Date(message.timestamp), \"HH:mm\")}\n        </Typography.Text>\n      </Space>\n      <Typography.Text>{message.content}</Typography.Text>\n    </Space>\n  );\n}\n\ntype TParams = { id: string };\n\nconst mapStateToProps = (\n  state: RootState,\n  ownProps: RouteComponentProps<TParams>\n) => ({\n  call: selectAllCallInfo(state, parseInt(ownProps.match.params.id)),\n  authInfo: state.session.authInfo,\n  initials: getInitials(genFullName(state.session.user)),\n});\n\nconst mapDispatchToProps = { push };\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\ntype PropsFromRedux = ConnectedProps<typeof connector>;\n\nconst CallBase: React.FC<PropsFromRedux> = React.memo(\n  ({ call, authInfo, push, initials }) => {\n    const { t } = useTranslation(\"call\");\n\n    const [isAuthed, setIsAuthed] = useState(false);\n    const [rc, setRc] = useState<RoomClient>();\n    const [socket, setSocket] = useState<SocketIOClient.Socket>();\n    const [showOverlay, setShowOverlay] = useState(true);\n    const [participantHasJoined, setParticipantHasJoined] = useState(false);\n    const [chatCollapsed, setChatCollapsed] = useState(false);\n    const mediaStream = useUserMedia(CAPTURE_OPTIONS);\n    const [draftMessage, setDraftMessage] = useState(\"\");\n    const [messages, setMessages] = useState<CallMessage[]>([]);\n    const [audioOn, setAudioOn] = useState(true);\n    const [videoOn, setVideoOn] = useState(true);\n    const [hasUnreadMessages, setHasUnreadMessages] = useState(false);\n    const [peerAudioOn, setPeerAudioOn] = useState(true);\n    const [peerVideoOn, setPeerVideoOn] = useState(true);\n\n    const meRef = useRef<HTMLVideoElement>(null);\n    if (meRef.current && !meRef.current.srcObject && mediaStream) {\n      meRef.current.srcObject = mediaStream;\n    }\n    useEffect(() => {\n      if (!socket) {\n        const s = io.connect(\n          `${process.env.REACT_APP_MEDIASOUP_HOSTNAME}` || \"localhost:8000\"\n          // {\n          //   transports: [\"websocket\"],\n          // }\n        );\n        setSocket(s);\n      }\n      return () => {\n        socket?.close();\n      };\n    }, [setSocket, socket]);\n\n    const joinRoom = useCallback(async () => {\n      if (!call) return;\n      const rc = new RoomClient(mediasoupClient, socket, call.id);\n      await rc.init();\n\n      setRc(rc);\n    }, [call, socket]);\n\n    // Asynchronously load the room\n    useEffect(() => {\n      if (!isAuthed && socket && call) {\n        (async () => {\n          console.log(socket);\n          if (!socket.connected) {\n            console.log(\"Not connected, so waiting until connected.\");\n            window.Debug = socket;\n            await new Promise((resolve) => socket.on(\"connect\", resolve));\n            console.log(\"OK\");\n          }\n\n          await new Promise((resolve) => {\n            // TODO fetch actual credentials from redux\n            socket.emit(\n              \"authenticate\",\n              {\n                type: authInfo.type,\n                id: authInfo.id,\n                token: authInfo.token,\n              },\n              resolve\n            );\n          });\n          await joinRoom();\n          setIsAuthed(true);\n        })();\n      }\n    }, [call, authInfo, socket, joinRoom, isAuthed]);\n\n    useEffect(() => {\n      if (rc && isAuthed) {\n        (async () => {\n          // Enumerate media devices\n          const devices = await navigator.mediaDevices.enumerateDevices();\n\n          // Get a video input (should be the only one) to send\n          const videoInput = Array.from(devices).filter(\n            (device) => device.kind === \"videoinput\"\n          )[0];\n\n          // Produce video with it\n          await rc.produce(\"videoType\", videoInput);\n\n          // Get a audio input (should be the only one) to send\n\n          // Don't produce audio for now\n          const audioInput = Array.from(devices).filter(\n            (device) => device.kind === \"audioinput\"\n          )[0];\n\n          // Produce video with it\n          await rc.produce(\"audioType\", audioInput);\n        })();\n      }\n    }, [isAuthed, rc]);\n\n    // TODO fix this\n    useEffect(() => {\n      if (rc && isAuthed) {\n        console.log(\"listening to text message\");\n        rc.socket.on(\n          \"textMessage\",\n          async ({\n            from,\n            contents,\n            meta,\n          }: {\n            from: CallParticipant;\n            contents: string;\n            meta: string;\n          }) => {\n            setHasUnreadMessages(true);\n            if (from.type === \"monitor\") {\n              openNotificationWithIcon(t(\"doc.warning\"), contents, \"warning\");\n            }\n            setMessages((messages) => [\n              ...messages,\n              {\n                content: contents,\n                from,\n                timestamp: new Date().toLocaleDateString(),\n              },\n            ]);\n          }\n        );\n\n        rc.socket.on(\n          \"peerUpdate\",\n          async ({\n            from,\n            contents,\n          }: {\n            from: CallParticipant;\n            contents: {\n              producerId: string;\n              active: boolean;\n              type: \"audio\" | \"video\";\n            };\n          }) => {\n            from.type === \"user\" && contents.type === \"audio\"\n              ? setPeerAudioOn(contents.active)\n              : setPeerVideoOn(contents.active);\n          }\n        );\n      }\n    }, [isAuthed, rc, t]);\n\n    useEffect(() => {\n      if (!chatCollapsed) setHasUnreadMessages(false);\n    }, [hasUnreadMessages, chatCollapsed]);\n\n    useEffect(() => {\n      if (call && participantHasJoined)\n        showToast(\n          \"peerVideo\",\n          `${call.connection.user.firstName} ${\n            peerVideoOn ? t(\"peer.videoOn\") : t(\"peer.videoOff\")\n          }`,\n          \"info\"\n        );\n    }, [peerVideoOn, call, participantHasJoined, t]);\n\n    useEffect(() => {\n      if (call && participantHasJoined)\n        showToast(\n          \"peerAudio\",\n          `${call.connection.user.firstName} ${\n            peerAudioOn ? t(\"peer.unmuted\") : t(\"peer.muted\")\n          }`,\n          \"info\"\n        );\n    }, [peerAudioOn, call, participantHasJoined, t]);\n\n    const measuredRef = useCallback(\n      (node) => {\n        if (node !== null && rc && isAuthed) {\n          (async () => {\n            rc.on(\n              \"consume\",\n              async (\n                kind: string,\n                stream: MediaStream,\n                user: CallParticipant\n              ) => {\n                if (node && user.type === \"user\") {\n                  if (kind === \"video\") {\n                    const video = document.createElement(\"video\");\n                    video.style.width = \"100%\";\n                    video.style.height = \"100%\";\n                    video.srcObject = stream;\n                    video.autoplay = true;\n                    node.appendChild(video);\n                  } else if (kind === \"audio\") {\n                    const audio = document.createElement(\"audio\");\n                    audio.srcObject = stream;\n                    audio.autoplay = true;\n                    node.appendChild(audio);\n                  }\n\n                  setParticipantHasJoined(true);\n                } else if (node && user.type === \"inmate\") {\n                }\n              }\n            );\n          })();\n        }\n      },\n      [rc, isAuthed]\n    );\n\n    useEffect(() => {\n      if (participantHasJoined && call)\n        openNotificationWithIcon(\n          `${call.connection.user.firstName} ${t(\"peer.joinedCallTitle\")}.`,\n          t(\"peer.joinedCallBody\"),\n          \"info\"\n        );\n    }, [participantHasJoined, call, t]);\n\n    if (!call) return <div />;\n\n    const getMessage = (): string => {\n      if (!isAuthed) {\n        return t(\"waitingRoom.initialization\");\n      } else if (!participantHasJoined) {\n        return `${t(\"waitingRoom.waitingForPrefix\")} ${\n          call.connection.user.firstName\n        } ${t(\"waitingRoom.waitingForSuffix\")}...`;\n      }\n      return t(\"waitingRoom.loading\");\n    };\n\n    let timeout: any;\n    const onMouseMove = () => {\n      setShowOverlay(true);\n      (() => {\n        clearTimeout(timeout);\n        timeout = setTimeout(() => setShowOverlay(false), 5000);\n      })();\n    };\n\n    const onSendMessage = async () => {\n      if (!socket || !call) return;\n      setDraftMessage(\"\");\n      //TODO add property sent and change image visibility depending on whether it actually went through\n      setMessages([\n        ...messages,\n        {\n          content: draftMessage,\n          from: {\n            type: \"inmate\",\n            id: authInfo.id,\n          },\n          timestamp: new Date().toLocaleDateString(),\n        },\n      ]);\n      const { participants } = await new Promise((resolve, reject) => {\n        socket.emit(\"info\", { callId: call.id }, resolve);\n      });\n      await new Promise((resolve) => {\n        // TODO fetch actual credentials from redux\n        socket.emit(\n          \"textMessage\",\n          {\n            callId: call.id,\n            contents: draftMessage,\n            recipients: participants,\n          },\n          resolve\n        );\n      });\n    };\n\n    return (\n      <Layout>\n        <div\n          className=\"video-wrapper ant-layout-content\"\n          ref={measuredRef}\n          onMouseMove={() => onMouseMove()}\n          onMouseOver={() => onMouseMove()}\n        >\n          {!peerVideoOn && (\n            <div className=\"vh-100 vw-100 d-flex\">\n              <Avatar\n                size={128}\n                style={{\n                  color: \"#fff\",\n                  backgroundColor: \"#00a2ae\",\n                  margin: \"auto\",\n                }}\n              >\n                {getInitials(genFullName(call.connection.user)).toUpperCase()}\n              </Avatar>\n            </div>\n          )}\n          {!peerAudioOn && (\n            <div className=\"peer-name-container\">\n              <AudioMutedOutlined className=\"peer-muted-audio\" />\n              <Typography.Text style={{ color: \"white\", fontSize: 16 }}>\n                {\" \"}\n                {genFullName(call.connection.user)}\n              </Typography.Text>\n            </div>\n          )}\n          {videoOn ? (\n            <video className=\"video-me\" autoPlay={true} ref={meRef} />\n          ) : (\n            <div className=\"video-me\" style={{ backgroundColor: \"black\" }}>\n              <Avatar\n                size={64}\n                style={{\n                  color: \"#f56a00\",\n                  backgroundColor: \"#fde3cf\",\n                  margin: \"auto\",\n                }}\n              >\n                {initials}\n              </Avatar>\n            </div>\n          )}\n          {!participantHasJoined && <Loader message={getMessage()} />}\n          {showOverlay && (\n            <Space\n              className=\"video-overlay-actions\"\n              align=\"center\"\n              size=\"large\"\n            >\n              <Button\n                shape=\"round\"\n                icon={\n                  audioOn ? (\n                    <AudioOutlined style={{ fontSize: 24 }} />\n                  ) : (\n                    <AudioMutedOutlined style={{ fontSize: 24 }} />\n                  )\n                }\n                size=\"large\"\n                danger={!audioOn}\n                type={audioOn ? \"default\" : \"primary\"}\n                onClick={() => {\n                  audioOn ? rc?.pauseAudio() : rc?.resumeAudio();\n                  showToast(\n                    \"microphone\",\n                    `You ${audioOn ? \"muted\" : \"unmuted\"} your microphone`,\n                    \"info\"\n                  );\n                  setAudioOn((audioOn) => !audioOn);\n                }}\n              />\n              <Button\n                shape=\"round\"\n                icon={<PoweroffOutlined color=\"red\" />}\n                size=\"large\"\n                onClick={() => push(`/feedback/${call?.id}`)}\n              />\n              <Button\n                shape=\"round\"\n                danger={!videoOn}\n                icon={\n                  videoOn ? (\n                    <VideoCameraOutlined style={{ fontSize: 24 }} />\n                  ) : (\n                    <VideoCameraOutlined style={{ fontSize: 24 }} />\n                  )\n                }\n                size=\"large\"\n                type={videoOn ? \"default\" : \"primary\"}\n                onClick={() => {\n                  videoOn ? rc?.pauseWebcam() : rc?.resumeWebcam();\n                  showToast(\n                    \"webcam\",\n                    `You ${videoOn ? \"turned off\" : \"turned on\"} your webcam`,\n                    \"info\"\n                  );\n                  setVideoOn((isVideoOn) => !isVideoOn);\n                }}\n              />\n              <Button\n                shape=\"round\"\n                style={{ backgroundColor: chatCollapsed ? \"#fff\" : \"#f5f5f5\" }}\n                icon={\n                  chatCollapsed ? (\n                    <Badge dot={hasUnreadMessages}>\n                      <MessageOutlined style={{ fontSize: 24 }} />\n                    </Badge>\n                  ) : (\n                    <MessageOutlined style={{ fontSize: 24 }} />\n                  )\n                }\n                size=\"large\"\n                onClick={() => {\n                  if (chatCollapsed) setHasUnreadMessages(false);\n                  setChatCollapsed((collapsed) => !collapsed);\n                }}\n              />\n            </Space>\n          )}\n        </div>\n        {(!chatCollapsed || showOverlay) && (\n          <Sider\n            theme=\"light\"\n            style={{ height: \"100vh\", maxHeight: \"100vh\" }}\n            width={300}\n            collapsible\n            collapsed={chatCollapsed}\n            onCollapse={(collapsed) => setChatCollapsed(collapsed)}\n          >\n            {!chatCollapsed && <PageHeader title={t(\"chat.title\")} />}\n\n            {!chatCollapsed && (\n              <div className=\"chat-container\" style={WRAPPER_PADDING}>\n                <Space direction=\"vertical\" style={{ overflowY: \"scroll\" }}>\n                  {messages.map((message) => (\n                    <MessageDisplay message={message} />\n                  ))}\n                </Space>\n                <div className=\"chat-input\">\n                  <Divider />\n                  <Input.TextArea\n                    value={draftMessage}\n                    rows={2}\n                    onChange={(e) => setDraftMessage(e.target.value)}\n                    onPressEnter={(_e) => onSendMessage()}\n                    onSubmit={(_e) => onSendMessage()}\n                    placeholder={t(\"chat.placeholder\")}\n                    autoFocus\n                    bordered={false}\n                  />\n                </div>\n              </div>\n            )}\n          </Sider>\n        )}\n      </Layout>\n    );\n  }\n);\n\nexport default connector(CallBase);\n","import { useState, useEffect } from \"react\";\n\nexport function useUserMedia(requestedMedia: MediaStreamConstraints) {\n  const [mediaStream, setMediaStream] = useState<MediaStream>();\n\n  useEffect(() => {\n    async function enableStream() {\n      try {\n        const stream = await navigator.mediaDevices.getUserMedia(\n          requestedMedia\n        );\n        setMediaStream(stream);\n      } catch (err) {\n        // Removed for brevity\n        console.log(err);\n      }\n    }\n\n    if (!mediaStream) {\n      enableStream();\n    } else {\n      return function cleanup() {\n        mediaStream.getTracks().forEach((track) => {\n          track.stop();\n        });\n      };\n    }\n  }, [mediaStream, requestedMedia]);\n\n  return mediaStream;\n}\n","import React, { ReactElement } from \"react\";\nimport { Layout, Rate, Button, Space, Typography, Card } from \"antd\";\nimport {\n  HeartOutlined,\n  // FrownOutlined,\n  // SmileOutlined,\n  // MehOutlined,\n} from \"@ant-design/icons\";\n\nconst desc = [\"terrible\", \"bad\", \"normal\", \"good\", \"wonderful\"];\n// const customIcons = {\n//   1: <FrownOutlined style={{ fontSize: 36 }} />,\n//   2: <FrownOutlined style={{ fontSize: 36 }} />,\n//   3: <MehOutlined style={{ fontSize: 36 }} />,\n//   4: <SmileOutlined style={{ fontSize: 36 }} />,\n//   5: <SmileOutlined style={{ fontSize: 36 }} />,\n// };\n\nfunction CallFeedbackBase(): ReactElement {\n  return (\n    <Layout.Content\n      style={{\n        backgroundColor: \"white\",\n        height: \"100vh\",\n        width: \"100vw\",\n        display: \"flex\",\n      }}\n    >\n      <Space\n        direction=\"vertical\"\n        align=\"center\"\n        style={{ margin: \"auto\" }}\n        size=\"large\"\n      >\n        <Typography.Title level={2}>You left the meeting.</Typography.Title>\n        <Space>\n          <Button size=\"large\">Rejoin</Button>\n          <Button type=\"primary\" size=\"large\">\n            Return home\n          </Button>\n        </Space>\n        <Card title=\"How was the audio and video?\">\n          <Rate\n            character={<HeartOutlined style={{ fontSize: 36 }} />}\n            tooltips={desc}\n          />\n        </Card>\n      </Space>\n    </Layout.Content>\n  );\n}\n\nexport default CallFeedbackBase;\n","import { Quote, Route } from \"src/types/Common\";\nimport DashboardPage from \"src/pages/Dashboard\";\nimport CallPage from \"src/pages/Call\";\nimport CallFeedbackPage from \"src/pages/CallFeedback\";\n\nexport const UNAUTHENTICATED_USER_ID = -1;\n\nexport const ROUTES: Route[] = [\n  { path: \"/call/:id\", component: CallPage, label: \"Call\" },\n  { path: \"/feedback/:id\", component: CallFeedbackPage, label: \"Feedback\" },\n  { path: \"/\", component: DashboardPage, label: \"Dash\" },\n];\n\nexport const TOKEN_KEY = \"apiToken\";\n\nexport const WRAPPER_PADDING = { padding: 24, paddingTop: 0 };\n\nexport const QUOTES: Quote[] = [\n  {\n    author: \"Mary Ann Evans\",\n    quote: \"It is never too late to be what you might have been.\",\n    description: \"\",\n    background:\n      \"https://images.unsplash.com/photo-1536257104079-aa99c6460a5a?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80\",\n  },\n  {\n    author: \"Walt Disney\",\n    quote:\n      \"All our dreams can come true, if we have the courage to pursue them.\",\n    description: \"\",\n    background:\n      \"https://images.unsplash.com/photo-1508556497405-ed7dcd94acfc?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80\",\n  },\n  {\n    author: \"Mark Twain\",\n    quote: \"The secret of getting ahead is getting started\",\n    description: \"\",\n    background:\n      \"https://images.unsplash.com/photo-1532971077387-7c6568101df5?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80\",\n  },\n  {\n    author: \"Babe Ruth\",\n    quote: \"It’s hard to beat a person who never gives up.\",\n    description: \"\",\n    background:\n      \"https://images.unsplash.com/photo-1564521456797-9f176245daa9?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1951&q=80\",\n  },\n];\n","import { UNAUTHENTICATED_USER_ID } from \"src/utils/constants\";\nimport { User } from \"src/types/User\";\n\ninterface AuthInfo {\n  token: string;\n  id: number;\n  type: \"inmate\";\n}\n\ninterface SessionState {\n  isLoggedIn: boolean;\n  authInfo: AuthInfo;\n  user: User;\n}\n\n// Constants & Shapes\nconst SET_SESSION = \"user/SET_SESSION\";\nconst LOGOUT = \"user/LOGOUT\";\n\ninterface SetSessionAction {\n  type: typeof SET_SESSION;\n  payload: SessionState;\n}\ninterface LogoutAction {\n  type: typeof LOGOUT;\n}\n\ntype UserActionTypes = LogoutAction | SetSessionAction;\n\nexport const logout = (): UserActionTypes => {\n  return {\n    type: LOGOUT,\n  };\n};\n\nexport const setSession = (userState: SessionState): UserActionTypes => {\n  return {\n    type: SET_SESSION,\n    payload: userState,\n  };\n};\n\n// Reducer\nconst initialState: SessionState = {\n  authInfo: { token: \"\", id: UNAUTHENTICATED_USER_ID, type: \"inmate\" },\n  user: {\n    id: UNAUTHENTICATED_USER_ID,\n    firstName: \"\",\n    lastName: \"\",\n    email: \"\",\n  },\n  isLoggedIn: false,\n};\n\nexport function sessionReducer(\n  state = initialState,\n  action: UserActionTypes\n): SessionState {\n  switch (action.type) {\n    case SET_SESSION:\n      return action.payload;\n    case LOGOUT:\n      //   sessionStorage.clear();\n      return {\n        ...state,\n        authInfo: { token: \"\", id: UNAUTHENTICATED_USER_ID, type: \"inmate\" },\n        user: {\n          id: UNAUTHENTICATED_USER_ID,\n          firstName: \"\",\n          lastName: \"\",\n          email: \"\",\n        },\n        isLoggedIn: false,\n      };\n    default:\n      return state;\n  }\n}\n","import { connectRouter, routerMiddleware } from \"connected-react-router\";\nimport { combineReducers } from \"redux\";\nimport { History, createBrowserHistory } from \"history\";\nimport { configureStore } from \"@reduxjs/toolkit\";\nimport { sessionReducer } from \"./modules/session\";\nimport { callSlice } from \"./modules/call\";\nimport { connectionSlice } from \"./modules/connection\";\n\nexport const history = createBrowserHistory();\n\nexport const createRootReducer = (history: History) =>\n  combineReducers({\n    session: sessionReducer,\n    calls: callSlice.reducer,\n    connections: connectionSlice.reducer,\n    router: connectRouter(history),\n  });\nexport const rootReducer = createRootReducer(history);\n\nexport const Store = configureStore({\n  reducer: rootReducer,\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware().concat(routerMiddleware(history)),\n});\n\nexport type RootState = ReturnType<typeof rootReducer>;\n","import { Store } from \"src/redux\";\n\nexport const API_URL = `${process.env.REACT_APP_BASE_URL}api/`;\n\nexport interface ApiResponse {\n  date: number;\n  good: boolean;\n  status?: \"OK\" | \"ERROR\" | \"succeeded\" | 200;\n  message?: string;\n  data: Record<string, unknown> | Record<string, unknown>[] | unknown;\n}\n\nexport function fetchTimeout(\n  fetchUrl: string,\n  options: Record<string, unknown>,\n  timeout = 15000\n): Promise<Response> {\n  return Promise.race([\n    fetch(fetchUrl, { ...options, mode: \"cors\" }),\n    new Promise<Response>((_, reject) =>\n      setTimeout(() => reject(new Error(\"timeout\")), timeout)\n    ),\n  ]);\n}\n\nexport function toQueryString(options: string[][]) {\n  return options.map((x) => x[0] + \"=\" + encodeURIComponent(x[1])).join(\"&\");\n}\n\nexport async function fetchAuthenticated(\n  fetchUrl: string,\n  options: Record<string, unknown> = {},\n  timeout = 15000\n): Promise<ApiResponse> {\n  const state = Store.getState();\n\n  const requestOptions = {\n    ...options,\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${state.session.authInfo.token}`,\n      \"X-Ameelio-User-Type\": \"inmate\",\n      \"X-Ameelio-Inmate-Id\": `${state.session.authInfo.id}`,\n    },\n  };\n\n  const response = await fetchTimeout(\n    `${API_URL}/inmate/${state.session.authInfo.id}/${fetchUrl}`,\n    requestOptions,\n    timeout\n  );\n\n  const body = await response.json();\n\n  return body;\n}\n","import { API_URL, fetchTimeout } from \"./Common\";\nimport url from \"url\";\nimport { setSession } from \"src/redux/modules/session\";\nimport { Store } from \"src/redux\";\nimport { TOKEN_KEY } from \"src/utils/constants\";\nimport { User } from \"src/types/User\";\n\nasync function initializeSession(body: any) {\n  const user = body.data.user as User;\n  const { token, id } = body.data.user;\n  Store.dispatch(\n    setSession({\n      user,\n      authInfo: { token, id, type: \"inmate\" },\n      isLoggedIn: true,\n    })\n  );\n\n  // TO\n  localStorage.setItem(TOKEN_KEY, token);\n}\n\nexport async function loginWithCredentials(cred: {\n  inmateNumber: string;\n  pin: string;\n}): Promise<void> {\n  const response = await fetchTimeout(url.resolve(API_URL, \"inmate/auth\"), {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      node_id: 2,\n      inmate_number: cred.inmateNumber,\n      pin: cred.pin,\n    }),\n  });\n  const body = await response.json();\n  if (body.status !== 200) throw body;\n  await initializeSession(body);\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"style\", null, \".cls-1,.cls-2{fill:#0073eb;stroke:#fff;stroke-miterlimit:10;stroke-width:3px;}.cls-2{opacity:0.7;}.cls-3{fill:#1a1a1a;}\"));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-1\",\n  d: \"M111.83,48.88h0l-8.38,20.22L98.27,81.58l0,0v.08L91.48,98h0L90,101.55h0l-2.9,7-.6-2.23-.64-2.43-4-15.27L71,47.66l-1.6-6.1L63.79,20.1Z\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"cls-2\",\n  points: \"87.09 108.56 85.99 107.12 84.4 105.05 77.65 96.2 71.96 88.74 50.31 60.32 41.21 48.39 71.04 47.66 81.83 88.63 85.85 103.9 86.49 106.33 87.09 108.56\"\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"cls-1\",\n  points: \"67.95 154.72 59.71 174.61 29.58 171.5 58.55 149.76 64.48 145.32 75.17 137.31 67.96 154.69 67.95 154.72\"\n});\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-1\",\n  d: \"M134.41,137.69h0L81.75,151.16l-2.83.73-11,2.8,7.21-17.38h0l2.27-5.48h0l9.54-23,.1-.23h0l2.9-7h0L91.47,98h0l6.75-16.29h0l0-.09,5.17-12.47,8.38-20.22h0l4,15.53,4.51,17.78,4.95,19.43,3,11.89h0Z\"\n});\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"cls-1\",\n  points: \"161.52 72.3 156.34 84.79 151.4 96.73 147.81 105.36 146.74 107.93 146.74 107.94 134.41 137.69 128.27 113.52 128.26 113.52 125.24 101.63 120.29 82.2 120.3 82.19 121.87 81.82 141.5 77.1 160.2 72.62 161.52 72.3\"\n});\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"cls-2\",\n  points: \"187.8 89.91 179.44 91.47 170.42 93.17 170.41 93.16 151.4 96.73 156.34 84.79 161.52 72.3 162.14 72.71 187.8 89.91\"\n});\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-3\",\n  d: \"M234.77,211.91h-17.2L209.18,190H163l-8.4,21.88H137.37l38.93-98.23h19.54Zm-66-36.73H203.4l-17.33-45.27Z\"\n});\n\nvar _ref10 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-3\",\n  d: \"M259.67,211.91H245V161.28h-5.64V148.07h11.83l6.19,6.2c5.5-4.54,12.24-7.43,18.57-7.43a20.61,20.61,0,0,1,17.34,8.66,31.53,31.53,0,0,1,21-8.66c11.7,0,22.43,8,22.43,26.55v38.52H322V173.39c0-8.39-4.54-12.93-11.28-12.93-7.57,0-12.52,4.54-12.52,10.59v40.86H283.61V173.39c0-8.39-4.68-12.93-11.29-12.93-7.42,0-12.65,4.4-12.65,10.18Z\"\n});\n\nvar _ref11 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-3\",\n  d: \"M393.53,190.72l12.1,6.61c-4.95,8.39-14.17,16.09-26.82,16.09-18.3,0-31.37-15.41-31.37-33.29s13.07-33.57,31.23-33.57,29.44,15.27,30,31.92l-5.5,5.36H362.3c.82,9.5,8.11,15.82,16.51,15.82C384.58,199.66,390.36,196,393.53,190.72ZM363,172.15h30.95c-1-7.15-7.43-12.52-15.27-12.52A15.72,15.72,0,0,0,363,172.15Z\"\n});\n\nvar _ref12 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-3\",\n  d: \"M461.76,190.72l12.11,6.61c-4.95,8.39-14.17,16.09-26.83,16.09-18.3,0-31.37-15.41-31.37-33.29s13.07-33.57,31.23-33.57,29.44,15.27,30,31.92l-5.5,5.36H430.53c.83,9.5,8.12,15.82,16.51,15.82C452.82,199.66,458.6,196,461.76,190.72Zm-30.54-18.57h30.95c-1-7.15-7.42-12.52-15.27-12.52A15.72,15.72,0,0,0,431.22,172.15Z\"\n});\n\nvar _ref13 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-3\",\n  d: \"M489.41,113.68l4.82-5h10.18V197.6h5.64v14.31H495.6l-6.19-6.33Z\"\n});\n\nvar _ref14 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-3\",\n  d: \"M540.73,211.91H526V161.28h-5.5V148.07h15l5.23,5.23ZM532,112a10.49,10.49,0,0,1,10.39,10.39A10.37,10.37,0,0,1,532,132.67a10.25,10.25,0,0,1-10.25-10.26A10.37,10.37,0,0,1,532,112Z\"\n});\n\nvar _ref15 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-3\",\n  d: \"M620,180a33.36,33.36,0,1,1-33.29-33.29A33.35,33.35,0,0,1,620,180Zm-15,0c0-10.32-7.71-19.12-18.3-19.12s-18.44,8.8-18.44,19.12,7.85,19.26,18.44,19.26S605,190.31,605,180Z\"\n});\n\nfunction SvgLogo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Golden_Grid\",\n    \"data-name\": \"Golden Grid\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 666.85 257.93\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogo);\nexport default __webpack_public_path__ + \"static/media/logo.31994bf9.svg\";\nexport { ForwardRef as ReactComponent };","import React, { ReactElement } from \"react\";\nimport { RootState } from \"src/redux\";\nimport { connect, ConnectedProps } from \"react-redux\";\nimport {\n  Input,\n  Layout,\n  Button,\n  Form,\n  Typography,\n  Card,\n  Space,\n  Row,\n} from \"antd\";\nimport { Redirect } from \"react-router\";\nimport { loginWithCredentials } from \"src/api/User\";\nimport { LockOutlined, UserOutlined } from \"@ant-design/icons\";\nimport { showToast } from \"src/utils/utils\";\nimport { ReactComponent as Logo } from \"src/assets/logo.svg\";\nimport \"./index.css\";\nimport \"src/i18n/config\";\nimport { useTranslation } from \"react-i18next\";\n\nconst { Content } = Layout;\n\nconst mapStateToProps = (state: RootState) => ({\n  session: state.session,\n});\n\nconst connector = connect(mapStateToProps);\n\ntype PropsFromRedux = ConnectedProps<typeof connector>;\n\nfunction LoginContainer({ session }: PropsFromRedux): ReactElement {\n  const { t } = useTranslation(\"login\");\n\n  if (session.isLoggedIn) {\n    return <Redirect to=\"/\" />;\n  }\n\n  const onFinish = async (values: any) => {\n    try {\n      await loginWithCredentials({\n        inmateNumber: values.inmateNumber,\n        pin: values.pin,\n      });\n    } catch (err) {\n      showToast(\"login_error\", \"Invalid ID or Pin Code\", \"error\");\n    }\n  };\n\n  const onFinishFailed = (errorInfo: any) => {\n    showToast(\"login_error\", \"Invalid ID or Pin Code\", \"error\");\n  };\n\n  return (\n    <Content className=\"d-flex flex-column\">\n      <Space className=\"m-auto\" direction=\"vertical\" size=\"large\">\n        <Row justify=\"center\">\n          <Logo className=\"login-logo\" />\n        </Row>\n\n        <Card className=\"login-form-container\">\n          <Typography.Title level={3}>{t(\"title\")}</Typography.Title>\n          <Form\n            name=\"basic\"\n            onFinish={onFinish}\n            onFinishFailed={onFinishFailed}\n            className=\"login-form\"\n          >\n            <Form.Item\n              name=\"inmateNumber\"\n              rules={[{ required: true, message: \"Inmate ID is required.\" }]}\n            >\n              <Input\n                prefix={<UserOutlined className=\"site-form-item-icon\" />}\n                placeholder={t(\"placeholder.inmateNumber\")}\n              />\n            </Form.Item>\n\n            <Form.Item\n              name=\"pin\"\n              rules={[{ required: true, message: \"Password is required.\" }]}\n            >\n              <Input.Password\n                prefix={<LockOutlined className=\"site-form-item-icon\" />}\n                placeholder={t(\"placeholder.pinCode\")}\n              />\n            </Form.Item>\n\n            <Form.Item>\n              <Button type=\"primary\" htmlType=\"submit\" size=\"large\" block>\n                {t(\"buttonText\")}\n              </Button>\n            </Form.Item>\n          </Form>\n        </Card>\n      </Space>\n    </Content>\n  );\n}\n\nexport default connector(LoginContainer);\n","import React, { ReactElement, useState } from \"react\";\nimport { Menu, Layout } from \"antd\";\nimport { HomeOutlined } from \"@ant-design/icons\";\n\nconst { Sider } = Layout;\ninterface Props {\n  navigate: (path: string) => void;\n  isVisible: boolean;\n  pathname: string;\n}\n\nexport default function Sidebar({\n  navigate,\n  isVisible,\n  pathname,\n}: Props): ReactElement {\n  const [collapsed, setCollapsed] = useState(false);\n\n  if (\n    !isVisible ||\n    pathname.indexOf(\"call\") !== -1 ||\n    pathname.indexOf(\"feedback\") !== -1\n  )\n    return <div />;\n  return (\n    <Sider\n      theme=\"light\"\n      collapsible\n      collapsed={collapsed}\n      onCollapse={() => setCollapsed((collapsed) => !collapsed)}\n    >\n      <div className=\"logo\" />\n      <Menu mode=\"inline\" defaultSelectedKeys={[\"home\"]}>\n        <Menu.Item\n          key=\"home\"\n          icon={<HomeOutlined />}\n          onClick={() => navigate(\"home\")}\n        >\n          Home\n        </Menu.Item>\n        {/* <Menu.Item\n          key=\"contacts\"\n          icon={<UserOutlined />}\n          onClick={() => navigate(\"home\")}\n        >\n          Contacts\n        </Menu.Item> */}\n      </Menu>\n    </Sider>\n  );\n}\n","import React from \"react\";\nimport \"./App.scss\";\nimport { RootState } from \"src/redux\";\nimport { connect, ConnectedProps } from \"react-redux\";\nimport { ConnectedRouter, push } from \"connected-react-router\";\nimport { Layout } from \"antd\";\nimport { Redirect, Route, Switch } from \"react-router\";\nimport { History } from \"history\";\nimport ProtectedRoute, {\n  ProtectedRouteProps,\n} from \"./components/hocs/ProtectedRoute\";\nimport LoginPage from \"src/pages/Login\";\nimport { ROUTES } from \"./utils/constants\";\nimport { useEffect } from \"react\";\nimport { fetchConnections } from \"./redux/modules/connection\";\nimport Sidebar from \"./components/menu/Sidebar\";\n\nconst mapStateToProps = (state: RootState) => ({\n  session: state.session,\n  pathname: state.router.location.pathname,\n});\nconst mapDispatchToProps = { fetchConnections, push };\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\ntype PropsFromRedux = ConnectedProps<typeof connector>;\n\nfunction App({\n  session,\n  history,\n  pathname,\n  fetchConnections,\n  push,\n}: PropsFromRedux & { history: History }) {\n  const defaultProtectedRouteProps: ProtectedRouteProps = {\n    isAuthenticated: session.authInfo.token !== \"\", // TODO: improve this later\n    authenticationPath: \"/login\",\n  };\n\n  useEffect(() => {\n    if (session.isLoggedIn) fetchConnections();\n  }, [session.isLoggedIn, fetchConnections]);\n\n  return (\n    <ConnectedRouter history={history}>\n      <Layout style={{ minHeight: \"100vh\" }}>\n        <Sidebar\n          navigate={(path: string) => push(path)}\n          isVisible={session.isLoggedIn}\n          pathname={pathname}\n        />\n        <Layout>\n          <Switch>\n            <Route exact path=\"/login\" component={LoginPage}></Route>\n            {ROUTES.map((route) => (\n              <ProtectedRoute\n                exact\n                {...defaultProtectedRouteProps}\n                path={route.path}\n                component={route.component}\n                key={route.label}\n              ></ProtectedRoute>\n            ))}\n            <Redirect to=\"/login\" />\n          </Switch>\n          {/* <Footer style={{ textAlign: \"center\" }}>\n            Connect ©2021 Created by Ameelio Inc.\n          </Footer> */}\n        </Layout>\n      </Layout>\n    </ConnectedRouter>\n  );\n}\n\nexport default connector(App);\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { Provider } from \"react-redux\";\nimport { history, Store } from \"./redux\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={Store}>\n      <App history={history} />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}