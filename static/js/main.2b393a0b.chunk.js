(this["webpackJsonppathways-client"]=this["webpackJsonppathways-client"]||[]).push([[0],{284:function(e){e.exports=JSON.parse('{"privacyNotice":{"title":"Privacy Notice","body":"I understand that by joining this call, I am consenting to the monitoring and recording of it for security purposes. In addition, I understand that if I violate any facility calling policies, my call may be terminated.","okText":"Agree"},"call":{"title":"Upcoming Calls","seeAll":"See All","noCalls":"Upcoming calls will appear here when your contacts schedule a call with you.","upcomingCalls":"upcoming call","minutes":"minutes","ago":"ago","join":"Join Now","seeDetails":"See Details","cancelDescription":"Can\u2019t make this time? You can cancel this call and select a cancellation reason to send to your contact.","cancel":"Cancel","whatToExpect":"What to expect for my call","privacyNotice":"Privacy Notice"},"connection":{"active":"Active","pending":"Pending","title":"Contacts","lastCall":"Last call: {{daysPastNum}} days ago"}}')},285:function(e){e.exports=JSON.parse('{"profileInfo":{"editProfile":"Edit Profile","about":"About","history":"History","name":"Name","home":"Home","birthday":"Birthday","totalCalls":"Total Calls","totalMinutes":"Total Minutes Talked"}}')},286:function(e){e.exports=JSON.parse('{"profileInfo":{"editProfile":"Editar Perfil","about":"About","history":"Historia","name":"Nombre","home":"Home","birthday":"Birthday","totalCalls":"Total Calls","totalMinutes":"Total Minutes Talked"}}')},287:function(e){e.exports=JSON.parse('{"doc":{"warning":"DOC Warning"},"peer":{"joinedCallTitle":"joined the call","joinedCallBody":"Your call will connect soon.","muted":"muted their mic","unmuted":"unmuted their mic","videoOn":"turned on their video","videoOff":"turned off their video"},"waitingRoom":{"questionOfDay":"Question of the day","initialization":"Initializing video call...","waitingForPrefix":"Waiting for","waitingForSuffix":"to join the call","loading":"Loading...","whenWillCallConnect":"When will my call connect?","checkConnection":"Check Connection","leaveWaitingRoom":"Leave Waiting Room"},"chat":{"title":"Chat","placeholder":"Type here...","monitorWarning":"Note: All messages are monitored for security purposes."},"videoOverlay":{"on":"On","off":"off","chat":"Chat","video":"Video","mic":"Mic","showTime":"Show Time","hideTime":"Hide Time","leaveCall":"Leave Call"},"you":{"You":"You","enabledWebcam":"turned on your webcam","disabledWebcam":"turned off your webcam","mutedMic":"muted your microphone","unmutedMic":"unmuted your microphone"},"testConnection":{"title":"Check Your Audio & Video"}}')},288:function(e){e.exports=JSON.parse('{"callLimit":"Daily call limit","cancel":"Cancel"}')},289:function(e){e.exports=JSON.parse('{"title":"Welcome to pathways","caption":"To login, please enter your ID number and 6-digit PIN code. By using Ameelio Connect, you agree to","tos":"Terms of Service","pp":"Privacy Policy","and":"and","buttonText":"Login","placeholder":{"inmateNumber":"Inmate Number","pinCode":"Pin Code"}}')},290:function(e){e.exports=JSON.parse('{"title":"Bienvenido a Ameelio","buttonText":"Iniciar Sesi\xf3n","caption":"Para iniciar sesi\xf3n, ingresa tu n\xfamero de identificaci\xf3n y el c\xf3digo PIN. Al utilizar Ameelio Connect, acepta la","tos":"los T\xe9rminos de Servicio","pp":"la Pol\xedtica de Privacidad","and":"y","placeholder":{"inmateNumber":"N\xfamero de Persona Encarcelada","pinCode":"C\xf3digo PIN"}}')},291:function(e){e.exports=JSON.parse('{"call":{"title":"Pr\xf3ximas llamadas","seeAll":"Ver Todo","noCalls":"No hay pr\xf3ximas llamadas","upcomingCalls":"Pr\xf3ximas llamada","minutes":"minutos","ago":"atr\xe1s","join":"\xdanete Ahora","seeDetails":"Ver Detalles"},"connection":{"active":"Aprobada(o)s","pending":"Pendientes","title":"Contactos"}}')},292:function(e){e.exports=JSON.parse('{"doc":{"warning":"DOC Warning"},"peer":{"joinedCallTitle":"joined the call","joinedCallBody":"Your call will connect soon.","muted":"muted their mic","unmuted":"unmuted their mic","videoOn":"turned on their video","videoOff":"turned off their video"},"waitingRoom":{"questionOfDay":"Question of the day:","initialization":"Initializing video call...","waitingForPrefix":"Waiting for","waitingForSuffix":"to join the call","loading":"Loading...","whenWillCallConnect":"When will my call connect?","checkConnection":"Check Connection","leaveWaitingRoom":"Leave Waiting Room"},"chat":{"title":"Chat","placeholder":"Type here...","monitorWarning":"Note: All messages are monitored for security purposes."},"videoOverlay":{"on":"On","off":"off","chat":"Chat","video":"Video","mic":"Mic","showTime":"Show Time","hideTime":"Hide Time","leaveCall":"Leave Call"},"you":{"You":"You","enabledWebcam":"turned on your webcam","disabledWebcam":"turned off your webcam","mutedMic":"muted your microphone","unmutedMic":"unmuted your microphone"},"testConnection":{"title":"Check Your Audio & Video"}}')},293:function(e){e.exports=JSON.parse('{"cancelCallModal":{"title":"Cancel Call?","okText":"Confirm","messageOne":"You are about to cancel your call with {{connectionName}} for:","messageTwo":"Please select a cancellation reason to send to {{connectionFirstName}}.","dropdownPlaceholder":"Cancellation reason"}}')},294:function(e){e.exports=JSON.parse('{"cancelCallModal":{"title":"Cancelar llamada?","okText":"Confirmar","messageOne":"You are about to cancel your call with {{connectionName}} for:","messageTwo":"Please select a cancellation reason to send to {{connectionFirstName}}.","dropdownPlaceholder":"Cancellation reason"}}')},295:function(e){e.exports=JSON.parse('{"language":{"title":"Language","messageOne":"Please select your preferred language.","messageTwo":"Por favor elija su idioma preferido."},"resources":{"title":"Resources","contactVerification":"How does contact verification work","callInfo":"What can I expect for a call","privacyInfo":"Your privacy on Ameelio Connect video calls"}}')},296:function(e){e.exports=JSON.parse('{"language":{"title":"Language","messageOne":"Please select your preferred language.","messageTwo":"Por favor elija su idioma preferido."},"resources":{"title":"Resources","contactVerification":"How does contact verification work","callInfo":"What can I expect for a call","privacyInfo":"Your privacy on Ameelio Connect video calls"}}')},321:function(e,t,n){},322:function(e,t,n){},511:function(e,t,n){},525:function(e,t,n){},526:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n(0),r=n.n(c),i=n(35),o=n.n(i),s=(n(321),n(33)),l=(n(322),n(108)),u=n(275),d=n(67),j=n(92),b=n(45),f=n(22),h=n(8),p=n.n(h),O=n(23),m="".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MEDIASOUP_HOSTNAME:"wss://connect-api-staging.ameelio.org/",REACT_APP_BASE_URL:"https://connect-api-staging.ameelio.org/"}).REACT_APP_CONNECT_API_URL);function x(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15e3;return Promise.race([fetch(e,Object(s.a)(Object(s.a)({},t),{},{mode:"cors"})),new Promise((function(e,t){return setTimeout((function(){return t(new Error("timeout"))}),n)}))])}function v(e){return g.apply(this,arguments)}function g(){return(g=Object(O.a)(p.a.mark((function e(t){var n,a,c,r,i,o,l=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:{},a=l.length>2&&void 0!==l[2]?l[2]:15e3,c=xn.getState(),r=Object(s.a)(Object(s.a)({},n),{},{headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}),e.next=6,x("".concat(m,"inmates/").concat(c.session.authInfo.id,"/").concat(t),r,a);case 6:if(200===(i=e.sent).status||201===i.status){e.next=9;break}throw i;case 9:return e.next=11,i.json();case 11:return o=e.sent,e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return w.apply(this,arguments)}function w(){return(w=Object(O.a)(p.a.mark((function e(){var t,n,a,c,r=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:1500,n={headers:{Accept:"application/json","Content-Type":"application/json"}},e.next=4,x("".concat(m,"public/facilities"),n,t);case 4:return a=e.sent,e.next=7,a.json();case 7:return c=e.sent,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=n(279),k=n(280),T=n(281),N=n(312),I=n(309);function S(e){return e[Math.floor(Math.random()*e.length)]}var E=function(e){return e.split(" ").map((function(e){return e[0]})).join("")},M=function(e){return e?"".concat(e.firstName," ").concat(e.lastName):""},P=function(e,t,n){N.a[n]({message:e,description:t})},A=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3;switch(n){case"success":I.b.success({content:t,key:e,duration:a});break;case"error":I.b.error({content:t,key:e,duration:a});break;case"warning":I.b.warning({content:t,key:e,duration:a});break;case"loading":I.b.loading({content:t,key:e,duration:a});break;default:I.b.info({content:t,key:e,duration:a})}};function D(e){return null!==e&&void 0!==e}var L=[10,5,2],R="bg-white text-black";function H(e,t){var n=e.userIds.map((function(e){return t[e]})).filter(D);return Object(s.a)(Object(s.a)({},e),{},{userParticipants:n})}function z(e,t){return"audio"===e?{audio:!0}:{video:!0}}function B(e,t){return V.apply(this,arguments)}function V(){return(V=Object(O.a)(p.a.mark((function e(t,n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=z(t),e.next=3,navigator.mediaDevices.getUserMedia(a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _={width:{min:640,ideal:1920},height:{min:400,ideal:1080},encodings:[{rid:"r0",maxBitrate:1e5,scalabilityMode:"S1T3"},{rid:"r1",maxBitrate:3e5,scalabilityMode:"S1T3"},{rid:"r2",maxBitrate:9e5,scalabilityMode:"S1T3"}],codecOptions:{videoGoogleStartBitrate:1e3}};var W=function(){function e(t,n){Object(C.a)(this,e),this.callId=void 0,this.producerTransport=void 0,this.consumerTransport=void 0,this.device=void 0,this.consumers=void 0,this.producers=void 0,this.handlers=void 0,this.socket=void 0,this.socket=t,this.callId=n,this.producerTransport=null,this.consumerTransport=null,this.device=null,this.consumers={},this.producers={},this.handlers={consume:[]}}return Object(k.a)(e,[{key:"request",value:function(){var e=Object(O.a)(p.a.mark((function e(t,n){var a=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,c){if(!a.socket)return c("No socket connection.");a.socket.emit(t,n,(function(t){t.error?c(t.error):e(t)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"handleTransportConnect",value:function(){var e=Object(O.a)(p.a.mark((function e(t){var n=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){t.on("connect",function(){var a=Object(O.a)(p.a.mark((function a(c,r,i){var o;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=c.dtlsParameters,a.next=3,n.request("establishDtls",{dtlsParameters:o,callId:n.callId,transportId:t.id});case 3:r(),e();case 5:case"end":return a.stop()}}),a)})));return function(e,t,n){return a.apply(this,arguments)}}())})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Object(O.a)(p.a.mark((function e(){var t,n,a,c,r=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("join",{callId:this.callId});case 2:return t=e.sent,n=t.producerTransportInfo,a=t.consumerTransportInfo,c=t.routerRtpCapabilities,e.next=8,this.loadDevice(c);case 8:if(this.device=e.sent,this.device){e.next=11;break}return e.abrupt("return");case 11:return n&&(this.producerTransport=this.device.createSendTransport(n),this.handleTransportConnect(this.producerTransport)),this.consumerTransport=this.device.createRecvTransport(a),this.handleTransportConnect(this.consumerTransport),e.next=16,this.request("declareRtpCapabilities",{rtpCapabilities:this.device.rtpCapabilities});case 16:this.request("finishConnecting",{callId:this.callId}),this.producerTransport&&this.producerTransport.on("produce",function(){var e=Object(O.a)(p.a.mark((function e(t,n,a){var c,i,o,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.kind,i=t.rtpParameters,e.next=3,r.request("produce",{callId:r.callId,kind:c,rtpParameters:i});case 3:o=e.sent,s=o.producerId,n({id:s});case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),this.socket.on("consume",function(){var e=Object(O.a)(p.a.mark((function e(t){var n,a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.consume(t);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:a=n.consumer,c=n.stream,r.socket.emit("resumeConsumer",{callId:r.callId,consumerId:a.id}),r.handlers.consume.forEach((function(e){return e(t.kind,c,t.user)}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"produce",value:function(){var e=Object(O.a)(p.a.mark((function e(t,n){var a,c,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.producerTransport){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,B(t,n);case 4:return a=e.sent,c=("audio"===t?a.getAudioTracks():a.getVideoTracks())[0],r={track:c},"video"===t&&(r.encodings=_.encodings,r.codecOptions=_.codecOptions),e.next=10,this.producerTransport.produce(r);case 10:return i=e.sent,this.producers[i.id]=i,e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadDevice",value:function(){var e=Object(O.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new T.Device,e.next=3,n.load({routerRtpCapabilities:t});case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"consume",value:function(){var e=Object(O.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.consumerTransport){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.consumerTransport.consume(t);case 4:return n=e.sent,a=new MediaStream([n.track]),this.consumers[n.id]=n,e.abrupt("return",{consumer:n,stream:a});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"on",value:function(){var e=Object(O.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t in this.handlers||(this.handlers[t]=[]),this.handlers[t].push(n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"terminate",value:function(){var e=Object(O.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("terminate",{callId:this.callId});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pauseVideo",value:function(){var e=Object(O.a)(p.a.mark((function e(){var t,n=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=Object.values(this.producers))||void 0===t||t.forEach((function(e){"video"===e.kind&&(e.pause(),n.socket.emit("producerUpdate",{callId:n.callId,contents:{producerId:e.id,active:!1,type:"video"}}))})),this.handlers.pauseVideo.forEach((function(e){return e()}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resumeVideo",value:function(){var e=Object(O.a)(p.a.mark((function e(){var t,n=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=Object.values(this.producers))||void 0===t||t.forEach((function(e){"video"===e.kind&&(e.resume(),n.socket.emit("producerUpdate",{callId:n.callId,contents:{producerId:e.id,active:!0,type:"video"}}))})),this.handlers.resumeVideo.forEach((function(e){return e()}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pauseAudio",value:function(){var e=Object(O.a)(p.a.mark((function e(){var t,n=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=Object.values(this.producers))||void 0===t||t.forEach((function(e){"audio"===e.kind&&(e.pause(),n.socket.emit("producerUpdate",{callId:n.callId,contents:{producerId:e.id,active:!1,type:"audio"}}))})),this.handlers.pauseAudio.forEach((function(e){return e()}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resumeAudio",value:function(){var e=Object(O.a)(p.a.mark((function e(){var t,n=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=Object.values(this.producers))||void 0===t||t.forEach((function(e){"audio"===e.kind&&(e.resume(),n.socket.emit("producerUpdate",{callId:n.callId,contents:{producerId:e.id,active:!0,type:"audio"}}))})),this.handlers.resumeAudio.forEach((function(e){return e()}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){var e=Object(O.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.socket.off("connect"),this.socket.off("consume"),this.socket.off("textMessage"),this.socket.close(),this.consumerTransport&&this.consumerTransport.close(),this.producerTransport&&this.producerTransport.close(),this.consumerTransport=null,this.producerTransport=null,Object.values(this.producers).forEach((function(e){e.close()})),Object.values(this.consumers).forEach((function(e){e.close()})),this.consumers={},this.producers={},this.handlers={};case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),q=n(282),F=n.n(q),U=Object(b.b)("calls/fetchAll",Object(O.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v("calls");case 2:return t=e.sent,n=t.data.results,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))),Y=Object(b.b)("visit/initializeVisit",function(){var e=Object(O.a)(p.a.mark((function e(t){var n,a,c,r,i,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.callId,a=t.setRc,c=t.authInfo,r=t.videoHandler,(i=F.a.connect("https://localhost:".concat(r.port),{transports:["websocket"]})).connected){e.next=5;break}return e.next=5,new Promise((function(e){return i.on("connect",e)}));case 5:return e.next=7,new Promise((function(e){i.emit("authenticate",c,e)}));case 7:return o=new W(i,n),e.next=10,o.init();case 10:return a(o),e.abrupt("return",{callId:n});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),J=Object(b.b)("visit/initializeProducers",function(){var e=Object(O.a)(p.a.mark((function e(t){var n,a,c,r,i,o,s,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.rc,a=t.setLocalAudio,c=t.setLocalVideo,r=t.setRc,e.next=3,Promise.all([n.produce("video"),n.produce("audio")]);case 3:if(i=e.sent,o=Object(f.a)(i,2),s=o[0],l=o[1],s){e.next=9;break}throw Error("Unable to produce video");case 9:if(l){e.next=11;break}throw Error("Unable to produce audio");case 11:a({stream:l,paused:!1}),c({stream:s,paused:!1}),n.on("pauseVideo",(function(){c((function(e){if(e)return{stream:e.stream,paused:!0}}))})),n.on("resumeVideo",(function(){c((function(e){if(e)return{stream:e.stream,paused:!1}}))})),n.on("pauseAudio",(function(){a((function(e){if(e)return{stream:e.stream,paused:!0}}))})),n.on("resumeAudio",(function(){a((function(e){if(e)return{stream:e.stream,paused:!1}}))})),r(n);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),G=Object(b.b)("visit/initializeRemotes",function(){var e=Object(O.a)(p.a.mark((function e(t){var n,a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.rc,a=t.setRemoteAudios,c=t.setRemoteVideos,n.on("consume",function(){var e=Object(O.a)(p.a.mark((function e(t,n,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("user"===r.type){e.next=2;break}return e.abrupt("return");case 2:"audio"===t&&a((function(e){var t=Object(s.a)({},e);return t[r.id]=n,t})),"video"===t&&c((function(e){var t=Object(s.a)({},e);return t[r.id]=n,t}));case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Z=Object(b.c)(),K=Object(b.d)({name:"calls",initialState:Z.getInitialState(),reducers:{},extraReducers:function(e){e.addCase(U.fulfilled,(function(e,t){return Z.setAll(e,t.payload)})),e.addCase(Y.rejected,(function(){return A("initializeVisit","Failed to initialize call.","error")})),e.addCase(J.rejected,(function(){return A("initializeProducers","Failed to initialize local streams.","error")})),e.addCase(G.rejected,(function(){return A("initializeProducers","Failed to initialize remotes.","error")}))}}),X=(K.actions,n(170)),Q=n.n(X),$=Object(b.c)(),ee=Object(b.b)("contacts/fetchAll",Object(O.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v("contacts");case 2:return t=e.sent,n=t.data.contacts.map((function(e){return Q()(e)})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))),te=Object(b.d)({name:"contacts",initialState:$.getInitialState(),reducers:{},extraReducers:function(e){e.addCase(ee.fulfilled,(function(e,t){$.setAll(e,t.payload)}))}}),ne=n(109),ae=Z.getSelectors((function(e){return e.calls})),ce=ae.selectAll,re=ae.selectById,ie=$.getSelectors((function(e){return e.contacts})),oe=ie.selectAll,se=(ie.selectById,ie.selectEntities),le=(Object(ne.a)(ce,(function(e){return e.filter((function(e){return"ended"!==e.status&&"terminated"!==e.status}))})),Object(ne.a)(ce,(function(e){return e.filter((function(e){return"ended"===e.status||"terminated"===e.status}))})),n(313)),ue=n(284),de=n(285),je=n(286),be=n(287),fe=n(288),he=n(289),pe=n(290),Oe=n(291),me=n(292),xe=n(293),ve=n(294),ge=n(295),ye=n(296),we=n(148),Ce={en:{login:he,dashboard:ue,profile:de,call:be,calls:fe,modals:xe,settings:ge},es:{login:pe,dashboard:Oe,profile:je,call:me,modals:ve,settings:ye}};le.a.use(we.e).init({lng:"en",ns:["login","dashboard","call","profile","settings","modals"],resources:Ce});var ke=n(543),Te=n(536),Ne=n(535),Ie=n(133),Se=n(79),Ee=n(533),Me=n(297),Pe=n.n(Me),Ae=n(557),De=n(532),Le=n(542),Re=n(528),He=function(e){var t=e.children;return Object(a.jsx)(Re.a,{className:"min-h-screen",children:Object(a.jsxs)(Re.a.Content,{children:[Object(a.jsx)("div",{style:{height:"60px",backgroundColor:"#F0DEFF",opacity:.4}}),t]})})},ze=n(544),Be=n(62),Ve=function(e){var t=e.children;return Object(a.jsx)(Be.a,{type:"primary",icon:Object(a.jsx)(ze.a,{}),size:"large",className:"rounded",children:t})},_e=function(e){var t=e.user,n=e.calls,r=(e.onEdit,Object(Le.a)("profile").t),i=Object(c.useState)(0),o=Object(f.a)(i,2),s=o[0],l=o[1];return Object(c.useEffect)((function(){if(n.length){var e=n.map((function(e){return Object(Ae.a)(new Date(e.scheduledEnd),new Date(e.scheduledStart))})).reduce((function(e,t){return e+t}));l(e)}}),[n]),Object(a.jsx)(He,{children:Object(a.jsxs)(ke.b,{direction:"vertical",size:"large",className:"w-100 p-6 pt-9",children:[Object(a.jsx)(Te.a,{className:"p-6 border border-solid border-opacity-1 border-gray-200",children:Object(a.jsxs)(ke.b,{className:"flex justify-between",children:[Object(a.jsxs)(ke.b,{children:[Object(a.jsx)(Pe.a,{src:t.profileImagePath,size:tn}),Object(a.jsxs)(ke.b,{direction:"vertical",children:[Object(a.jsx)(Ne.a.Title,{level:4,children:Object(a.jsx)(Ne.a.Text,{strong:!0,children:M(t)})}),Object(a.jsx)(Ne.a.Title,{level:5,children:Object(a.jsx)(Ne.a.Text,{children:t.location})})]})]}),Object(a.jsx)(Ve,{children:r("profileInfo.editProfile")})]})}),Object(a.jsxs)(Ie.a,{gutter:32,children:[Object(a.jsx)(Se.a,{span:16,children:Object(a.jsxs)(Ee.a,{title:r("profileInfo.about"),children:[Object(a.jsx)("p",{children:Object(a.jsx)(Ne.a.Text,{children:"".concat(r("profileInfo.name"),": ").concat(M(t))})}),Object(a.jsx)("p",{children:Object(a.jsx)(Ne.a.Text,{children:"".concat(r("profileInfo.home"),": ").concat(t.location)})}),Object(a.jsx)("p",{children:Object(a.jsx)(Ne.a.Text,{children:"".concat(r("profileInfo.birthday"),": ").concat(Object(De.a)(new Date(t.dateOfBirth),"MMMM d, yyyy"))})})]})}),Object(a.jsx)(Se.a,{span:8,children:Object(a.jsx)(Ee.a,{title:r("profileInfo.history"),children:Object(a.jsxs)(Ie.a,{children:[Object(a.jsxs)(Se.a,{span:4,children:[Object(a.jsx)("p",{children:Object(a.jsx)(Ne.a.Text,{type:"secondary",children:r("profileInfo.totalCalls")})}),Object(a.jsx)("p",{children:Object(a.jsx)(Ne.a.Text,{children:n.length})})]}),Object(a.jsxs)(Se.a,{span:16,offset:2,children:[Object(a.jsx)("p",{children:Object(a.jsx)(Ne.a.Text,{type:"secondary",children:r("profileInfo.totalMinutes")})}),Object(a.jsx)("p",{children:Object(a.jsx)(Ne.a.Text,{children:s})})]})]})})})]})]})})},We=function(e){var t=e.calls,n=e.user,r=Object(c.useState)(!1),i=Object(f.a)(r,2),o=i[0],s=i[1];return o?null:Object(a.jsx)(_e,{user:n,calls:t,onEdit:function(){return s(!0)}})},qe=function(){var e=gn((function(e){return e.session.user})),t=gn((function(e){return ce(e)}));return Object(a.jsx)(We,{calls:t,user:e})},Fe=n(308),Ue=n(531),Ye=Object(b.d)({name:"modals",initialState:{data:{activeType:"INACTIVE_MODAL",entity:null}},reducers:{openModal:function(e,t){e.data=t.payload},closeModal:function(e){e.data={activeType:"INACTIVE_MODAL",entity:null}}}}),Je=Ye.actions,Ge=Je.openModal,Ze=Je.closeModal,Ke=[{title:"Date",dataIndex:"date"},{title:"Time",dataIndex:"time"},{title:"Participants",dataIndex:"participants"},{title:"",dataIndex:"cancel"}],Xe=function(e){var t=e.calls,n=e.user,r=vn(),i=Object(c.useState)(void 0),o=Object(f.a)(i,2),s=o[0],l=o[1],u=Object(Le.a)("calls").t;return Object(c.useEffect)((function(){l(t.map((function(e){return{date:Object(De.a)(new Date(e.scheduledStart),"eeee, LLLL d"),time:"".concat(Object(De.a)(new Date(e.scheduledStart),"h:mm bbb")," - ").concat(Object(De.a)(new Date(e.scheduledStart),"h:mm bbb")),participants:Object(a.jsxs)(ke.b,{children:[Object(a.jsx)(Fe.a,{src:n.profileImagePath,size:"small"}),Object(a.jsx)(Ne.a.Text,{children:M(n)})]}),cancel:Object(a.jsx)(Be.a,{type:"link",onClick:function(){return r(Ge({activeType:"CANCEL_CALL_MODAL",entity:e}))},children:u("cancel")})}})))}),[t,n,r,u]),Object(a.jsx)(He,{children:Object(a.jsxs)(ke.b,{className:"p-8 w-full",direction:"vertical",children:[Object(a.jsx)(Ie.a,{className:"pb-2",children:Object(a.jsxs)(Se.a,{children:[Object(a.jsx)("p",{className:"pb-2",children:Object(a.jsx)(Ne.a.Text,{type:"secondary",children:u("callLimit")})}),Object(a.jsx)("p",{children:Object(a.jsx)(Ne.a.Text,{strong:!0,className:"text-base",children:n.quota})})]})}),Object(a.jsx)(Ie.a,{children:Object(a.jsx)(Ue.a,{className:"w-full",columns:Ke,dataSource:s})})]})})};function Qe(){var e=Object(c.useState)([]),t=Object(f.a)(e,2),n=t[0],a=t[1],r=gn(ce),i=gn(se);return Object(c.useEffect)((function(){a(function(e,t){return e.map((function(e){return H(e,t)}))}(r,i))}),[r,i]),n}var $e=function(){var e=gn((function(e){return e.session.user})),t=Qe();return Object(a.jsx)(Xe,{calls:t,user:e})},et=n(145),tt=function(){var e=Object(Le.a)("settings"),t=e.t,n=e.i18n,c=vn(),r=et.a.Option;return Object(a.jsx)(He,{children:Object(a.jsx)(ke.b,{direction:"vertical",size:"large",className:"w-100 p-6 pt-9",children:Object(a.jsxs)(Ie.a,{gutter:32,children:[Object(a.jsx)(Se.a,{span:12,children:Object(a.jsxs)(Ee.a,{title:t("language.title"),children:[Object(a.jsx)("p",{children:Object(a.jsx)(Ne.a.Text,{children:t("language.messageOne")})}),Object(a.jsx)("p",{children:Object(a.jsx)(Ne.a.Text,{type:"secondary",children:t("language.messageTwo")})}),Object(a.jsxs)("div",{className:"pt-4",children:[Object(a.jsx)(Ne.a.Text,{children:"".concat(t("language.title"),":")}),Object(a.jsx)(et.a,{className:"pl-4",defaultValue:n.language,onChange:function(e){return n.changeLanguage(e)},children:Object.keys(rn).map((function(e,t){return Object(a.jsx)(r,{value:e,children:rn[e]},"".concat(e,"-").concat(t))}))})]})]})}),Object(a.jsx)(Se.a,{span:12,children:Object(a.jsxs)(Ee.a,{title:t("resources.title"),children:[Object(a.jsx)(Ie.a,{className:"pb-2",children:Object(a.jsx)(Ne.a.Link,{onClick:function(){return c(Ge({activeType:"RESOURCE_MODAL",entity:{title:"Hello",body:"World"}}))},children:t("resources.contactVerification")})}),Object(a.jsx)(Ie.a,{className:"pb-2",children:Object(a.jsx)(Ne.a.Link,{onClick:function(){return c(Ge({activeType:"RESOURCE_MODAL",entity:{title:"Hello",body:"World"}}))},children:t("resources.callInfo")})}),Object(a.jsx)(Ie.a,{className:"pb-2",children:Object(a.jsx)(Ne.a.Link,{onClick:function(){return c(Ge({activeType:"RESOURCE_MODAL",entity:{title:"Hello",body:"World"}}))},children:t("resources.privacyInfo")})})]})})]})})})},nt=function(){return Object(a.jsx)(tt,{})},at=n(61),ct=n(53),rt=n(529),it=n(558),ot=function(e){var t,n=e.call,c=e.selectCall,r=e.navigate,i=e.openPrivacyNotice,o=Object(Le.a)("dashboard").t,s=Object(Ae.a)(new Date(n.scheduledEnd),new Date(n.scheduledStart)),l=new Date(n.scheduledStart)<new Date;return Object(a.jsx)(Ee.a,{children:Object(a.jsxs)(Ie.a,{justify:"space-between",align:"bottom",children:[Object(a.jsxs)(ke.b,{direction:"vertical",children:[Object(a.jsx)(Ne.a.Title,{level:5,children:(t=new Date(n.scheduledStart),Object(rt.a)(t)?"Today":Object(it.a)(t)?"Tomorrow":Object(De.a)(t,"EEEE, MMMM d"))}),Object(a.jsxs)(Ne.a.Text,{children:[Object(De.a)(new Date(n.scheduledStart),"h:mm aaa")," \u2022"," ","".concat(s," minutes")]}),Object(a.jsxs)(ke.b,{style:{paddingTop:18},children:[Object(a.jsx)(Fe.a,{src:n.userParticipants[0].profileImagePath}),Object(a.jsx)(Ne.a.Text,{type:"secondary",children:M(n.userParticipants[0])})]})]}),Object(a.jsx)(ke.b,{children:l?Object(a.jsx)(Be.a,{size:"large",type:"primary",className:"rounded-sm",disabled:!n.videoHandler,onClick:function(){r("call/".concat(n.id)),i({title:o("privacyNotice.title"),body:o("privacyNotice.body"),okBtnText:o("privacyNotice.okText")})},children:o("call.join")}):Object(a.jsx)(Be.a,{size:"large",className:"rounded-sm",onClick:function(){return c(n)},children:o("call.seeDetails")})})]})},n.id)},st=function(e){var t=e.calls,n=e.selectCall,c=e.openInfoModal,r=Object(Le.a)("dashboard").t,i=vn();return Object(a.jsxs)(Ee.a,{title:r("call.title"),extra:Object(a.jsx)(Ne.a.Link,{onClick:function(){return i(Object(ct.d)("/"))},children:r("call.seeAll")}),className:"rounded-md",children:[Object(a.jsx)("div",{className:"pb-5",children:Object(a.jsx)(Ne.a.Text,{children:t.length?"".concat(t.length," ").concat(r("call.upcomingCalls")).concat(t.length>1?"s":""):r("call.noCalls")})}),t.map((function(e){return Object(a.jsx)(ot,{call:e,selectCall:n,navigate:function(e){return i(Object(ct.d)(e))},openPrivacyNotice:c},"callItem-".concat(e.id))}))]})},lt=function(e){var t=e.contact,n=Object(Le.a)("dashboard").t;return Object(a.jsx)(Se.a,{className:"d-flex flex-column align-items-center",children:Object(a.jsxs)(ke.b,{direction:"vertical",children:[Object(a.jsx)(Fe.a,{shape:"square",size:80,src:t.profileImagePath}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:Object(a.jsx)(Ne.a.Text,{children:M(t)})}),"active"===t.status&&Object(a.jsx)("div",{children:Object(a.jsx)(Ne.a.Text,{type:"secondary",children:n("connection.lastCall",{daysPastNum:1})})})]})]})},t.id)},ut=function(e){e.calls;var t=e.contacts,n=Object(Le.a)("dashboard").t,r=Object(c.useState)(null),i=Object(f.a)(r,2),o=i[0],s=i[1],l=Object(c.useState)("active"),u=Object(f.a)(l,2),d=u[0],j=u[1],b=[{key:"active",tab:n("connection.active")},{key:"pending",tab:n("connection.pending")}];Object(c.useEffect)((function(){s(t.filter((function(e){return e.status===d})))}),[d,t]);var h=null===o||void 0===o?void 0:o.map((function(e){return Object(a.jsx)(lt,{contact:e},e.id)}));return Object(a.jsx)(Ee.a,{title:n("connection.title"),tabList:b,activeTabKey:d,onTabChange:function(e){return j(e)},children:Object(a.jsx)(Ie.a,{justify:"space-around",children:h})})},dt={headerTime:{color:"white",marginBottom:0},headerDate:{color:"white",marginTop:0},quote:{color:"white"}},jt=function(){var e=Object(c.useState)(S(cn)),t=Object(f.a)(e,1)[0],n=Object(c.useState)(new Date),r=Object(f.a)(n,2),i=r[0],o=r[1];return Object(c.useEffect)((function(){var e=setInterval((function(){o(new Date)}),1e3);return function(){return clearInterval(e)}})),Object(a.jsxs)(ke.b,{direction:"vertical",align:"center",style:{backgroundImage:"url(".concat(t.background,")")},className:"w-full h-52 rounded-md bg-cover bg-center text-center flex-1 justify-end",children:[Object(a.jsxs)(Se.a,{className:"pb-4",children:[Object(a.jsx)(Ne.a.Title,{level:1,style:dt.headerTime,children:Object(De.a)(i,"HH:mm")}),Object(a.jsx)(Ne.a.Title,{level:5,style:dt.headerDate,children:Object(De.a)(i,"eeee, MMMM d")})]}),Object(a.jsx)(Se.a,{children:Object(a.jsx)(Ne.a.Title,{level:5,style:dt.quote,children:"".concat(t.quote," - ").concat(t.author)})})]})},bt=n(545),ft=n(546),ht=n(540),pt=n(530),Ot=function(e){var t=e.selectedCall,n=e.onClose,c=vn(),r=Object(Le.a)("dashboard").t,i=t&&Object(Ae.a)(new Date(t.scheduledEnd),new Date(t.scheduledStart));return t?Object(a.jsx)(ht.a,{title:"Call Details",placement:"right",closable:!1,onClose:n,visible:!!t,getContainer:!1,style:{position:"absolute"},children:Object(a.jsxs)(ke.b,{direction:"vertical",size:"large",children:[Object(a.jsx)(Ie.a,{children:Object(a.jsxs)(ke.b,{children:[Object(a.jsx)(Se.a,{children:Object(a.jsx)(bt.a,{className:"text-2xl"})}),Object(a.jsxs)(Se.a,{className:"text-sm",children:[Object(a.jsx)("div",{children:Object(a.jsx)(Ne.a.Text,{children:Object(De.a)(new Date(t.scheduledStart),"EEEE, MMMM d")})}),Object(a.jsx)("div",{children:Object(a.jsxs)(Ne.a.Text,{type:"secondary",children:[Object(De.a)(new Date(t.scheduledStart),"h:mm aaa OOO")," ","\u2022 ","".concat(i,"mins")]})})]})]})}),Object(a.jsx)(Ie.a,{children:Object(a.jsxs)(ke.b,{children:[Object(a.jsx)(Se.a,{children:Object(a.jsx)(ft.a,{className:"text-2xl"})}),Object(a.jsx)(Se.a,{children:Object(a.jsx)(Fe.a,{src:t.userParticipants[0].profileImagePath})}),Object(a.jsx)(Se.a,{style:{fontSize:14},children:Object(a.jsx)(Ne.a.Text,{type:"secondary",children:M(t.userParticipants[0])})})]})}),Object(a.jsx)(Ie.a,{children:Object(a.jsx)(Ne.a.Text,{type:"secondary",children:r("call.cancelDescription")})}),Object(a.jsx)(Ie.a,{children:Object(a.jsx)(Be.a,{className:"rounded-sm",onClick:function(){return c(Ge({activeType:"CANCEL_CALL_MODAL",entity:t}))},children:r("call.cancel")})}),Object(a.jsx)(pt.a,{}),Object(a.jsx)(Ie.a,{children:Object(a.jsx)(Ne.a.Link,{children:r("call.whatToExpect")})}),Object(a.jsx)(Ie.a,{children:Object(a.jsx)(Ne.a.Link,{children:r("call.privacyNotice")})})]})}):null},mt=function(e){var t=e.calls,n=e.contacts,r=e.openInfoModal,i=Object(c.useState)(null),o=Object(f.a)(i,2),s=o[0],l=o[1];return Object(a.jsxs)(He,{children:[Object(a.jsxs)(ke.b,{direction:"vertical",size:"large",className:"w-100 p-6 pt-9",children:[Object(a.jsx)(Ie.a,{children:Object(a.jsx)(Se.a,{span:24,children:Object(a.jsx)(jt,{})})}),Object(a.jsxs)(Ie.a,{gutter:16,children:[Object(a.jsx)(Se.a,{span:16,children:Object(a.jsx)(st,{calls:t,selectCall:function(e){return l(e)},openInfoModal:r})}),Object(a.jsx)(Se.a,{span:8,children:Object(a.jsx)(ut,{calls:t,contacts:n})})]})]}),Object(a.jsx)(Ot,{selectedCall:s,onClose:function(){return l(null)}})]})},xt={fetchCalls:U,push:ct.d},vt=Object(at.c)(null,xt)((function(e){var t=e.fetchCalls,n=vn(),r=gn(oe),i=Qe();return Object(c.useEffect)((function(){Object(O.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()}),[t]),Object(a.jsx)(mt,{calls:i,contacts:r,openInfoModal:function(e){return n(Ge({activeType:"RESOURCE_MODAL",entity:e}))}})})),gt=Object(b.d)({name:"common",initialState:{fullScreen:!1},reducers:{enterFullScreen:function(e){e.fullScreen=!0},exitFullScreen:function(e){e.fullScreen=!1}}}),yt=gt.actions,wt=yt.enterFullScreen,Ct=yt.exitFullScreen,kt=n(548),Tt=n(218),Nt=n(537),It=function(e){var t=e.message,n=t.from.type;return Object(a.jsxs)(ke.b,{direction:"vertical",align:"inmate"===n?"end":"start",style:{width:"100%"},children:[Object(a.jsxs)(ke.b,{children:[Object(a.jsx)(Ne.a.Text,{strong:!0,children:function(){switch(n){case"inmate":return"You";case"doc":return"DOC";case"user":return"Loved One"}}()}),Object(a.jsx)(Ne.a.Text,{type:"secondary",children:Object(De.a)(new Date(t.timestamp),"HH:mm")})]}),Object(a.jsx)(Ne.a.Text,{children:t.content})]})},St=function(e){var t=e.roomClient,n=e.inmateId,r=e.call,i=Re.a.Sider,o=Object(Le.a)("call").t,s=Object(c.useState)(!1),l=Object(f.a)(s,2),u=l[0],d=l[1],j=Object(c.useState)(""),b=Object(f.a)(j,2),h=b[0],m=b[1],x=Object(c.useState)([]),v=Object(f.a)(x,2),g=v[0],y=v[1],w=Object(c.useState)(!1),C=Object(f.a)(w,2),k=C[0],T=C[1];Object(c.useEffect)((function(){t&&t.socket.on("textMessage",function(){var e=Object(O.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.from,a=t.contents,T(!0),"doc"===n.type&&P(o("doc.warning"),a,"warning"),y((function(e){return[].concat(Object(Tt.a)(e),[{content:a,from:n,timestamp:(new Date).toLocaleDateString()}])}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[t,o]),Object(c.useEffect)((function(){u||T(!1)}),[k,u]);var N=function(){var e=Object(O.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:m(""),y([].concat(Object(Tt.a)(g),[{content:h,from:{type:"inmate",id:n},timestamp:(new Date).toLocaleDateString()}])),t.request("textMessage",{callId:r.id,contents:h}).then((function(){return console.log("ssucces")}),(function(e){return console.log(e)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)(i,{theme:"light",style:{height:"100vh",maxHeight:"100vh"},width:300,collapsible:!0,collapsed:u,onCollapse:function(){return d(!0)},children:[!u&&Object(a.jsx)(Te.a,{title:o("chat.title")}),!u&&Object(a.jsxs)("div",{className:"flex flex-col h-full",style:an,children:[Object(a.jsxs)(ke.b,{direction:"vertical",style:{overflowY:"scroll"},children:[Object(a.jsx)(Ne.a.Text,{mark:!0,children:o("chat.monitorWarning")}),g.map((function(e){return Object(a.jsx)(It,{message:e})}))]}),Object(a.jsxs)("div",{className:"mt-auto mb-8 flex-shrink-0",children:[Object(a.jsx)(pt.a,{}),Object(a.jsx)(Nt.a.TextArea,{value:h,rows:2,onChange:function(e){return m(e.target.value)},onPressEnter:function(e){return N()},onSubmit:function(e){return N()},placeholder:o("chat.placeholder"),autoFocus:!0,bordered:!1})]})]})]})},Et=n(547),Mt=n(549),Pt=n(550),At=n(551),Dt=n(541),Lt=n(302),Rt=function(e){var t=e.icon,n=e.label,c=e.onClick,r=e.type,i=e.danger,o=e.block,s=e.size,l=e.shape,u=e.style;return Object(a.jsxs)(ke.b,{direction:"vertical",align:"center",children:[Object(a.jsx)(Be.a,{icon:t,onClick:c,type:r,block:o,danger:i,size:s||"large",shape:l||"round",style:u}),Object(a.jsx)(Ne.a.Text,{type:"secondary",children:n})]})},Ht={iconButton:{fontSize:24},active:{backgroundColor:"#f5f5f5"},inactive:{backgroundColor:"#fff"}},zt=function(e){var t=e.loading,n=e.audioOn,c=e.toggleAudio,r=e.videoOn,i=e.toggleVideo,o=e.chatCollapsed,s=e.toggleChat,l=e.terminateCall,u=e.timerOn,d=e.toggleTimer,j=e.hasUnreadMessages,b=Object(Le.a)("call").t;return t?Object(a.jsx)(Ie.a,{className:"absolute bottom-0 bg-white w-full p-4 flex",align:"middle",children:Object(a.jsx)(Se.a,{className:"m-auto",children:Object(a.jsx)(Lt.a,{})})}):Object(a.jsxs)(Ie.a,{className:"absolute bottom-0 bg-white w-full p-4",align:"middle",children:[Object(a.jsx)(Se.a,{span:8,offset:8,children:Object(a.jsxs)(ke.b,{size:"large",children:[Object(a.jsx)(Rt,{icon:n?Object(a.jsx)(Et.a,{style:Ht.iconButton}):Object(a.jsx)(kt.a,{style:Ht.iconButton}),danger:!n,type:n?"default":"primary",onClick:c,label:"".concat(b("videoOverlay.mic")," ").concat(b(n?"videoOverlay.on":"videoOverlay.off"))}),Object(a.jsx)(Rt,{shape:"round",danger:!r,icon:Object(a.jsx)(Mt.a,{style:Ht.iconButton}),size:"large",type:r?"default":"primary",onClick:i,label:"".concat(b("videoOverlay.video")," ").concat(b(r?"videoOverlay.on":"videoOverlay.off"))}),Object(a.jsx)(Rt,{shape:"round",style:o?Ht.inactive:Ht.active,icon:o?Object(a.jsx)(Dt.a,{dot:j,children:Object(a.jsx)(Pt.a,{style:Ht.iconButton})}):Object(a.jsx)(Pt.a,{style:Ht.iconButton}),size:"large",onClick:s,label:b("videoOverlay.chat")}),Object(a.jsx)(Rt,{shape:"round",style:u?Ht.active:Ht.inactive,icon:Object(a.jsx)(At.a,{style:Ht.iconButton}),size:"large",onClick:d,label:"".concat(b(u?"videoOverlay.showTime":"videoOverlay.hideTime"))})]})}),Object(a.jsx)(Se.a,{span:2,offset:6,children:Object(a.jsx)(Be.a,{danger:!0,size:"large",onClick:function(){return l()},className:"align-self-end",children:b("videoOverlay.leaveCall")})})]})},Bt={background:{backgroundColor:"black",position:"absolute",top:16,left:16,width:"300px",height:"200px",zIndex:9999,display:"flex"},avatar:{color:"#f56a00",backgroundColor:"#fde3cf",margin:"auto"}},Vt=function(e){var t=e.initials;return Object(a.jsx)("div",{style:Bt.background,children:Object(a.jsx)(Fe.a,{size:64,style:Bt.avatar,children:t})})},_t=function(e,t){switch(e){case"en":return t.en;case"es":return t.es;default:return t.en}},Wt=function(e){var t=e.title,n=e.call,r=e.navigateBack,i=e.openInfoModal,o=e.openTestConnectionModal,s=Object(Le.a)("call"),l=s.t,u=s.i18n,d=Object(c.useState)(S(on)),j=Object(f.a)(d,1)[0];return Object(a.jsx)(Ee.a,{className:"bg-black\tbg-opacity-80 text-white w-6/12\t h-6/12 m-auto",children:Object(a.jsxs)(ke.b,{direction:"vertical",className:"text-white",size:"large",children:[Object(a.jsxs)(ke.b,{children:[Object(a.jsx)(Ne.a.Text,{strong:!0,className:"text-white text-xl\t",children:t}),Object(a.jsx)(Lt.a,{})]}),Object(a.jsxs)(Ne.a.Text,{className:"text-white",children:[Object(De.a)(new Date(n.scheduledStart),"HH:mm")," \u2022"," ",Object(Ae.a)(new Date(n.scheduledEnd),new Date(n.scheduledStart)),"mins"]}),Object(a.jsxs)(Ne.a.Text,{className:"text-white",children:[l("waitingRoom.questionOfDay"),":"," ",_t(u.language,j)]}),Object(a.jsx)(Ne.a.Link,{onClick:function(){return i({title:l("waitingRoom.whenWillCallConnect"),body:"Soon."})},children:l("waitingRoom.whenWillCallConnect")}),Object(a.jsxs)(ke.b,{children:[Object(a.jsx)(Be.a,{type:"primary",onClick:o,children:l("waitingRoom.checkConnection")}),Object(a.jsx)(Be.a,{onClick:r,children:l("waitingRoom.leaveWaitingRoom")})]})]})})},qt=n(305),Ft=function(e){var t=e.formatted,n=e.minutes,c=e.seconds,r=e.completed,i=function(e,t){return L.some((function(n){return n===e&&0===t}))||L.some((function(n){return n===e+1&&t>=56}))?R:0===e||1===e&&0===t?"bg-blue-500 text-white":"bg-gray-900 text-white"}(n,c);return r?Object(a.jsx)("div",{}):Object(a.jsxs)(Ne.a.Text,{className:"".concat(i," px-4 py-2 rounded-md"),children:[t.minutes,":",t.seconds]})},Ut=function(e){var t=e.endTime,n=e.style,c=e.className;return Object(a.jsxs)("div",{style:n,className:c,children:[Object(a.jsx)(qt.a,{date:t,renderer:Ft,zeroPadTime:2})," "]})},Yt=n(194);function Jt(e){var t=e.srcObject,n=Object(Yt.a)(e,["srcObject"]),r=Object(c.useRef)(null);return Object(c.useEffect)((function(){r.current&&(r.current.srcObject=t)}),[t]),Object(a.jsx)("video",Object(s.a)({ref:r},n))}function Gt(e){var t=e.srcObject,n=Object(Yt.a)(e,["srcObject"]),r=Object(c.useRef)(null);return Object(c.useEffect)((function(){r.current&&(r.current.srcObject=t)}),[t]),Object(a.jsx)("audio",Object(s.a)({ref:r},n))}var Zt=r.a.memo((function(e){var t=e.call,n=e.user,r=e.roomClient,i=e.localVideo,o=e.localAudio,s=e.remoteAudios,l=e.remoteVideos,u=e.push,d=e.openInfoModal,j=e.openTestConnectionModal,b=Object(Le.a)("call").t,h=Object(c.useState)(!0),m=Object(f.a)(h,2),x=m[0],v=m[1],g=Object(c.useState)(!1),y=Object(f.a)(g,2),w=y[0],C=y[1],k=Object(c.useState)(!0),T=Object(f.a)(k,2),N=T[0],I=T[1],S=Object(c.useState)(!1),D=Object(f.a)(S,2),L=D[0],R=D[1],H=Object(c.useState)(!0),z=Object(f.a)(H,2),B=z[0],V=z[1],_=Object(c.useState)(!0),W=Object(f.a)(_,2),q=W[0],F=W[1],U=Object(c.useState)(!1),Y=Object(f.a)(U,2),J=Y[0],G=Y[1];if(Object(c.useEffect)((function(){Object.keys(l).length>0||Object.keys(s).length>0?C(!0):C(!1)}),[l,s]),Object(c.useEffect)((function(){r&&r.socket.on("producerUpdate",function(){var e=Object(O.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.from,a=t.contents,"user"===n.type){e.next=3;break}return e.abrupt("return");case 3:"audio"===a.type?V(a.active):F(a.active);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[r,b]),Object(c.useEffect)((function(){N||R(!1)}),[L,N]),Object(c.useEffect)((function(){t&&w&&A("peerVideo","".concat(t.userParticipants[0].firstName," ").concat(b(q?"peer.videoOn":"peer.videoOff")),"info")}),[q,t,w,b]),Object(c.useEffect)((function(){t&&w&&A("peerAudio","".concat(t.userParticipants[0].firstName," ").concat(b(B?"peer.unmuted":"peer.muted")),"info")}),[B,t,w,b]),Object(c.useEffect)((function(){w&&t&&P("".concat(t.userParticipants[0].firstName," ").concat(b("peer.joinedCallTitle"),"."),b("peer.joinedCallBody"),"info")}),[w,t,b]),!t)return Object(a.jsx)("div",{});var Z,K=function(){v(!0),clearTimeout(Z),Z=setTimeout((function(){return v(!1)}),5e3)},X=Object.keys(l).map((function(e){return parseInt(e)}));return Object(a.jsxs)(Re.a,{children:[Object(a.jsxs)("div",{className:"ant-layout-content w-screen h-screen flex bg-gray-800",onMouseMove:function(){return K()},onMouseOver:function(){return K()},children:[X.map((function(e){return Object(a.jsxs)("div",{className:"w-full h-full",children:[Object(a.jsx)(Jt,{srcObject:l[e],className:"w-full h-full",autoPlay:!0}),Object(a.jsx)(Gt,{srcObject:s[e],autoPlay:!0})]})})),J&&Object(a.jsx)(Ut,{endTime:t.scheduledEnd,className:"absolute right-4 top-4 bg-opacity-80"}),!q&&Object(a.jsx)(Fe.a,{size:128,className:"bg-blue-500\tm-auto text-white\t",children:E(M(t.userParticipants[0])).toUpperCase()}),!B&&Object(a.jsxs)("div",{className:"absolute bottom-20 left-4 bg-black bg-opacity-50 py-1 px-2",children:[Object(a.jsx)(kt.a,{className:"text-red-600 text-xs"}),Object(a.jsxs)(Ne.a.Text,{className:"text-white text-base",children:[" ",M(t.userParticipants[0])]})]}),i&&i.stream&&!i.paused?Object(a.jsx)(Jt,{srcObject:i.stream,className:"w-2/12 absolute top-4 left-4 flex",autoPlay:!0}):Object(a.jsx)(Vt,{initials:E(M(n))}),!w&&Object(a.jsx)(Wt,{call:t,title:r?w?b("waitingRoom.loading"):"".concat(b("waitingRoom.waitingForPrefix")," ").concat(t.userParticipants[0].firstName," ").concat(b("waitingRoom.waitingForSuffix"),"..."):b("waitingRoom.initialization"),navigateBack:function(){return u("/")},openInfoModal:d,openTestConnectionModal:j}),x&&Object(a.jsx)(zt,{loading:!(o&&i),audioOn:!(null===o||void 0===o?void 0:o.paused),toggleAudio:function(){r&&o&&(A("microphone","You ".concat(o.paused?"unmuted":"muted"," your microphone"),"info"),o.paused?r.resumeAudio():r.pauseAudio())},videoOn:!(null===i||void 0===i?void 0:i.paused),toggleVideo:function(){r&&i&&(A("webcam","You ".concat(i.paused?"turned on":"turned off"," your webcam"),"info"),i.paused?r.resumeVideo():r.pauseVideo())},chatCollapsed:N,toggleChat:function(){N&&R(!1),I((function(e){return!e}))},timerOn:J,toggleTimer:function(){return G((function(e){return!e}))},terminateCall:function(){return u("/feedback/".concat(null===t||void 0===t?void 0:t.id))},hasUnreadMessages:L})]}),!N&&Object(a.jsx)(St,{roomClient:r,inmateId:n.id,call:t})]})})),Kt=function(e){var t=e.match,n=vn(),r=Object(c.useCallback)(n,[]),i=function(e){var t=gn((function(t){return re(t,e)})),n=gn(se),a=Object(c.useState)(),r=Object(f.a)(a,2),i=r[0],o=r[1];return Object(c.useEffect)((function(){t&&o(H(t,n))}),[t,n]),i}(parseInt(t.params.id)),o=gn((function(e){return e.session})),s=o.authInfo,l=o.user,u=Object(c.useState)(),d=Object(f.a)(u,2),j=d[0],b=d[1],h=Object(c.useState)(),p=Object(f.a)(h,2),O=p[0],m=p[1],x=Object(c.useState)(),v=Object(f.a)(x,2),g=v[0],y=v[1],w=Object(c.useState)({}),C=Object(f.a)(w,2),k=C[0],T=C[1],N=Object(c.useState)({}),I=Object(f.a)(N,2),S=I[0],E=I[1],M=Object(c.useState)(!1),P=Object(f.a)(M,2),A=P[0],D=P[1];return Object(c.useEffect)((function(){return r(wt()),function(){r(Ct())}}),[r]),Object(c.useEffect)((function(){i&&!A&&i.videoHandler&&r(Y({callId:i.id,setRc:b,authInfo:s,videoHandler:i.videoHandler}))}),[i,r,A,s]),Object(c.useEffect)((function(){j&&!A&&(r(G({rc:j,setRemoteAudios:T,setRemoteVideos:E})),r(J({rc:j,setLocalAudio:m,setLocalVideo:y,setRc:b})),D(!0))}),[A,r,j]),i&&j&&A?Object(a.jsx)(Zt,{call:i,user:l,push:function(e){return n(Object(ct.d)(e))},openInfoModal:function(e){return n(Ge({activeType:"RESOURCE_MODAL",entity:e}))},openTestConnectionModal:function(){return n(Ge({activeType:"TEST_CONNECTION_MODAL",entity:null}))},roomClient:j,localAudio:O,localVideo:g,remoteAudios:k,remoteVideos:S}):Object(a.jsx)("div",{})},Xt=n(539),Qt=n(552),$t=["terrible","bad","normal","good","wonderful"];var en=-1,tn=135,nn=[{path:"/calls",component:$e,label:"Calls"},{path:"/settings",component:nt,label:"Settings"},{path:"/profile/:id",component:qe,label:"Profile"},{path:"/call/:id",component:Kt,label:"Call"},{path:"/feedback/:id",component:function(){var e=vn();return Object(c.useEffect)((function(){return e(wt()),function(){e(Ct())}}),[e]),Object(a.jsx)(Re.a.Content,{style:{backgroundColor:"white",height:"100vh",width:"100vw",display:"flex"},children:Object(a.jsxs)(ke.b,{direction:"vertical",align:"center",style:{margin:"auto"},size:"large",children:[Object(a.jsx)(Ne.a.Title,{level:2,children:"You left the meeting."}),Object(a.jsxs)(ke.b,{children:[Object(a.jsx)(Be.a,{size:"large",children:"Rejoin"}),Object(a.jsx)(Be.a,{type:"primary",size:"large",children:"Return home"})]}),Object(a.jsx)(Ee.a,{title:"How was the audio and video?",children:Object(a.jsx)(Xt.a,{character:Object(a.jsx)(Qt.a,{style:{fontSize:36}}),tooltips:$t})})]})})},label:"Feedback"},{path:"/",component:vt,label:"Dash"}],an={padding:24,paddingTop:0},cn=[{author:"Mary Ann Evans",quote:"It is never too late to be what you might have been.",description:"",background:"https://images.unsplash.com/photo-1536257104079-aa99c6460a5a?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80"},{author:"Walt Disney",quote:"All our dreams can come true, if we have the courage to pursue them.",description:"",background:"https://images.unsplash.com/photo-1508556497405-ed7dcd94acfc?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80"},{author:"Mark Twain",quote:"The secret of getting ahead is getting started",description:"",background:"https://images.unsplash.com/photo-1532971077387-7c6568101df5?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80"},{author:"Babe Ruth",quote:"It\u2019s hard to beat a person who never gives up.",description:"",background:"https://images.unsplash.com/photo-1564521456797-9f176245daa9?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1951&q=80"}],rn={en:"English",es:"Espa\xf1ol"},on=[{en:"If you had your own intro theme song, which song would it be and why?",es:"If you had your own intro theme song, which song would it be and why?"}],sn="user/SET_SESSION",ln="user/LOGOUT",un=function(e){return{type:sn,payload:e}},dn={authInfo:{id:en,type:"inmate",token:""},user:{id:en,firstName:"",lastName:"",location:"",dateOfBirth:"",inmateIdentification:"",quota:0,race:""},isLoggedIn:!1,language:"en"};function jn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case sn:return t.payload;case ln:return Object(s.a)(Object(s.a)({},e),{},{authInfo:{id:en,type:"inmate",token:""},user:{id:en,firstName:"",lastName:"",location:"",dateOfBirth:"",inmateIdentification:"",quota:0,race:""},isLoggedIn:!1});default:return e}}var bn,fn=Object(b.b)("connections/fetchAll",Object(O.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v("connections");case 2:return t=e.sent,n=t.data.connections.map((function(e){return Q()(e)})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))),hn=Object(b.c)(),pn=Object(b.d)({name:"connection",initialState:hn.getInitialState(),reducers:{},extraReducers:function(e){e.addCase(fn.fulfilled,(function(e,t){hn.setAll(e,t.payload)}))}}),On=(pn.actions,Object(j.a)()),mn=(bn=On,Object(d.c)({common:gt.reducer,session:jn,calls:K.reducer,contacts:te.reducer,modals:Ye.reducer,connections:pn.reducer,router:Object(l.b)(bn)})),xn=Object(b.a)({reducer:mn,middleware:function(e){return e().concat(Object(u.a)(On))}}),vn=function(){return Object(at.d)()},gn=at.e,yn=n(63),wn=function(e){var t="";if(e.isAuthenticated||(t=e.authenticationPath),t){return Object(a.jsx)(yn.b,Object(s.a)(Object(s.a)({},e),{},{component:function(){return Object(a.jsx)(yn.a,{to:{pathname:t}})},render:void 0}))}return Object(a.jsx)(yn.b,Object(s.a)({},e))},Cn=n(534),kn=n(181);function Tn(e,t,n){return Nn.apply(this,arguments)}function Nn(){return(Nn=Object(O.a)(p.a.mark((function e(t,n,a){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c={id:n.id,firstName:n.firstName,lastName:n.lastName,dateOfBirth:n.dateOfBirth,profileImagePath:n.profileImagePath,inmateIdentification:n.inmateIdentification,quota:n.quota,location:n.location,race:n.race},xn.dispatch(un({user:c,authInfo:{id:n.id,type:"inmate",token:t},isLoggedIn:!0,language:a}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function In(e){return Sn.apply(this,arguments)}function Sn(){return(Sn=Object(O.a)(p.a.mark((function e(t){var n,a,c,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("".concat(m,"auth/member/login/"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",body:JSON.stringify({facilityId:t.facilityId,inmateIdentification:t.inmateNumber,pin:t.pin})});case 2:return n=e.sent,e.next=5,n.json();case 5:if(a=e.sent,c=n.headers.get("cookie")||"",r=/(?<=connect.sid=)([^\s;]+)/gm,(i=c.match(r))&&1===i.length){e.next=11;break}throw new Error("Cannot find header token");case 11:return e.next=13,Tn(i[0],a.data,t.language);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var En=n(553),Mn=n(554);function Pn(){return(Pn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function An(e,t){if(null==e)return{};var n,a,c=function(e,t){if(null==e)return{};var n,a,c={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var Dn=c.createElement("defs",null,c.createElement("style",null,".cls-1,.cls-2{fill:#0073eb;stroke:#fff;stroke-miterlimit:10;stroke-width:3px;}.cls-2{opacity:0.7;}.cls-3{fill:#1a1a1a;}")),Ln=c.createElement("path",{className:"cls-1",d:"M111.83,48.88h0l-8.38,20.22L98.27,81.58l0,0v.08L91.48,98h0L90,101.55h0l-2.9,7-.6-2.23-.64-2.43-4-15.27L71,47.66l-1.6-6.1L63.79,20.1Z"}),Rn=c.createElement("polygon",{className:"cls-2",points:"87.09 108.56 85.99 107.12 84.4 105.05 77.65 96.2 71.96 88.74 50.31 60.32 41.21 48.39 71.04 47.66 81.83 88.63 85.85 103.9 86.49 106.33 87.09 108.56"}),Hn=c.createElement("polygon",{className:"cls-1",points:"67.95 154.72 59.71 174.61 29.58 171.5 58.55 149.76 64.48 145.32 75.17 137.31 67.96 154.69 67.95 154.72"}),zn=c.createElement("path",{className:"cls-1",d:"M134.41,137.69h0L81.75,151.16l-2.83.73-11,2.8,7.21-17.38h0l2.27-5.48h0l9.54-23,.1-.23h0l2.9-7h0L91.47,98h0l6.75-16.29h0l0-.09,5.17-12.47,8.38-20.22h0l4,15.53,4.51,17.78,4.95,19.43,3,11.89h0Z"}),Bn=c.createElement("polygon",{className:"cls-1",points:"161.52 72.3 156.34 84.79 151.4 96.73 147.81 105.36 146.74 107.93 146.74 107.94 134.41 137.69 128.27 113.52 128.26 113.52 125.24 101.63 120.29 82.2 120.3 82.19 121.87 81.82 141.5 77.1 160.2 72.62 161.52 72.3"}),Vn=c.createElement("polygon",{className:"cls-2",points:"187.8 89.91 179.44 91.47 170.42 93.17 170.41 93.16 151.4 96.73 156.34 84.79 161.52 72.3 162.14 72.71 187.8 89.91"}),_n=c.createElement("path",{className:"cls-3",d:"M234.77,211.91h-17.2L209.18,190H163l-8.4,21.88H137.37l38.93-98.23h19.54Zm-66-36.73H203.4l-17.33-45.27Z"}),Wn=c.createElement("path",{className:"cls-3",d:"M259.67,211.91H245V161.28h-5.64V148.07h11.83l6.19,6.2c5.5-4.54,12.24-7.43,18.57-7.43a20.61,20.61,0,0,1,17.34,8.66,31.53,31.53,0,0,1,21-8.66c11.7,0,22.43,8,22.43,26.55v38.52H322V173.39c0-8.39-4.54-12.93-11.28-12.93-7.57,0-12.52,4.54-12.52,10.59v40.86H283.61V173.39c0-8.39-4.68-12.93-11.29-12.93-7.42,0-12.65,4.4-12.65,10.18Z"}),qn=c.createElement("path",{className:"cls-3",d:"M393.53,190.72l12.1,6.61c-4.95,8.39-14.17,16.09-26.82,16.09-18.3,0-31.37-15.41-31.37-33.29s13.07-33.57,31.23-33.57,29.44,15.27,30,31.92l-5.5,5.36H362.3c.82,9.5,8.11,15.82,16.51,15.82C384.58,199.66,390.36,196,393.53,190.72ZM363,172.15h30.95c-1-7.15-7.43-12.52-15.27-12.52A15.72,15.72,0,0,0,363,172.15Z"}),Fn=c.createElement("path",{className:"cls-3",d:"M461.76,190.72l12.11,6.61c-4.95,8.39-14.17,16.09-26.83,16.09-18.3,0-31.37-15.41-31.37-33.29s13.07-33.57,31.23-33.57,29.44,15.27,30,31.92l-5.5,5.36H430.53c.83,9.5,8.12,15.82,16.51,15.82C452.82,199.66,458.6,196,461.76,190.72Zm-30.54-18.57h30.95c-1-7.15-7.42-12.52-15.27-12.52A15.72,15.72,0,0,0,431.22,172.15Z"}),Un=c.createElement("path",{className:"cls-3",d:"M489.41,113.68l4.82-5h10.18V197.6h5.64v14.31H495.6l-6.19-6.33Z"}),Yn=c.createElement("path",{className:"cls-3",d:"M540.73,211.91H526V161.28h-5.5V148.07h15l5.23,5.23ZM532,112a10.49,10.49,0,0,1,10.39,10.39A10.37,10.37,0,0,1,532,132.67a10.25,10.25,0,0,1-10.25-10.26A10.37,10.37,0,0,1,532,112Z"}),Jn=c.createElement("path",{className:"cls-3",d:"M620,180a33.36,33.36,0,1,1-33.29-33.29A33.35,33.35,0,0,1,620,180Zm-15,0c0-10.32-7.71-19.12-18.3-19.12s-18.44,8.8-18.44,19.12,7.85,19.26,18.44,19.26S605,190.31,605,180Z"});function Gn(e,t){var n=e.title,a=e.titleId,r=An(e,["title","titleId"]);return c.createElement("svg",Pn({id:"Golden_Grid","data-name":"Golden Grid",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 666.85 257.93",ref:t,"aria-labelledby":a},r),n?c.createElement("title",{id:a},n):null,Dn,Ln,Rn,Hn,zn,Bn,Vn,_n,Wn,qn,Fn,Un,Yn,Jn)}var Zn=c.forwardRef(Gn),Kn=(n.p,n(511),{borderRadius:8}),Xn=Re.a.Content,Qn=Object(at.c)((function(e){return{session:e.session}}),{}),$n={labelCol:{flex:"95px"},wrapperCol:{flex:1}},ea={wrapperCol:{span:24}};var ta=Qn((function(e){var t=e.session,n=Object(Le.a)("login"),r=n.t,i=n.i18n,o=et.a.Option,l=Object(c.useState)(S(cn)),u=Object(f.a)(l,1)[0],d=Object(c.useState)([]),j=Object(f.a)(d,2),b=j[0],h=j[1];if(Object(c.useEffect)((function(){(function(){var e=Object(O.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:t=e.sent,h(t.data.results);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),t.isLoggedIn)return Object(a.jsx)(yn.a,{to:"/"});var m=function(){var e=Object(O.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,In({inmateNumber:t.inmateNumber,pin:t.pin,facilityId:t.facilityId,language:t.language});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),A("login_error","Invalid ID or Pin Code","error");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),x=b.map((function(e){return Object(a.jsx)(o,{value:e.id,children:e.name},"option-".concat(e.id))}));return Object(a.jsx)(Xn,{className:"d-flex flex-column banner-background",style:{backgroundImage:"url(".concat(u.background,")")},children:Object(a.jsx)("div",{className:"login-form-container m-auto",style:Kn,children:Object(a.jsxs)(ke.b,{direction:"vertical",size:"large",children:[Object(a.jsx)(Ie.a,{children:Object(a.jsx)(Zn,{className:"login-logo"})}),Object(a.jsx)(Ie.a,{justify:"center",children:Object(a.jsx)(Se.a,{children:Object(a.jsxs)(Ne.a.Text,{children:[r("caption")," ",Object(a.jsxs)(Ne.a.Link,{href:"/tos.pdf",target:"_blank",children:[r("tos")," "]}),r("and")," ",Object(a.jsxs)(Ne.a.Link,{href:"/privacy_policy.pdf",target:"_blank",children:[r("pp"),"."]})," "]})})}),Object(a.jsxs)(Cn.a,Object(s.a)(Object(s.a)({},$n),{},{name:"login",className:"w-full rounded-lg",onFinish:m,onFinishFailed:function(e){A("login_error","Invalid ID or Pin Code","error")},initialValues:{language:Object.keys(rn)[0]},children:[Object(a.jsx)(Cn.a.Item,{label:"Language",name:"language",rules:[{required:!0,message:"Language is required."}],children:Object(a.jsx)(kn.a.Group,{className:"w-100",onChange:function(e){return i.changeLanguage(e.target.value)},children:Object.entries(rn).map((function(e){var t=Object(f.a)(e,2),n=t[0],c=t[1];return Object(a.jsx)(kn.a.Button,{value:n,children:c},n)}))})}),Object(a.jsx)(Cn.a.Item,{name:"inmateNumber",label:"ID Number",rules:[{required:!0,message:"Inmate ID is required."}],children:Object(a.jsx)(Nt.a,{prefix:Object(a.jsx)(En.a,{}),placeholder:r("placeholder.inmateNumber")})}),Object(a.jsx)(Cn.a.Item,{label:"PIN Code",name:"pin",rules:[{required:!0,message:"Password is required."}],children:Object(a.jsx)(Nt.a.Password,{prefix:Object(a.jsx)(Mn.a,{}),placeholder:r("placeholder.pinCode")})}),Object(a.jsx)(Cn.a.Item,{name:"facilityId",label:"Facility",rules:[{required:!0,message:"Facility must be selected."}],children:Object(a.jsx)(et.a,{children:x})}),Object(a.jsx)(Cn.a.Item,Object(s.a)(Object(s.a)({},ea),{},{style:{borderRadius:4},children:Object(a.jsx)(Be.a,{type:"primary",htmlType:"submit",size:"large",children:r("buttonText")})}))]}))]})})})})),na=n(89),aa=n(555),ca=n(556),ra=n(190),ia=Re.a.Sider;function oa(e){var t=e.user,n=e.navigate;return Object(a.jsx)(ia,{theme:"light",className:"shadow-lg",children:Object(a.jsxs)(ke.b,{direction:"vertical",className:"w-full",children:[Object(a.jsx)(Ie.a,{className:"p-2 cursor-pointer",onClick:function(){return n("/")},children:Object(a.jsx)(Zn,{className:"login-logo"})}),Object(a.jsx)(Ie.a,{align:"middle",className:"pl-4 cursor-pointer",onClick:function(){return n("/profile/".concat(t.id))},children:Object(a.jsxs)(ke.b,{children:[Object(a.jsx)(Fe.a,{src:t.profileImagePath,size:"large"}),Object(a.jsx)(Ne.a.Text,{children:M(t)})]})}),Object(a.jsxs)(na.a,{mode:"inline",defaultSelectedKeys:["home"],className:"w-full",children:[Object(a.jsx)(na.a.Item,{icon:Object(a.jsx)(aa.a,{}),onClick:function(){return n("/")},children:"Home"},"home"),Object(a.jsx)(na.a.Item,{icon:Object(a.jsx)(ca.a,{}),onClick:function(){return n("/calls")},children:"Calls"},"calls"),Object(a.jsx)(pt.a,{}),Object(a.jsx)(na.a.Item,{icon:Object(a.jsx)(ra.a,{}),onClick:function(){return n("/settings")},children:"Settings"},"settings")]})]})})}var sa=n(163),la=n.n(sa),ua=function(e){var t=e.data,n=e.closeModal,c=Object(Le.a)("modals").t,r=t.entity,i=M(r.userParticipants[0]),o=Object(De.a)(new Date(r.scheduledStart),"EEEE, MMMM d"),s=Object(De.a)(new Date(r.scheduledStart),"h:mm aaa OOO"),l=r&&Object(Ae.a)(new Date(r.scheduledEnd),new Date(r.scheduledEnd)),u=r.userParticipants[0].firstName;return Object(a.jsxs)(la.a,{title:c("cancelCallModal.title"),visible:!0,okText:c("cancelCallModal.okText"),onOk:n,onCancel:n,className:"rounded-sm",children:[Object(a.jsxs)(ke.b,{direction:"vertical",size:"large",children:[Object(a.jsx)(Ie.a,{children:Object(a.jsx)(Ne.a.Text,{children:c("cancelCallModal.messageOne",{connectionName:i})})}),Object(a.jsx)(Ie.a,{children:Object(a.jsxs)(Se.a,{children:[Object(a.jsx)("div",{children:Object(a.jsx)(Ne.a.Text,{children:o})}),Object(a.jsx)("div",{children:Object(a.jsxs)(Ne.a.Text,{children:[s," \u2022 ","".concat(l,"mins")]})})]})}),Object(a.jsx)(Ie.a,{children:Object(a.jsx)(Ne.a.Text,{children:c("cancelCallModal.messageTwo",{connectionFirstName:u})})}),Object(a.jsx)(Ie.a,{})]}),Object(a.jsx)(et.a,{className:"w-full",placeholder:c("cancelCallModal.dropdownPlaceholder")})]})},da=n(538),ja=function(e){var t=e.data,n=e.closeModal,c=t.entity;return Object(a.jsx)(da.a,{title:c.title,visible:!0,okText:c.okBtnText||"OK",cancelButtonProps:{style:{display:t.entity.hideCancel?"none":"inline"}},onOk:n,onCancel:n,className:"rounded-sm w-full",children:Object(a.jsx)(Ne.a.Text,{children:c.body})})},ba=function(e){var t=e.data,n=e.closeModal,r=Object(Le.a)("call").t,i=Object(c.useState)(),o=Object(f.a)(i,2),s=o[0],l=o[1],u=Object(c.useState)(),d=Object(f.a)(u,2),j=d[0],b=d[1];return Object(c.useEffect)((function(){Object(O.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=l,e.next=3,B("audio");case 3:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=b,e.next=8,B("video");case 8:e.t3=e.sent,(0,e.t2)(e.t3);case 10:case"end":return e.stop()}}),e)})))()}),[]),Object(c.useEffect)((function(){return function(){s&&s.getTracks().forEach((function(e){e.stop()}));j&&j.getTracks().forEach((function(e){e.stop()}))}}),[s,j]),"TEST_CONNECTION_MODAL"!==t.activeType?Object(a.jsx)("div",{}):Object(a.jsxs)(da.a,{title:r("testConnection.title"),visible:!0,cancelButtonProps:{style:{display:"none"}},onOk:n,className:"rounded-sm w-full",children:[j?Object(a.jsx)(Jt,{srcObject:j,className:"w-full",autoPlay:!0}):Object(a.jsx)("div",{}),s?Object(a.jsx)(Gt,{srcObject:s}):Object(a.jsx)("div",{}),Object(a.jsx)(Ne.a.Text,{children:""})]})},fa=function(){var e=vn(),t=gn((function(e){return e.modals.data}));switch(t.activeType){case"CANCEL_CALL_MODAL":return Object(a.jsx)(ua,{closeModal:function(){return e(Ze())},data:t});case"RESOURCE_MODAL":return Object(a.jsx)(ja,{closeModal:function(){return e(Ze())},data:t});case"TEST_CONNECTION_MODAL":return Object(a.jsx)(ba,{closeModal:function(){return e(Ze())},data:t});default:return null}},ha={fetchContacts:ee,push:ct.d};var pa=Object(at.c)(null,ha)((function(e){var t=e.history,n=e.fetchContacts,r=e.push,i=Object(Le.a)().i18n,o=gn((function(e){return e.common.fullScreen})),u=gn((function(e){return e.session})),d={isAuthenticated:u.isLoggedIn,authenticationPath:"/login"},j=u.isLoggedIn&&!o;return Object(c.useEffect)((function(){u.isLoggedIn&&n()}),[u.isLoggedIn,n]),Object(c.useEffect)((function(){i.changeLanguage(u.language)}),[u.language,i]),Object(a.jsxs)(l.a,{history:t,children:[Object(a.jsx)(fa,{}),Object(a.jsxs)(Re.a,{style:{minHeight:"100vh"},children:[j&&Object(a.jsx)(oa,{user:u.user,navigate:r}),Object(a.jsx)(Re.a,{children:Object(a.jsxs)(yn.d,{children:[Object(a.jsx)(yn.b,{exact:!0,path:"/login",component:ta}),nn.map((function(e){return Object(c.createElement)(wn,Object(s.a)(Object(s.a)({exact:!0},d),{},{path:e.path,component:e.component,key:e.label}))})),Object(a.jsx)(yn.a,{to:"/login"})]})})]})]})})),Oa=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,559)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};n(525);o.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(at.a,{store:xn,children:Object(a.jsx)(pa,{history:On})})}),document.getElementById("root")),Oa()}},[[526,1,2]]]);
//# sourceMappingURL=main.2b393a0b.chunk.js.map