{"version":3,"sources":["api/Common.ts","utils/utils.ts","utils/Call.ts","pages/Call/RoomClient.ts","redux/modules/call.ts","redux/modules/contactsSlice.ts","redux/selectors.ts","i18n/config.ts","components/Common/PageLayout/index.tsx","components/Common/PageLayout/PageLayout.tsx","components/Common/Buttons/EditButton/index.tsx","components/Common/Buttons/EditButton/EditButton.tsx","components/Profile/ProfileInfo.tsx","components/Profile/index.tsx","components/Profile/Profile.tsx","pages/Profile/index.tsx","redux/modules/modalsSlice.ts","components/Calls/Calls.tsx","components/Calls/index.tsx","hooks/useCalls.ts","pages/Calls/index.tsx","components/Settings/index.tsx","components/Settings/Settings.tsx","pages/Settings/index.tsx","components/Dashboard/CallItem.tsx","components/Dashboard/CallsList.tsx","components/Dashboard/ConnectionItem.tsx","components/Dashboard/ConnectionsList.tsx","components/Dashboard/DashboardHeader.tsx","components/Dashboard/CallDetails.tsx","components/Dashboard/index.tsx","components/Dashboard/Dashboard.tsx","pages/Dashboard/index.tsx","components/Common/commonSlice.ts","components/Call/MessageDisplay.tsx","components/Call/Chat.tsx","components/Common/Buttons/IconButton/index.tsx","components/Common/Buttons/IconButton/IconButton.tsx","components/Call/VideoOverlay.tsx","components/Call/VideoMePlaceholder.tsx","components/Call/WaitingRoomCard.tsx","components/Call/Timer.tsx","components/Call/Video.tsx","components/Call/Audio.tsx","components/Call/Call.tsx","components/Call/index.tsx","pages/Call/index.tsx","pages/CallFeedback/index.tsx","utils/constants.ts","redux/modules/session.ts","redux/modules/connection.ts","redux/index.ts","components/Hocs/ProtectedRoute.tsx","api/User.ts","assets/logo.svg","styles/Layout.ts","pages/Login/index.tsx","components/Menu/Sidebar.tsx","components/Modals/CancelCallModal/index.tsx","components/Modals/CancelCallModal/CancelCallModal.tsx","components/Modals/InformationalModal/index.tsx","components/Modals/InformationalModal/InformationalModal.tsx","components/Modals/TestConnectionModal/index.tsx","components/Modals/TestConnectionModal/TestConnectionModal.tsx","components/Modals/Modals.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["API_URL","process","fetchTimeout","fetchUrl","options","timeout","Promise","race","fetch","mode","_","reject","setTimeout","Error","fetchAuthenticated","a","state","Store","getState","requestOptions","headers","Accept","credentials","session","authInfo","id","response","status","json","body","fetchFacilities","getRandomItem","items","Math","floor","random","length","getInitials","str","split","map","substr","join","genFullName","entity","firstName","lastName","openNotificationWithIcon","message","description","type","notification","showToast","key","content","duration","success","error","warning","loading","info","notEmpty","value","undefined","keyMinutes","WHITE_BACKGROUND","loadCallEntities","call","contacts","userParticipants","userIds","filter","getMediaConstraints","deviceId","audio","video","getMedia","mediaConstraints","navigator","mediaDevices","getUserMedia","config","width","min","ideal","height","encodings","rid","maxBitrate","scalabilityMode","codecOptions","videoGoogleStartBitrate","RoomClient","socket","callId","producerTransport","consumerTransport","device","consumers","producers","handlers","this","consume","name","data","resolve","emit","transport","on","callback","errback","dtlsParameters","request","transportId","producerTransportInfo","consumerTransportInfo","routerRtpCapabilities","loadDevice","createSendTransport","handleTransportConnect","createRecvTransport","rtpCapabilities","kind","rtpParameters","producerId","consumeResult","consumer","stream","consumerId","forEach","f","user","track","getAudioTracks","getVideoTracks","params","produce","producer","mediasoupClient","load","MediaStream","event","fn","push","Object","values","pause","contents","active","resume","off","close","fetchCalls","createAsyncThunk","calls","results","initializeVisit","setRc","videoHandler","io","connect","port","transports","connected","rc","init","initializeProducers","setLocalAudio","setLocalVideo","all","videoStream","audioStream","paused","cs","initializeRemotes","setRemoteAudios","setRemoteVideos","existing","newStreams","callAdapter","createEntityAdapter","callSlice","createSlice","initialState","getInitialState","reducers","extraReducers","builder","addCase","fulfilled","action","setAll","payload","rejected","actions","contactsAdapter","fetchContacts","inmate","camelcaseKeys","contactsSlice","getSelectors","selectAllCalls","selectAll","selectCallById","selectById","selectAllContacts","selectContactEntities","selectEntities","createSelector","baseCalls","resources","en","login","enLogin","dashboard","enDashboard","profile","enProfile","enCall","enCalls","modals","enModals","settings","enSettings","es","esLogin","esDashboard","esProfile","esCall","esModals","esSettings","i18n","use","initReactI18next","lng","ns","PageLayout","children","className","Content","style","backgroundColor","opacity","EditButton","icon","SaveOutlined","size","ProfileInfo","t","onEdit","useTranslation","useState","totalMinutes","setTotalMinutes","useEffect","total","differenceInMinutes","Date","scheduledEnd","scheduledStart","reduce","b","direction","src","profileImagePath","AVATAR_LARGE","Title","level","Text","strong","location","gutter","span","title","format","dateOfBirth","offset","Profile","isEditing","setIsEditing","ProfilePage","useAppSelector","modalsSlice","activeType","openModal","closeModal","tableColumns","dataIndex","Calls","dispatch","useAppDispatch","tableData","setTableData","date","time","participants","cancel","onClick","quota","columns","dataSource","useCalls","setCalls","contactEntities","c","loadAllCallEntities","CallsPage","Settings","Option","Select","defaultValue","language","onChange","changeLanguage","keys","LANGUAGES","index","Link","SettingsPage","CallItem","selectCall","navigate","openPrivacyNotice","started","justify","align","isToday","isTomorrow","paddingTop","disabled","okBtnText","CallsList","openInfoModal","extra","path","ConnectionItem","contact","shape","daysPastNum","ConnectionsList","filteredContacts","setFilteredContacts","activeContactTab","setActiveContactTab","tabList","tab","connectionItems","activeTabKey","onTabChange","Styles","headerTime","color","marginBottom","headerDate","marginTop","quote","DashboardHeader","QUOTES","dailyQuote","currTime","setCurrTime","interval","setInterval","clearInterval","backgroundImage","background","author","CallDetails","selectedCall","onClose","placement","closable","visible","getContainer","position","CalendarOutlined","TeamOutlined","fontSize","Dashboard","setSelectedCall","mapDispatchToProps","connector","resource","commonSlice","fullScreen","enterFullScreen","exitFullScreen","MessageDisplay","from","getDisplayName","timestamp","Chat","roomClient","inmateId","Sider","Layout","chatCollapsed","setChatCollapsed","draftMessage","setDraftMessage","messages","setMessages","hasUnreadMessages","setHasUnreadMessages","toLocaleDateString","onSendMessage","then","console","log","rejection","theme","maxHeight","collapsible","collapsed","onCollapse","WRAPPER_PADDING","overflowY","mark","TextArea","rows","e","target","onPressEnter","_e","onSubmit","placeholder","autoFocus","bordered","IconButton","label","danger","block","Style","iconButton","inactive","VideoOverlay","audioOn","toggleAudio","videoOn","toggleVideo","toggleChat","terminateCall","timerOn","toggleTimer","AudioOutlined","AudioMutedOutlined","VideoCameraOutlined","dot","MessageOutlined","ClockCircleOutlined","top","left","zIndex","display","avatar","margin","VideoMePlaceholder","initials","getTranslatedDailyQuestion","question","WaitingRoomCard","navigateBack","openTestConnectionModal","QUESTIONS","icebreaker","renderer","formatted","minutes","seconds","completed","some","val","mapCountdownTimeToStyle","Timer","endTime","zeroPadTime","Video","srcObject","props","refVideo","useRef","current","ref","refAudio","Call","React","memo","localVideo","localAudio","remoteAudios","remoteVideos","showOverlay","setShowOverlay","participantHasJoined","setParticipantsHasJoined","peerAudioOn","setPeerAudioOn","peerVideoOn","setPeerVideoOn","setTimerOn","onMouseMove","clearTimeout","parseInt","onMouseOver","autoPlay","toUpperCase","resumeAudio","pauseAudio","resumeVideo","pauseVideo","CallBase","match","stableDispatch","useCallback","baseCall","setCall","useCallById","hasInit","setHasInit","desc","CallFeedbackBase","UNAUTHENTICATED_USER_ID","ROUTES","component","CallPage","character","HeartOutlined","tooltips","DashboardPage","padding","SET_SESSION","LOGOUT","setSession","userState","token","inmateIdentification","isLoggedIn","sessionReducer","history","fetchConnections","connections","connectionAdapter","connectionSlice","createBrowserHistory","rootReducer","combineReducers","common","reducer","router","connectRouter","configureStore","middleware","getDefaultMiddleware","concat","routerMiddleware","useDispatch","useSelector","ProtectedRoute","redirectPath","isAuthenticated","authenticationPath","to","pathname","render","initializeSession","loginWithCredentials","cred","method","JSON","stringify","facilityId","inmateNumber","pin","cookies","get","re","found","_extends","assign","i","arguments","source","prototype","hasOwnProperty","apply","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","d","points","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","SvgLogo","_ref","svgRef","titleId","xmlns","viewBox","ForwardRef","BORDER_RADIUS","borderRadius","FORM_LAYOUT","labelCol","flex","wrapperCol","FORM_TAIL_LAYOUT","facilities","setFacilities","getFacilityOptions","onFinish","facilityOptions","facility","href","onFinishFailed","_errorInfo","initialValues","Item","rules","required","Group","entries","Button","prefix","UserOutlined","Password","LockOutlined","htmlType","Sidebar","defaultSelectedKeys","HomeOutlined","ScheduleOutlined","EllipsisOutlined","CancelCallModal","fullName","startDate","startTime","okText","onOk","onCancel","connectionName","connectionFirstName","InformationalModal","cancelButtonProps","hideCancel","TestConnectionModal","setAudio","setVideo","getTracks","stop","Modals","hasSideBar","defaultProtectedRouteProps","showSideBar","minHeight","exact","LoginPage","route","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","store","document","getElementById"],"mappings":"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","file":"static/js/main.2bf3a5a3.chunk.js","sourcesContent":["import { Store } from \"src/redux\";\nimport { FacilitiesAPIResponse } from \"./interfaces/apiResponses\";\n\nexport const API_URL = `${process.env.REACT_APP_BASE_URL}`;\n\nexport interface ApiResponse {\n  date: number;\n  good: boolean;\n  status?: \"OK\" | \"ERROR\" | \"succeeded\" | 200;\n  message?: string;\n  data: Record<string, unknown> | Record<string, unknown>[] | unknown;\n}\n\nexport function fetchTimeout(\n  fetchUrl: string,\n  options: Record<string, unknown>,\n  timeout = 15000\n): Promise<Response> {\n  return Promise.race([\n    fetch(fetchUrl, { ...options, mode: \"cors\" }),\n    new Promise<Response>((_, reject) =>\n      setTimeout(() => reject(new Error(\"timeout\")), timeout)\n    ),\n  ]);\n}\n\nexport function toQueryString(options: string[][]) {\n  return options.map((x) => x[0] + \"=\" + encodeURIComponent(x[1])).join(\"&\");\n}\n\nexport async function fetchAuthenticated(\n  fetchUrl: string,\n  options: Record<string, unknown> = {},\n  timeout = 15000\n): Promise<ApiResponse> {\n  const state = Store.getState();\n\n  const requestOptions = {\n    ...options,\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n    },\n    credentials: \"include\",\n  };\n\n  const response = await fetchTimeout(\n    `${API_URL}inmates/${state.session.authInfo.id}/${fetchUrl}`,\n    requestOptions,\n    timeout\n  );\n\n  if (response.status !== 200 && response.status !== 201) {\n    throw response;\n  }\n\n  const body = await response.json();\n\n  return body;\n}\n\nexport async function fetchFacilities(\n  timeout = 1500\n): Promise<FacilitiesAPIResponse> {\n  const requestOptions = {\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n    },\n  };\n  const response = await fetchTimeout(\n    `${API_URL}public/facilities`,\n    requestOptions,\n    timeout\n  );\n\n  const body = await response.json();\n\n  return body;\n}\n","import { notification, message } from \"antd\";\nimport { BasePersona } from \"src/types/User\";\n\nexport function getRandomItem(items: Object[]) {\n  return items[Math.floor(Math.random() * items.length)];\n}\n\nexport const getInitials = (str: string) => {\n  return str\n    .split(\" \")\n    .map((substr) => substr[0])\n    .join(\"\");\n};\n\nexport const genFullName = (entity: BasePersona): string =>\n  entity ? `${entity.firstName} ${entity.lastName}` : \"\";\n\nexport const openNotificationWithIcon = (\n  message: string,\n  description: string,\n  type: \"success\" | \"info\" | \"error\" | \"warning\"\n) => {\n  notification[type]({\n    message,\n    description,\n  });\n};\nexport const showToast = (\n  key: string,\n  content: string,\n  type: \"success\" | \"error\" | \"warning\" | \"loading\" | \"info\",\n  duration = 3\n) => {\n  switch (type) {\n    case \"success\":\n      message.success({ content, key, duration });\n      break;\n    case \"error\":\n      message.error({ content, key, duration });\n      break;\n    case \"warning\":\n      message.warning({ content, key, duration });\n      break;\n    case \"loading\":\n      message.loading({ content, key, duration });\n      break;\n    default:\n      message.info({ content, key, duration });\n      break;\n  }\n};\n\nfunction hashCode(str: string): number {\n  var hash = 0;\n  for (var i = 0; i < str.length; i++) {\n    hash = str.charCodeAt(i) + ((hash << 6) - hash);\n  }\n  return hash;\n}\n\nexport function generateBgColor(label: string): string {\n  const BACKGROUND_COLORS = [\n    \"#093145\",\n    \"#3C6478\",\n    \"#107896\",\n    \"#43ABC9\",\n    \"#C2571A\",\n    \"#9A2617\",\n  ];\n  return BACKGROUND_COLORS[\n    Math.abs(hashCode(label) % BACKGROUND_COLORS.length)\n  ];\n}\nexport function notEmpty<TParam>(\n  value: TParam | null | undefined\n): value is TParam {\n  return value !== null && value !== undefined;\n}\n","import { Dictionary } from \"@reduxjs/toolkit\";\nimport { BaseCall, Call, MediaType } from \"src/types/Call\";\nimport { Contact } from \"src/types/User\";\nimport { notEmpty } from \"./utils\";\n\n// The timer will switch to a white background for four seconds around each of these key minutes\nconst keyMinutes = [10, 5, 2];\nconst DEFAULT_BACKGROUND = \"bg-gray-900 text-white\";\nconst WHITE_BACKGROUND = \"bg-white text-black\";\nconst BLUE_BACKGROUND = \"bg-blue-500 text-white\";\n\nexport function loadCallEntitiesById(\n  call: BaseCall,\n  contacts: Dictionary<Contact>\n): Call {\n  const userParticipants = call.userIds\n    .map((id) => contacts[id])\n    .filter(notEmpty);\n  return { ...call, userParticipants: userParticipants };\n}\n\nexport function loadCallEntities(\n  call: BaseCall,\n  contacts: Dictionary<Contact>\n): Call {\n  const userParticipants = call.userIds\n    .map((id) => contacts[id])\n    .filter(notEmpty);\n  return { ...call, userParticipants: userParticipants };\n}\n\nexport function loadAllCallEntities(\n  calls: BaseCall[],\n  contacts: Dictionary<Contact>\n): Call[] {\n  return calls.map((c) => loadCallEntities(c, contacts));\n}\n\n// This function determines what color the background should be\n// Within 4 seconds of a key minute (i.e. 9:56-10:00) -> White background\n// Last minute -> Blue bacground\n// Default -> Black background\nexport function mapCountdownTimeToStyle(\n  minutes: number,\n  seconds: number\n): string {\n  if (keyMinutes.some((val) => val === minutes && seconds === 0))\n    return WHITE_BACKGROUND;\n  if (keyMinutes.some((val) => val === minutes + 1 && seconds >= 56))\n    return WHITE_BACKGROUND;\n  if (minutes === 0 || (minutes === 1 && seconds === 0)) return BLUE_BACKGROUND;\n  return DEFAULT_BACKGROUND;\n}\n\nfunction getMediaConstraints(\n  type: MediaType,\n  deviceId?: number\n): MediaStreamConstraints {\n  if (type === \"audio\") {\n    return { audio: true };\n  } else {\n    return {\n      video: true,\n    };\n  }\n}\n\nexport async function getMedia(type: MediaType, deviceId?: number) {\n  const mediaConstraints = getMediaConstraints(type, deviceId);\n  return await navigator.mediaDevices.getUserMedia(mediaConstraints);\n}\n","import * as mediasoupClient from \"mediasoup-client\";\nimport { Transport } from \"mediasoup-client/lib/types\";\nimport { MediaType } from \"src/types/Call\";\nimport { getMedia } from \"src/utils\";\n/*\n  Copyright 2020 Ameelio.org.\n  Published under the GPL v3.\n\n  You can obtain a copy of the GPL v3 at:\n  https://www.gnu.org/licenses/gpl-3.0.en.html\n\n  This file was inspired by code from https://github.com/Dirvann/mediasoup-sfu-webrtc-video-rooms,\n  which was published under the Apache License.\n  Copyright 2020 github.com/Dirvann.\n\n  You can obtain a copy of the Apache License at:\n  http://www.apache.org/licenses/LICENSE-2.0\n\n  This file was substantially modified by Ameelio to streamline\n  the signalling protocol and change the structure of how a RoomClient\n  is initialized and what events it exposes for easier use by\n  Ameelio's client-side code, and to refactor and restructure the code\n  for easier maintainenance, among other changes.\n*/\n// window.rc = null;\n// window.consumers = [];\n// window.producers = [];\n\nconst config = {\n  video: {\n    width: { min: 640, ideal: 1920 },\n    height: { min: 400, ideal: 1080 },\n    encodings: [\n      {\n        rid: \"r0\",\n        maxBitrate: 100000,\n        scalabilityMode: \"S1T3\",\n      },\n      {\n        rid: \"r1\",\n        maxBitrate: 300000,\n        scalabilityMode: \"S1T3\",\n      },\n      {\n        rid: \"r2\",\n        maxBitrate: 900000,\n        scalabilityMode: \"S1T3\",\n      },\n    ],\n    codecOptions: {\n      videoGoogleStartBitrate: 1000,\n    },\n  },\n};\n\n// function getMediaConstraints(\n//   type: MediaType,\n//   deviceId?: number\n// ): MediaStreamConstraints {\n//   if (type === \"audio\") {\n//     return { audio: true };\n//   } else {\n//     return {\n//       video: true,\n//     };\n//   }\n// }\n\nexport async function stopStream(stream: MediaStream) {\n  const tracks = stream.getTracks();\n  tracks.forEach((track) => {\n    track.stop();\n  });\n}\n\nclass RoomClient {\n  private callId: number;\n  private producerTransport: Transport | null;\n  private consumerTransport: Transport | null;\n  private device: mediasoupClient.Device | null;\n  private consumers: Record<string, mediasoupClient.types.Consumer>;\n  private producers: Record<string, mediasoupClient.types.Producer>;\n  private handlers: Record<string, ((...args: unknown[]) => void)[]>;\n\n  public socket: SocketIOClient.Socket;\n\n  constructor(socket: SocketIOClient.Socket, callId: number) {\n    this.socket = socket;\n    this.callId = callId;\n\n    this.producerTransport = null;\n    this.consumerTransport = null;\n\n    this.device = null;\n\n    this.consumers = {};\n    this.producers = {};\n\n    this.handlers = { consume: [] };\n  }\n\n  async request(name: string, data: any): Promise<any> {\n    return new Promise((resolve, reject) => {\n      if (!this.socket) return reject(\"No socket connection.\");\n\n      this.socket.emit(name, data, (response: any) => {\n        if (response.error) reject(response.error);\n        else resolve(response);\n      });\n    });\n  }\n\n  async handleTransportConnect(transport: Transport) {\n    return new Promise((resolve: (value?: unknown) => void, reject) => {\n      // Wait for the producer transport to connect...\n      transport.on(\n        \"connect\",\n        async ({ dtlsParameters }, callback: () => void, errback) => {\n          await this.request(\"establishDtls\", {\n            dtlsParameters,\n            callId: this.callId,\n            transportId: transport.id,\n          });\n          callback();\n          resolve();\n        }\n      );\n    });\n  }\n\n  async init() {\n    // Request to join the room.\n    const {\n      producerTransportInfo,\n      consumerTransportInfo,\n      routerRtpCapabilities,\n    } = await this.request(\"join\", { callId: this.callId });\n\n    // Load up a local media device consistent with server\n    this.device = await this.loadDevice(routerRtpCapabilities);\n    if (!this.device) return;\n\n    // Set up both transports and promise to send\n    // dtls info when they connect (this won't occur until\n    // someone actually produces).\n    if (producerTransportInfo) {\n      this.producerTransport = this.device.createSendTransport(\n        producerTransportInfo\n      );\n      this.handleTransportConnect(this.producerTransport);\n    }\n\n    this.consumerTransport = this.device.createRecvTransport(\n      consumerTransportInfo\n    );\n    this.handleTransportConnect(this.consumerTransport);\n\n    // Declare what our device is capable of.\n    await this.request(\"declareRtpCapabilities\", {\n      rtpCapabilities: this.device.rtpCapabilities,\n    });\n\n    // We don't actually need to wait for this request to come back.\n    this.request(\"finishConnecting\", { callId: this.callId });\n\n    // When our producer transport is producing a new stream,\n    // inform the server.\n    if (this.producerTransport) {\n      this.producerTransport.on(\n        \"produce\",\n        async ({ kind, rtpParameters }, callback, errback) => {\n          const { producerId } = await this.request(\"produce\", {\n            callId: this.callId,\n            kind,\n            rtpParameters,\n          });\n\n          callback({ id: producerId });\n        }\n      );\n    }\n\n    // When we get a consumer, fire an event.\n    this.socket.on(\"consume\", async (info: any) => {\n      const consumeResult = await this.consume(info);\n      if (!consumeResult) return;\n      const { consumer, stream } = consumeResult;\n      this.socket.emit(\"resumeConsumer\", {\n        callId: this.callId,\n        consumerId: consumer.id,\n      });\n      this.handlers[\"consume\"].forEach((f) => f(info.kind, stream, info.user));\n    });\n  }\n\n  async produce(\n    type: MediaType,\n    deviceId?: number\n  ): Promise<MediaStream | null> {\n    if (!this.producerTransport) return null;\n    const stream = await getMedia(type, deviceId);\n\n    const track = (type === \"audio\"\n      ? stream.getAudioTracks()\n      : stream.getVideoTracks())[0];\n\n    const params: any = { track };\n\n    if (type === \"video\") {\n      params.encodings = config.video.encodings;\n      params.codecOptions = config.video.codecOptions;\n    }\n\n    const producer = await this.producerTransport.produce(params);\n    this.producers[producer.id] = producer;\n    return stream;\n  }\n\n  async loadDevice(\n    routerRtpCapabilities: mediasoupClient.types.RtpCapabilities\n  ) {\n    const device = new mediasoupClient.Device();\n\n    await device.load({ routerRtpCapabilities });\n\n    return device;\n  }\n\n  async consume(info: mediasoupClient.types.ConsumerOptions) {\n    if (!this.consumerTransport) return;\n    const consumer = await this.consumerTransport.consume(info);\n    const stream = new MediaStream([consumer.track]);\n    this.consumers[consumer.id] = consumer;\n    return { consumer, stream };\n  }\n\n  async on(event: string, fn: (...args: any) => void) {\n    if (!(event in this.handlers)) {\n      this.handlers[event] = [];\n    }\n    this.handlers[event].push(fn);\n  }\n\n  async terminate() {\n    await this.request(\"terminate\", { callId: this.callId });\n  }\n\n  async pauseVideo() {\n    Object.values(this.producers)?.forEach((producer) => {\n      if (producer.kind === \"video\") {\n        producer.pause();\n        this.socket.emit(\"producerUpdate\", {\n          callId: this.callId,\n          contents: {\n            producerId: producer.id,\n            active: false,\n            type: \"video\",\n          },\n        });\n      }\n    });\n    this.handlers[\"pauseVideo\"].forEach((f) => f());\n  }\n\n  async resumeVideo() {\n    Object.values(this.producers)?.forEach((producer) => {\n      if (producer.kind === \"video\") {\n        producer.resume();\n        this.socket.emit(\"producerUpdate\", {\n          callId: this.callId,\n          contents: {\n            producerId: producer.id,\n            active: true,\n            type: \"video\",\n          },\n        });\n      }\n    });\n    this.handlers[\"resumeVideo\"].forEach((f) => f());\n  }\n\n  async pauseAudio() {\n    Object.values(this.producers)?.forEach((producer) => {\n      if (producer.kind === \"audio\") {\n        producer.pause();\n        this.socket.emit(\"producerUpdate\", {\n          callId: this.callId,\n          contents: {\n            producerId: producer.id,\n            active: false,\n            type: \"audio\",\n          },\n        });\n      }\n    });\n    this.handlers[\"pauseAudio\"].forEach((f) => f());\n  }\n\n  async resumeAudio() {\n    Object.values(this.producers)?.forEach((producer) => {\n      if (producer.kind === \"audio\") {\n        producer.resume();\n        this.socket.emit(\"producerUpdate\", {\n          callId: this.callId,\n          contents: {\n            producerId: producer.id,\n            active: true,\n            type: \"audio\",\n          },\n        });\n      }\n    });\n    this.handlers[\"resumeAudio\"].forEach((f) => f());\n  }\n\n  async destroy() {\n    this.socket.off(\"connect\");\n    this.socket.off(\"consume\");\n    this.socket.off(\"textMessage\");\n    this.socket.close();\n\n    if (this.consumerTransport) this.consumerTransport.close();\n    if (this.producerTransport) this.producerTransport.close();\n    this.consumerTransport = null;\n    this.producerTransport = null;\n\n    Object.values(this.producers).forEach((producer) => {\n      producer.close();\n    });\n    Object.values(this.consumers).forEach((consumer) => {\n      consumer.close();\n    });\n    this.consumers = {};\n    this.producers = {};\n\n    this.handlers = {};\n  }\n}\n\nexport default RoomClient;\n","import {\n  createSlice,\n  createEntityAdapter,\n  createAsyncThunk,\n} from \"@reduxjs/toolkit\";\nimport { fetchAuthenticated } from \"src/api/Common\";\nimport RoomClient from \"src/pages/Call/RoomClient\";\nimport {\n  BaseCall,\n  CallHandler,\n  CallParticipant,\n  ControlledStream,\n} from \"src/types/Call\";\nimport { ThunkApi } from \"../helper\";\nimport io from \"socket.io-client\";\nimport { showToast } from \"src/utils\";\nimport { AuthInfo } from \"src/types/Session\";\n\nexport const fetchCalls = createAsyncThunk(\"calls/fetchAll\", async () => {\n  const body = await fetchAuthenticated(`calls`);\n\n  const calls = (body.data as { results: BaseCall[] }).results;\n\n  return calls;\n});\n\nexport const initializeVisit = createAsyncThunk(\n  \"visit/initializeVisit\",\n  async ({\n    callId,\n    setRc,\n    authInfo,\n    videoHandler,\n  }: {\n    callId: number;\n    authInfo: AuthInfo;\n    setRc: (rc: RoomClient) => void;\n    videoHandler: CallHandler;\n  }) => {\n    const socket = io.connect(`https://localhost:${videoHandler.port}`, {\n      transports: [\"websocket\"],\n    });\n    if (!socket.connected) {\n      await new Promise((resolve) => socket.on(\"connect\", resolve));\n    }\n    await new Promise((resolve) => {\n      socket.emit(\"authenticate\", authInfo, resolve);\n    });\n    const rc = new RoomClient(socket, callId);\n    await rc.init();\n    setRc(rc);\n    return {\n      callId,\n    };\n  }\n);\n\nexport const initializeProducers = createAsyncThunk<\n  void,\n  {\n    rc: RoomClient;\n    setLocalAudio: React.Dispatch<\n      React.SetStateAction<ControlledStream | undefined>\n    >;\n    setLocalVideo: React.Dispatch<\n      React.SetStateAction<ControlledStream | undefined>\n    >;\n    setRc: (rc: RoomClient) => void;\n  },\n  ThunkApi\n>(\n  \"visit/initializeProducers\",\n  async ({ rc, setLocalAudio, setLocalVideo, setRc }) => {\n    const [videoStream, audioStream] = await Promise.all([\n      rc.produce(\"video\"),\n      rc.produce(\"audio\"),\n    ]);\n\n    if (!videoStream) throw Error(\"Unable to produce video\");\n    if (!audioStream) throw Error(\"Unable to produce audio\");\n\n    setLocalAudio({\n      stream: audioStream,\n      paused: false,\n    });\n    setLocalVideo({\n      stream: videoStream,\n      paused: false,\n    });\n    rc.on(\"pauseVideo\", () => {\n      setLocalVideo((cs) => {\n        if (cs) {\n          return {\n            stream: cs.stream,\n            paused: true,\n          };\n        }\n      });\n    });\n    rc.on(\"resumeVideo\", () => {\n      setLocalVideo((cs) => {\n        if (cs) {\n          return {\n            stream: cs.stream,\n            paused: false,\n          };\n        }\n      });\n    });\n    rc.on(\"pauseAudio\", () => {\n      setLocalAudio((cs) => {\n        if (cs) {\n          return {\n            stream: cs.stream,\n            paused: true,\n          };\n        }\n      });\n    });\n    rc.on(\"resumeAudio\", () => {\n      setLocalAudio((cs) => {\n        if (cs) {\n          return {\n            stream: cs.stream,\n            paused: false,\n          };\n        }\n      });\n    });\n    // update room client object\n    setRc(rc);\n  }\n);\n\nexport const initializeRemotes = createAsyncThunk<\n  void,\n  {\n    rc: RoomClient;\n    setRemoteAudios: React.Dispatch<\n      React.SetStateAction<Record<number, MediaStream>>\n    >;\n    setRemoteVideos: React.Dispatch<\n      React.SetStateAction<Record<number, MediaStream>>\n    >;\n  },\n  ThunkApi\n>(\n  \"visit/initializeRemotes\",\n  async ({ rc, setRemoteAudios, setRemoteVideos }) => {\n    rc.on(\n      \"consume\",\n      async (kind: string, stream: MediaStream, user: CallParticipant) => {\n        if (user.type !== \"user\") return;\n        if (kind === \"audio\") {\n          setRemoteAudios((existing) => {\n            const newStreams = { ...existing };\n            newStreams[user.id] = stream;\n            return newStreams;\n          });\n        }\n        if (kind === \"video\") {\n          setRemoteVideos((existing) => {\n            const newStreams = { ...existing };\n            newStreams[user.id] = stream;\n            return newStreams;\n          });\n        }\n      }\n    );\n  }\n);\n\nexport const callAdapter = createEntityAdapter<BaseCall>();\n\nexport const callSlice = createSlice({\n  name: \"calls\",\n  initialState: callAdapter.getInitialState(),\n  reducers: {},\n  extraReducers: (builder) => {\n    builder.addCase(fetchCalls.fulfilled, (state, action) =>\n      callAdapter.setAll(state, action.payload)\n    );\n    builder.addCase(initializeVisit.rejected, () =>\n      showToast(\"initializeVisit\", \"Failed to initialize call.\", \"error\")\n    );\n    builder.addCase(initializeProducers.rejected, () =>\n      showToast(\n        \"initializeProducers\",\n        \"Failed to initialize local streams.\",\n        \"error\"\n      )\n    );\n    builder.addCase(initializeRemotes.rejected, () =>\n      showToast(\"initializeProducers\", \"Failed to initialize remotes.\", \"error\")\n    );\n  },\n});\n\nexport const callActions = callSlice.actions;\n","import {\n  createAsyncThunk,\n  createEntityAdapter,\n  createSlice,\n} from \"@reduxjs/toolkit\";\nimport camelcaseKeys from \"camelcase-keys\";\nimport { fetchAuthenticated } from \"src/api/Common\";\nimport { Contact } from \"src/types/User\";\n\nexport const contactsAdapter = createEntityAdapter<Contact>();\n\nexport const fetchContacts = createAsyncThunk(\"contacts/fetchAll\", async () => {\n  const body = await fetchAuthenticated(`contacts`);\n  const contacts = ((body.data as Record<string, unknown>)\n    .contacts as Contact[]).map((inmate) => camelcaseKeys(inmate));\n\n  return contacts;\n});\n\nexport const contactsSlice = createSlice({\n  name: \"contacts\",\n  initialState: contactsAdapter.getInitialState(),\n  reducers: {},\n  extraReducers: (builder) => {\n    builder.addCase(fetchContacts.fulfilled, (state, action) => {\n      contactsAdapter.setAll(state, action.payload);\n    });\n  },\n});\n","import { RootState } from \".\";\nimport { callAdapter } from \"./modules/call\";\nimport { contactsAdapter } from \"./modules/contactsSlice\";\nimport { BaseCall } from \"src/types/Call\";\nimport { createSelector } from \"reselect\";\n\n// get selectors from entity adapter\nexport const {\n  selectAll: selectAllCalls,\n  selectById: selectCallById,\n} = callAdapter.getSelectors<RootState>((state) => state.calls);\n\nexport const {\n  selectAll: selectAllContacts,\n  selectById: selectContactById,\n  selectEntities: selectContactEntities,\n} = contactsAdapter.getSelectors<RootState>((state) => state.contacts);\n\nexport const selectUpcomingCalls = createSelector(\n  selectAllCalls,\n  (baseCalls: BaseCall[]) =>\n    baseCalls.filter(\n      (call) => call.status !== \"ended\" && call.status !== \"terminated\"\n    )\n);\n\nexport const selectEndedCalls = createSelector(\n  selectAllCalls,\n  (baseCalls: BaseCall[]) =>\n    baseCalls.filter(\n      (call) => call.status === \"ended\" || call.status === \"terminated\"\n    )\n);\n","import i18n from \"i18next\";\nimport enDashboard from \"./en/dashboard.json\";\nimport enProfile from \"./en/profile.json\";\nimport esProfile from \"./es/profile.json\";\nimport enCall from \"./en/call.json\";\nimport enCalls from \"./en/calls.json\";\nimport enLogin from \"./en/login.json\";\nimport esLogin from \"./es/login.json\";\nimport esDashboard from \"./es/dashboard.json\";\nimport esCall from \"./es/call.json\";\nimport enModals from \"./en/modals.json\";\nimport esModals from \"./es/modals.json\";\nimport enSettings from \"./en/settings.json\";\nimport esSettings from \"./es/settings.json\";\n\nimport { initReactI18next } from \"react-i18next\";\n\nexport const resources = {\n  en: {\n    login: enLogin,\n    dashboard: enDashboard,\n    profile: enProfile,\n    call: enCall,\n    calls: enCalls,\n    modals: enModals,\n    settings: enSettings,\n  },\n  es: {\n    login: esLogin,\n    dashboard: esDashboard,\n    profile: esProfile,\n    call: esCall,\n    modals: esModals,\n    settings: esSettings,\n  },\n} as const;\n\ni18n.use(initReactI18next).init({\n  lng: \"en\",\n  ns: [\"login\", \"dashboard\", \"call\", \"profile\", \"settings\", \"modals\"],\n  resources,\n});\n","import PageLayout from \"./PageLayout\";\n\nexport default PageLayout;\n","import { Layout } from \"antd\";\nimport React, { ReactNode } from \"react\";\n\ninterface Props {\n  children?: ReactNode;\n}\n\nconst PageLayout: React.FC = ({ children }: Props) => (\n  <Layout className=\"min-h-screen\">\n    <Layout.Content>\n      <div\n        style={{\n          height: \"60px\",\n          backgroundColor: \"#F0DEFF\",\n          opacity: 0.4,\n        }}\n      />\n      {children}\n    </Layout.Content>\n  </Layout>\n);\n\nexport default PageLayout;\n","import EditButton from \"./EditButton\";\n\nexport default EditButton;\n","import { SaveOutlined } from \"@ant-design/icons\";\nimport { Button } from \"antd\";\nimport React, { ReactNode } from \"react\";\n\ninterface Props {\n  children?: ReactNode;\n}\n\nconst EditButton: React.FC = ({ children }: Props) => (\n  <Button\n    type=\"primary\"\n    icon={<SaveOutlined />}\n    size=\"large\"\n    className=\"rounded\"\n  >\n    {children}\n  </Button>\n);\n\nexport default EditButton;\n","import { Space, PageHeader, Row, Card, Typography, Col } from \"antd\";\nimport Avatar from \"antd/lib/avatar/avatar\";\nimport { differenceInMinutes, format } from \"date-fns\";\nimport React, { useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { User } from \"src/types/User\";\nimport { genFullName } from \"src/utils/utils\";\nimport { BaseCall } from \"src/types/Call\";\nimport { AVATAR_LARGE } from \"src/utils/constants\";\nimport PageLayout from \"src/components/Common/PageLayout\";\nimport EditButton from \"src/components/Common/Buttons/EditButton\";\n\ninterface Props {\n  user: User;\n  calls: BaseCall[];\n  onEdit: () => void;\n}\n\nconst ProfileInfo: React.FC<Props> = ({ user, calls, onEdit }) => {\n  const { t } = useTranslation(\"profile\");\n  const [totalMinutes, setTotalMinutes] = useState(0);\n\n  useEffect(() => {\n    if (calls.length) {\n      const total = calls\n        .map((call) =>\n          differenceInMinutes(\n            new Date(call.scheduledEnd),\n            new Date(call.scheduledStart)\n          )\n        )\n        .reduce((a, b) => a + b);\n      setTotalMinutes(total);\n    }\n  }, [calls]);\n\n  return (\n    <PageLayout>\n      <Space direction=\"vertical\" size=\"large\" className=\"w-100 p-6 pt-9\">\n        <PageHeader className=\"p-6 border border-solid border-opacity-1 border-gray-200\">\n          <Space className=\"flex justify-between\">\n            <Space>\n              <Avatar src={user.profileImagePath} size={AVATAR_LARGE} />\n              <Space direction=\"vertical\">\n                <Typography.Title level={4}>\n                  <Typography.Text strong>{genFullName(user)}</Typography.Text>\n                </Typography.Title>\n                <Typography.Title level={5}>\n                  <Typography.Text>{user.location}</Typography.Text>\n                </Typography.Title>\n              </Space>\n            </Space>\n            <EditButton>{t(\"profileInfo.editProfile\")}</EditButton>\n          </Space>\n        </PageHeader>\n        <Row gutter={32}>\n          <Col span={16}>\n            <Card title={t(\"profileInfo.about\")}>\n              <p>\n                <Typography.Text>{`${t(\"profileInfo.name\")}: ${genFullName(\n                  user\n                )}`}</Typography.Text>\n              </p>\n              <p>\n                <Typography.Text>{`${t(\"profileInfo.home\")}: ${\n                  user.location\n                }`}</Typography.Text>\n              </p>\n              <p>\n                <Typography.Text>{`${t(\"profileInfo.birthday\")}: ${format(\n                  new Date(user.dateOfBirth),\n                  \"MMMM d, yyyy\"\n                )}`}</Typography.Text>\n              </p>\n            </Card>\n          </Col>\n          <Col span={8}>\n            <Card title={t(\"profileInfo.history\")}>\n              <Row>\n                <Col span={4}>\n                  <p>\n                    <Typography.Text type=\"secondary\">\n                      {t(\"profileInfo.totalCalls\")}\n                    </Typography.Text>\n                  </p>\n                  <p>\n                    <Typography.Text>{calls.length}</Typography.Text>\n                  </p>\n                </Col>\n                <Col span={16} offset={2}>\n                  <p>\n                    <Typography.Text type=\"secondary\">\n                      {t(\"profileInfo.totalMinutes\")}\n                    </Typography.Text>\n                  </p>\n                  <p>\n                    <Typography.Text>{totalMinutes}</Typography.Text>\n                  </p>\n                </Col>\n              </Row>\n            </Card>\n          </Col>\n        </Row>\n      </Space>\n    </PageLayout>\n  );\n};\n\nexport default ProfileInfo;\n","import Profile from \"./Profile\";\n\nexport default Profile;\n","import React, { useState } from \"react\";\nimport { BaseCall } from \"src/types/Call\";\nimport { User } from \"src/types/User\";\nimport ProfileInfo from \"./ProfileInfo\";\n\ninterface Props {\n  calls: BaseCall[];\n  user: User;\n}\n\nconst Profile: React.FC<Props> = ({ calls, user }) => {\n  const [isEditing, setIsEditing] = useState(false);\n\n  return isEditing ? null : (\n    <ProfileInfo user={user} calls={calls} onEdit={() => setIsEditing(true)} />\n  );\n};\n\nexport default Profile;\n","import React from \"react\";\nimport { useAppSelector } from \"src/redux\";\nimport { selectAllCalls } from \"src/redux/selectors\";\nimport \"src/i18n/config\";\nimport Profile from \"src/components/Profile\";\n\nconst ProfilePage: React.FC = () => {\n  const user = useAppSelector((state) => state.session.user);\n  const calls = useAppSelector((state) => selectAllCalls(state));\n  return <Profile calls={calls} user={user} />;\n};\n\nexport default ProfilePage;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport {\n  CancelCallModalData,\n  InactiveModalData,\n  ResourceModalData,\n  TestConnectionModalData,\n} from \"src/types/UI\";\n\ntype ModalEntity =\n  | CancelCallModalData\n  | ResourceModalData\n  | TestConnectionModalData\n  | InactiveModalData;\n\n// type ModalsSliceState =  {activeType: ModalType | null, entity: Call |{ title: string; body: string } | null };\ntype ModalsSliceState = { data: ModalEntity };\n\nconst initialState: ModalsSliceState = {\n  data: { activeType: \"INACTIVE_MODAL\", entity: null },\n};\n\nexport const modalsSlice = createSlice({\n  name: \"modals\",\n  initialState,\n  reducers: {\n    openModal: (state, action: PayloadAction<ModalEntity>) => {\n      state.data = action.payload;\n    },\n    closeModal: (state) => {\n      state.data = { activeType: \"INACTIVE_MODAL\", entity: null };\n    },\n  },\n});\n\nexport const { openModal, closeModal } = modalsSlice.actions;\n","import { Avatar, Button, Col, Row, Space, Table, Typography } from \"antd\";\nimport React, { useEffect, useState } from \"react\";\nimport { BaseCall, Call } from \"src/types/Call\";\nimport { User } from \"src/types/User\";\nimport PageLayout from \"src/components/Common/PageLayout\";\nimport { useTranslation } from \"react-i18next\";\nimport { format } from \"date-fns\";\nimport { genFullName } from \"src/utils/utils\";\nimport { useAppDispatch } from \"src/redux\";\nimport { openModal } from \"src/redux/modules/modalsSlice\";\n\ninterface Props {\n  calls: Call[];\n  user: User;\n}\n\ninterface TableData {\n  date: string;\n  time: string;\n  participants: JSX.Element;\n  cancel: JSX.Element;\n}\n\nconst tableColumns = [\n  {\n    title: \"Date\",\n    dataIndex: \"date\",\n  },\n  {\n    title: \"Time\",\n    dataIndex: \"time\",\n  },\n  {\n    title: \"Participants\",\n    dataIndex: \"participants\",\n  },\n  {\n    title: \"\",\n    dataIndex: \"cancel\",\n  },\n];\n\nconst Calls: React.FC<Props> = ({ calls, user }) => {\n  const dispatch = useAppDispatch();\n  const [tableData, setTableData] = useState<TableData[] | undefined>(\n    undefined\n  );\n  const { t } = useTranslation(\"calls\");\n\n  useEffect(() => {\n    setTableData(\n      calls.map((call) => {\n        return {\n          date: format(new Date(call.scheduledStart), \"eeee, LLLL d\"),\n          time: `${format(\n            new Date(call.scheduledStart),\n            \"h:mm bbb\"\n          )} - ${format(new Date(call.scheduledStart), \"h:mm bbb\")}`,\n          participants: (\n            <Space>\n              <Avatar src={user.profileImagePath} size=\"small\" />\n              <Typography.Text>{genFullName(user)}</Typography.Text>\n            </Space>\n          ),\n          cancel: (\n            <Button\n              type=\"link\"\n              onClick={() =>\n                dispatch(\n                  openModal({ activeType: \"CANCEL_CALL_MODAL\", entity: call })\n                )\n              }\n            >\n              {t(\"cancel\")}\n            </Button>\n          ),\n        };\n      })\n    );\n  }, [calls, user, dispatch, t]);\n\n  return (\n    <PageLayout>\n      <Space className=\"p-8 w-full\" direction=\"vertical\">\n        <Row className=\"pb-2\">\n          <Col>\n            <p className=\"pb-2\">\n              <Typography.Text type=\"secondary\">\n                {t(\"callLimit\")}\n              </Typography.Text>\n            </p>\n            <p>\n              <Typography.Text strong className=\"text-base\">\n                {user.quota}\n              </Typography.Text>\n            </p>\n          </Col>\n        </Row>\n        <Row>\n          <Table\n            className=\"w-full\"\n            columns={tableColumns}\n            dataSource={tableData}\n          />\n        </Row>\n      </Space>\n    </PageLayout>\n  );\n};\n\nexport default Calls;\n","import Calls from \"./Calls\";\n\nexport default Calls;\n","import { Dictionary } from \"@reduxjs/toolkit\";\nimport { useState, useEffect } from \"react\";\nimport { BaseCall, Call } from \"src/types/Call\";\nimport { Contact } from \"src/types/User\";\nimport { loadAllCallEntities, loadCallEntities } from \"src/utils\";\nimport {\n  selectAllCalls,\n  selectCallById,\n  selectContactEntities,\n} from \"src/redux/selectors\";\nimport { useAppSelector } from \"src/redux\";\n\nexport function useCalls() {\n  const [calls, setCalls] = useState<Call[]>([]);\n  const baseCalls = useAppSelector(selectAllCalls);\n  const contactEntities = useAppSelector(selectContactEntities);\n\n  useEffect(() => {\n    setCalls(loadAllCallEntities(baseCalls, contactEntities));\n  }, [baseCalls, contactEntities]);\n\n  return calls;\n}\n\nexport function useCallById(id: number) {\n  const baseCall = useAppSelector((state) => selectCallById(state, id));\n  const contactEntities = useAppSelector(selectContactEntities);\n  const [call, setCall] = useState<Call>();\n\n  useEffect(() => {\n    if (baseCall) setCall(loadCallEntities(baseCall, contactEntities));\n  }, [baseCall, contactEntities]);\n\n  return call;\n}\n","import React from \"react\";\nimport { useAppSelector } from \"src/redux\";\nimport \"src/i18n/config\";\nimport Calls from \"src/components/Calls\";\nimport { useCalls } from \"src/hooks/useCalls\";\n\nconst CallsPage: React.FC = () => {\n  const user = useAppSelector((state) => state.session.user);\n  const calls = useCalls();\n\n  return <Calls calls={calls} user={user} />;\n};\n\nexport default CallsPage;\n","import Settings from \"./Settings\";\n\nexport default Settings;\n","import React from \"react\";\nimport { Language } from \"src/types/Session\";\nimport PageLayout from \"src/components/Common/PageLayout\";\nimport { Card, Col, Row, Select, Space, Typography } from \"antd\";\nimport { useTranslation } from \"react-i18next\";\nimport { LANGUAGES } from \"src/utils/constants\";\nimport { openModal } from \"../../redux/modules/modalsSlice\";\nimport { useAppDispatch } from \"src/redux\";\n\nconst Settings: React.FC = () => {\n  const { t, i18n } = useTranslation(\"settings\");\n  const dispatch = useAppDispatch();\n  const { Option } = Select;\n\n  return (\n    <PageLayout>\n      <Space direction=\"vertical\" size=\"large\" className=\"w-100 p-6 pt-9\">\n        <Row gutter={32}>\n          <Col span={12}>\n            <Card title={t(\"language.title\")}>\n              <p>\n                <Typography.Text>{t(\"language.messageOne\")}</Typography.Text>\n              </p>\n              <p>\n                <Typography.Text type=\"secondary\">\n                  {t(\"language.messageTwo\")}\n                </Typography.Text>\n              </p>\n              <div className=\"pt-4\">\n                <Typography.Text>{`${t(\"language.title\")}:`}</Typography.Text>\n                {/* TODO: Right now, this only changes the language on the frontend via i18n. We need to also update the database\n                                whenever we have an API endpoint for it */}\n                <Select\n                  className=\"pl-4\"\n                  defaultValue={i18n.language}\n                  onChange={(value) => i18n.changeLanguage(value)}\n                >\n                  {Object.keys(LANGUAGES).map((key, index) => (\n                    <Option key={`${key}-${index}`} value={key}>\n                      {LANGUAGES[key as Language]}\n                    </Option>\n                  ))}\n                </Select>\n              </div>\n            </Card>\n          </Col>\n          <Col span={12}>\n            <Card title={t(\"resources.title\")}>\n              <Row className=\"pb-2\">\n                <Typography.Link\n                  onClick={() =>\n                    dispatch(\n                      openModal({\n                        activeType: \"RESOURCE_MODAL\",\n                        entity: { title: \"Hello\", body: \"World\" },\n                      })\n                    )\n                  }\n                >\n                  {t(\"resources.contactVerification\")}\n                </Typography.Link>\n              </Row>\n              <Row className=\"pb-2\">\n                <Typography.Link\n                  onClick={() =>\n                    dispatch(\n                      openModal({\n                        activeType: \"RESOURCE_MODAL\",\n                        entity: { title: \"Hello\", body: \"World\" },\n                      })\n                    )\n                  }\n                >\n                  {t(\"resources.callInfo\")}\n                </Typography.Link>\n              </Row>\n              <Row className=\"pb-2\">\n                <Typography.Link\n                  onClick={() =>\n                    dispatch(\n                      openModal({\n                        activeType: \"RESOURCE_MODAL\",\n                        entity: { title: \"Hello\", body: \"World\" },\n                      })\n                    )\n                  }\n                >\n                  {t(\"resources.privacyInfo\")}\n                </Typography.Link>\n              </Row>\n            </Card>\n          </Col>\n        </Row>\n      </Space>\n    </PageLayout>\n  );\n};\n\nexport default Settings;\n","import React from \"react\";\nimport \"src/i18n/config\";\nimport Settings from \"src/components/Settings\";\n\nconst SettingsPage: React.FC = () => {\n  return <Settings />;\n};\n\nexport default SettingsPage;\n","import { Avatar, Button, Card, Row, Space, Typography } from \"antd\";\nimport { differenceInMinutes, format, isToday, isTomorrow } from \"date-fns\";\nimport React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Call } from \"src/types/Call\";\nimport { FAQResource } from \"src/types/UI\";\nimport { genFullName } from \"src/utils/utils\";\n\ninterface Props {\n  call: Call;\n  selectCall: (call: Call) => void;\n  navigate: (path: string) => void;\n  openPrivacyNotice: (resource: FAQResource) => void;\n}\nconst CallItem: React.FC<Props> = ({\n  call,\n  selectCall,\n  navigate,\n  openPrivacyNotice,\n}: Props) => {\n  const { t } = useTranslation(\"dashboard\");\n\n  const duration = differenceInMinutes(\n    new Date(call.scheduledEnd),\n    new Date(call.scheduledStart)\n  );\n\n  const started = new Date(call.scheduledStart) < new Date();\n\n  const getDateLabel = (date: Date) => {\n    if (isToday(date)) return \"Today\";\n    if (isTomorrow(date)) return \"Tomorrow\";\n    return format(date, \"EEEE, MMMM d\");\n  };\n\n  return (\n    <Card key={call.id}>\n      <Row justify=\"space-between\" align=\"bottom\">\n        <Space direction=\"vertical\">\n          <Typography.Title level={5}>\n            {getDateLabel(new Date(call.scheduledStart))}\n          </Typography.Title>\n          <Typography.Text>\n            {format(new Date(call.scheduledStart), \"h:mm aaa\")} {\" \"}\n            {`${duration} minutes`}\n          </Typography.Text>\n          <Space style={{ paddingTop: 18 }}>\n            <Avatar src={call.userParticipants[0].profileImagePath} />\n            <Typography.Text type=\"secondary\">\n              {genFullName(call.userParticipants[0])}\n            </Typography.Text>\n          </Space>\n        </Space>\n        <Space>\n          {started ? (\n            <Button\n              size=\"large\"\n              type=\"primary\"\n              className=\"rounded-sm\"\n              disabled={!call.videoHandler}\n              onClick={() => {\n                navigate(`call/${call.id}`);\n                openPrivacyNotice({\n                  title: t(\"privacyNotice.title\"),\n                  body: t(\"privacyNotice.body\"),\n                  okBtnText: t(\"privacyNotice.okText\"),\n                });\n              }}\n            >\n              {t(\"call.join\")}\n            </Button>\n          ) : (\n            <Button\n              size=\"large\"\n              className=\"rounded-sm\"\n              onClick={() => selectCall(call)}\n            >\n              {t(\"call.seeDetails\")}\n            </Button>\n          )}\n        </Space>\n      </Row>\n    </Card>\n  );\n};\n\nexport default CallItem;\n","import { Card, Typography } from \"antd\";\nimport { push } from \"connected-react-router\";\nimport React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useAppDispatch } from \"src/redux\";\nimport { Call } from \"src/types/Call\";\nimport { FAQResource } from \"src/types/UI\";\nimport CallItem from \"./CallItem\";\n\ninterface Props {\n  calls: Call[];\n  selectCall: (call: Call) => void;\n  openInfoModal: (resource: FAQResource) => void;\n}\n\nconst CallsList: React.FC<Props> = ({\n  calls,\n  selectCall,\n  openInfoModal,\n}: Props) => {\n  const { t } = useTranslation(\"dashboard\");\n  const dispatch = useAppDispatch();\n\n  return (\n    <Card\n      title={t(\"call.title\")}\n      extra={\n        <Typography.Link onClick={() => dispatch(push(\"/\"))}>\n          {t(\"call.seeAll\")}\n        </Typography.Link>\n      }\n      className=\"rounded-md\"\n    >\n      <div className=\"pb-5\">\n        <Typography.Text>\n          {!calls.length\n            ? t(\"call.noCalls\")\n            : `${calls.length} ${t(\"call.upcomingCalls\")}${\n                calls.length > 1 ? \"s\" : \"\"\n              }`}\n        </Typography.Text>\n      </div>\n      {calls.map((call) => (\n        <CallItem\n          call={call}\n          selectCall={selectCall}\n          navigate={(path) => dispatch(push(path))}\n          openPrivacyNotice={openInfoModal}\n          key={`callItem-${call.id}`}\n        />\n      ))}\n    </Card>\n  );\n};\n\nexport default CallsList;\n","import { Avatar, Col, Space, Typography } from \"antd\";\nimport { differenceInDays } from \"date-fns\";\nimport React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Contact } from \"src/types/User\";\nimport { genFullName } from \"src/utils/utils\";\n\ninterface Props {\n  contact: Contact;\n}\n\nconst ConnectionItem: React.FC<Props> = ({ contact }) => {\n  const { t } = useTranslation(\"dashboard\");\n\n  const getDaysPastNum = () => {\n    // TODO: get the last call\n    // return differenceInDays(\n    //   new Date(),\n    //   new Date(contact.lastCall.scheduledEnd)\n    // );\n    return 1;\n  };\n\n  return (\n    <Col key={contact.id} className=\"d-flex flex-column align-items-center\">\n      <Space direction=\"vertical\">\n        <Avatar shape=\"square\" size={80} src={contact.profileImagePath} />\n        <div>\n          <div>\n            <Typography.Text>{genFullName(contact)}</Typography.Text>\n          </div>\n          {contact.status === \"active\" && (\n            <div>\n              <Typography.Text type=\"secondary\">\n                {t(\"connection.lastCall\", {\n                  daysPastNum: getDaysPastNum(),\n                })}\n              </Typography.Text>\n            </div>\n          )}\n        </div>\n      </Space>\n    </Col>\n  );\n};\n\nexport default ConnectionItem;\n","import { Card, Row } from \"antd\";\nimport React, { useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Call } from \"src/types/Call\";\nimport { Contact } from \"src/types/User\";\nimport ConnectionItem from \"./ConnectionItem\";\n\ninterface Props {\n  calls: Call[];\n  contacts: Contact[];\n}\n\nconst ConnectionsList: React.FC<Props> = ({ calls, contacts }: Props) => {\n  const { t } = useTranslation(\"dashboard\");\n  const [filteredContacts, setFilteredContacts] = useState<Contact[] | null>(\n    null\n  );\n  const [activeContactTab, setActiveContactTab] = useState(\"active\");\n  const tabList = [\n    {\n      key: \"active\",\n      tab: t(\"connection.active\"),\n    },\n    {\n      key: \"pending\",\n      tab: t(\"connection.pending\"),\n    },\n  ];\n\n  useEffect(() => {\n    setFilteredContacts(\n      contacts.filter((contact) => contact.status === activeContactTab)\n    );\n  }, [activeContactTab, contacts]);\n\n  const connectionItems = filteredContacts?.map((contact) => (\n    <ConnectionItem key={contact.id} contact={contact} />\n  ));\n\n  return (\n    <Card\n      title={t(\"connection.title\")}\n      tabList={tabList}\n      activeTabKey={activeContactTab}\n      onTabChange={(key) => setActiveContactTab(key)}\n    >\n      <Row justify=\"space-around\">{connectionItems}</Row>\n    </Card>\n  );\n};\n\nexport default ConnectionsList;\n","import { Col, Space, Typography } from \"antd\";\nimport { format } from \"date-fns\";\nimport React, { useEffect, useState } from \"react\";\nimport { Quote } from \"src/types/Common\";\nimport { QUOTES } from \"src/utils/constants\";\nimport { getRandomItem } from \"src/utils/utils\";\n\nconst DashboardHeader: React.FC = () => {\n  const [dailyQuote] = useState(getRandomItem(QUOTES) as Quote);\n  const [currTime, setCurrTime] = useState(new Date());\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setCurrTime(new Date());\n    }, 1000);\n\n    return () => clearInterval(interval);\n  });\n\n  return (\n    <Space\n      direction=\"vertical\"\n      align=\"center\"\n      style={{\n        backgroundImage: `url(${dailyQuote.background})`,\n      }}\n      className=\"w-full h-52 rounded-md bg-cover bg-center text-center flex-1 justify-end\"\n    >\n      <Col className=\"pb-4\">\n        <Typography.Title level={1} style={Styles.headerTime}>\n          {format(currTime, \"HH:mm\")}\n        </Typography.Title>\n        <Typography.Title level={5} style={Styles.headerDate}>\n          {format(currTime, \"eeee, MMMM d\")}\n        </Typography.Title>\n      </Col>\n      <Col>\n        <Typography.Title level={5} style={Styles.quote}>\n          {`${dailyQuote.quote} - ${dailyQuote.author}`}\n        </Typography.Title>\n      </Col>\n    </Space>\n  );\n};\n\nconst Styles = {\n  headerTime: {\n    color: \"white\",\n    marginBottom: 0,\n  },\n  headerDate: {\n    color: \"white\",\n    marginTop: 0,\n  },\n  quote: {\n    color: \"white\",\n  },\n};\n\nexport default DashboardHeader;\n","import { CalendarOutlined, TeamOutlined } from \"@ant-design/icons\";\nimport {\n  Avatar,\n  Button,\n  Col,\n  Divider,\n  Drawer,\n  Row,\n  Space,\n  Typography,\n} from \"antd\";\nimport { differenceInMinutes, format } from \"date-fns\";\nimport React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useAppDispatch } from \"src/redux\";\nimport { Call } from \"src/types/Call\";\nimport { genFullName } from \"src/utils/utils\";\nimport { openModal } from \"src/redux/modules/modalsSlice\";\n\ninterface Props {\n  selectedCall: Call | null;\n  onClose: () => void;\n}\n\nconst CallDetails: React.FC<Props> = ({ selectedCall, onClose }) => {\n  const dispatch = useAppDispatch();\n\n  const { t } = useTranslation(\"dashboard\");\n  const duration =\n    selectedCall &&\n    differenceInMinutes(\n      new Date(selectedCall.scheduledEnd),\n      new Date(selectedCall.scheduledStart)\n    );\n\n  return selectedCall ? (\n    <Drawer\n      title=\"Call Details\"\n      placement=\"right\"\n      closable={false}\n      onClose={onClose}\n      visible={selectedCall ? true : false}\n      getContainer={false}\n      style={{ position: \"absolute\" }}\n    >\n      <Space direction=\"vertical\" size=\"large\">\n        <Row>\n          <Space>\n            <Col>\n              <CalendarOutlined className=\"text-2xl\" />\n            </Col>\n            <Col className=\"text-sm\">\n              <div>\n                <Typography.Text>\n                  {format(\n                    new Date(selectedCall.scheduledStart),\n                    \"EEEE, MMMM d\"\n                  )}\n                </Typography.Text>\n              </div>\n              <div>\n                <Typography.Text type=\"secondary\">\n                  {format(\n                    new Date(selectedCall.scheduledStart),\n                    \"h:mm aaa OOO\"\n                  )}{\" \"}\n                   {`${duration}mins`}\n                </Typography.Text>\n              </div>\n            </Col>\n          </Space>\n        </Row>\n        <Row>\n          <Space>\n            <Col>\n              <TeamOutlined className=\"text-2xl\" />\n            </Col>\n            <Col>\n              <Avatar src={selectedCall.userParticipants[0].profileImagePath} />\n            </Col>\n            <Col style={{ fontSize: 14 }}>\n              <Typography.Text type=\"secondary\">\n                {genFullName(selectedCall.userParticipants[0])}\n              </Typography.Text>\n            </Col>\n          </Space>\n        </Row>\n        <Row>\n          <Typography.Text type=\"secondary\">\n            {t(\"call.cancelDescription\")}\n          </Typography.Text>\n        </Row>\n        <Row>\n          <Button\n            className=\"rounded-sm\"\n            onClick={() =>\n              dispatch(\n                openModal({\n                  activeType: \"CANCEL_CALL_MODAL\",\n                  entity: selectedCall,\n                })\n              )\n            }\n          >\n            {t(\"call.cancel\")}\n          </Button>\n        </Row>\n        <Divider />\n        <Row>\n          <Typography.Link>{t(\"call.whatToExpect\")}</Typography.Link>\n        </Row>\n        <Row>\n          <Typography.Link>{t(\"call.privacyNotice\")}</Typography.Link>\n        </Row>\n      </Space>\n    </Drawer>\n  ) : null;\n};\n\nexport default CallDetails;\n","import Dashboard from \"./Dashboard\";\n\nexport default Dashboard;\n","import { Col, Row, Space } from \"antd\";\nimport React, { useState } from \"react\";\nimport { Call } from \"src/types/Call\";\nimport { Connection } from \"src/types/Connection\";\nimport CallsList from \"./CallsList\";\nimport ConnectionsList from \"./ConnectionsList\";\nimport DashboardHeader from \"./DashboardHeader\";\nimport CallDetails from \"./CallDetails\";\nimport PageLayout from \"src/components/Common/PageLayout\";\nimport { FAQResource } from \"src/types/UI\";\nimport { Contact } from \"src/types/User\";\n\ninterface Props {\n  calls: Call[];\n  contacts: Contact[];\n  openInfoModal: (resource: FAQResource) => void;\n}\nconst Dashboard: React.FC<Props> = ({ calls, contacts, openInfoModal }) => {\n  const [selectedCall, setSelectedCall] = useState<null | Call>(null);\n  return (\n    <PageLayout>\n      <Space direction=\"vertical\" size=\"large\" className=\"w-100 p-6 pt-9\">\n        <Row>\n          <Col span={24}>\n            <DashboardHeader />\n          </Col>\n        </Row>\n        <Row gutter={16}>\n          <Col span={16}>\n            <CallsList\n              calls={calls}\n              selectCall={(call: Call) => setSelectedCall(call)}\n              openInfoModal={openInfoModal}\n            />\n          </Col>\n          <Col span={8}>\n            <ConnectionsList calls={calls} contacts={contacts} />\n          </Col>\n        </Row>\n      </Space>\n      <CallDetails\n        selectedCall={selectedCall}\n        onClose={() => setSelectedCall(null)}\n      />\n    </PageLayout>\n  );\n};\n\nexport default Dashboard;\n","import React, { useEffect } from \"react\";\nimport { useAppDispatch, useAppSelector } from \"src/redux\";\nimport { connect, ConnectedProps } from \"react-redux\";\nimport { fetchCalls } from \"src/redux/modules/call\";\nimport { selectAllContacts } from \"src/redux/selectors\";\nimport { push } from \"connected-react-router\";\nimport \"src/i18n/config\";\nimport Dashboard from \"src/components/Dashboard\";\nimport { FAQResource } from \"src/types/UI\";\nimport { openModal } from \"src/redux/modules/modalsSlice\";\nimport { useCalls } from \"src/hooks/useCalls\";\n\nconst mapDispatchToProps = { fetchCalls, push };\n\nconst connector = connect(null, mapDispatchToProps);\n\ntype PropsFromRedux = ConnectedProps<typeof connector>;\n\nconst DashboardPage: React.FC<PropsFromRedux> = ({ fetchCalls }) => {\n  const dispatch = useAppDispatch();\n  const contacts = useAppSelector(selectAllContacts);\n  const calls = useCalls();\n\n  useEffect(() => {\n    (async () => await fetchCalls())();\n  }, [fetchCalls]);\n\n  return (\n    <Dashboard\n      calls={calls}\n      contacts={contacts}\n      openInfoModal={(resource: FAQResource) =>\n        dispatch(openModal({ activeType: \"RESOURCE_MODAL\", entity: resource }))\n      }\n    />\n  );\n};\n\nexport default connector(DashboardPage);\n","import { createSlice } from \"@reduxjs/toolkit\";\n\ninterface CommonSliceState {\n  fullScreen: boolean;\n}\n\nconst initialState: CommonSliceState = { fullScreen: false };\n\nexport const commonSlice = createSlice({\n  name: \"common\",\n  initialState,\n  reducers: {\n    enterFullScreen: (state) => {\n      state.fullScreen = true;\n    },\n    exitFullScreen: (state) => {\n      state.fullScreen = false;\n    },\n  },\n});\n\nexport const { enterFullScreen, exitFullScreen } = commonSlice.actions;\n","import { Space, Typography } from \"antd\";\nimport { format } from \"date-fns\";\nimport React from \"react\";\nimport { CallMessage } from \"src/types/Call\";\n\ninterface Props {\n  message: CallMessage;\n}\n\nconst MessageDisplay: React.FC<Props> = ({ message }) => {\n  const { type } = message.from;\n  const getDisplayName = () => {\n    switch (type) {\n      case \"inmate\":\n        return \"You\";\n      case \"doc\":\n        return \"DOC\";\n      case \"user\":\n        return \"Loved One\";\n    }\n  };\n  return (\n    <Space\n      direction=\"vertical\"\n      align={type === \"inmate\" ? \"end\" : \"start\"}\n      style={{ width: \"100%\" }}\n    >\n      <Space>\n        <Typography.Text strong>{getDisplayName()}</Typography.Text>\n        <Typography.Text type=\"secondary\">\n          {format(new Date(message.timestamp), \"HH:mm\")}\n        </Typography.Text>\n      </Space>\n      <Typography.Text>{message.content}</Typography.Text>\n    </Space>\n  );\n};\n\nexport default MessageDisplay;\n","import { Divider, Input, Layout, PageHeader, Space, Typography } from \"antd\";\nimport React, { useEffect, useState } from \"react\";\nimport { Call, CallMessage, CallParticipant } from \"src/types/Call\";\nimport { WRAPPER_PADDING } from \"src/utils/constants\";\nimport MessageDisplay from \"src/components/Call/MessageDisplay\";\nimport { openNotificationWithIcon } from \"src/utils/utils\";\nimport RoomClient from \"src/pages/Call/RoomClient\";\nimport { useTranslation } from \"react-i18next\";\n\ninterface Props {\n  roomClient: RoomClient | undefined;\n  // isAuthed: boolean;\n  inmateId: number;\n  // socket: SocketIOClient.Socket | undefined;\n  call: Call;\n}\n\nconst Chat: React.FC<Props> = ({ roomClient, inmateId, call }) => {\n  const { Sider } = Layout;\n  const { t } = useTranslation(\"call\");\n\n  const [chatCollapsed, setChatCollapsed] = useState(false);\n  const [draftMessage, setDraftMessage] = useState(\"\");\n  const [messages, setMessages] = useState<CallMessage[]>([]);\n  const [hasUnreadMessages, setHasUnreadMessages] = useState(false);\n\n  useEffect(() => {\n    if (roomClient) {\n      roomClient.socket.on(\n        \"textMessage\",\n        async ({\n          from,\n          contents,\n        }: {\n          from: CallParticipant;\n          contents: string;\n        }) => {\n          setHasUnreadMessages(true);\n          if (from.type === \"doc\") {\n            openNotificationWithIcon(t(\"doc.warning\"), contents, \"warning\");\n          }\n          setMessages((messages) => [\n            ...messages,\n            {\n              content: contents,\n              from,\n              timestamp: new Date().toLocaleDateString(),\n            },\n          ]);\n        }\n      );\n    }\n  }, [roomClient, t]);\n\n  useEffect(() => {\n    if (!chatCollapsed) setHasUnreadMessages(false);\n  }, [hasUnreadMessages, chatCollapsed]);\n\n  const onSendMessage = async () => {\n    if (!roomClient) return;\n    setDraftMessage(\"\");\n    setMessages([\n      ...messages,\n      {\n        content: draftMessage,\n        from: {\n          type: \"inmate\",\n          id: inmateId,\n        },\n        timestamp: new Date().toLocaleDateString(),\n      },\n    ]);\n    //  TODO: update status of call message depending on whether promise fulfills or not\n    // need to first add status (success, status, pending)\n    // https://github.com/Ameelio/pathways-client/issues/32\n    roomClient\n      .request(\"textMessage\", {\n        callId: call.id,\n        contents: draftMessage,\n      })\n      .then(\n        () => console.log(\"ssucces\"),\n        (rejection: string) => console.log(rejection)\n      );\n  };\n\n  return (\n    <Sider\n      theme=\"light\"\n      style={{ height: \"100vh\", maxHeight: \"100vh\" }}\n      width={300}\n      collapsible\n      collapsed={chatCollapsed}\n      onCollapse={() => setChatCollapsed(true)}\n    >\n      {!chatCollapsed && <PageHeader title={t(\"chat.title\")} />}\n\n      {!chatCollapsed && (\n        <div className=\"flex flex-col h-full\" style={WRAPPER_PADDING}>\n          <Space direction=\"vertical\" style={{ overflowY: \"scroll\" }}>\n            <Typography.Text mark>{t(\"chat.monitorWarning\")}</Typography.Text>\n            {messages.map((message) => (\n              <MessageDisplay message={message} />\n            ))}\n          </Space>\n          <div className=\"mt-auto mb-8 flex-shrink-0\">\n            <Divider />\n            <Input.TextArea\n              value={draftMessage}\n              rows={2}\n              onChange={(e) => setDraftMessage(e.target.value)}\n              onPressEnter={(_e) => onSendMessage()}\n              onSubmit={(_e) => onSendMessage()}\n              placeholder={t(\"chat.placeholder\")}\n              autoFocus\n              bordered={false}\n            />\n          </div>\n        </div>\n      )}\n    </Sider>\n  );\n};\n\nexport default Chat;\n","import IconButton from \"./IconButton\";\n\nexport default IconButton;\n","import { Button, Space, Typography } from \"antd\";\nimport { ButtonShape, ButtonType } from \"antd/lib/button\";\nimport { SizeType } from \"antd/lib/config-provider/SizeContext\";\nimport React from \"react\";\n\ninterface Props {\n  icon: React.ReactNode;\n  label: string;\n  onClick: () => void;\n  type?: ButtonType;\n  danger?: boolean;\n  block?: boolean;\n  size?: SizeType;\n  shape?: ButtonShape;\n  style?: React.CSSProperties;\n}\n\nconst IconButton = ({\n  icon,\n  label,\n  onClick,\n  type,\n  danger,\n  block,\n  size,\n  shape,\n  style,\n}: Props) => {\n  return (\n    <Space direction=\"vertical\" align=\"center\">\n      <Button\n        icon={icon}\n        onClick={onClick}\n        type={type}\n        block={block}\n        danger={danger}\n        size={size || \"large\"}\n        shape={shape || \"round\"}\n        style={style}\n      ></Button>\n      <Typography.Text type=\"secondary\">{label}</Typography.Text>\n    </Space>\n  );\n};\n\nexport default IconButton;\n","import {\n  AudioMutedOutlined,\n  AudioOutlined,\n  ClockCircleOutlined,\n  MessageOutlined,\n  VideoCameraOutlined,\n} from \"@ant-design/icons\";\nimport { Badge, Button, Col, Row, Space, Spin } from \"antd\";\nimport React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport IconButton from \"../Common/Buttons/IconButton\";\n\ninterface Props {\n  loading: boolean;\n  audioOn: boolean;\n  toggleAudio: () => void;\n  videoOn: boolean;\n  toggleVideo: () => void;\n  chatCollapsed: boolean;\n  toggleChat: () => void;\n  timerOn: boolean;\n  toggleTimer: () => void;\n  terminateCall: () => void;\n  hasUnreadMessages: boolean;\n}\n\nconst VideoOverlay: React.FC<Props> = ({\n  loading,\n  audioOn,\n  toggleAudio,\n  videoOn,\n  toggleVideo,\n  chatCollapsed,\n  toggleChat,\n  terminateCall,\n  timerOn,\n  toggleTimer,\n  hasUnreadMessages,\n}) => {\n  const { t } = useTranslation(\"call\");\n  return !loading ? (\n    <Row className=\"absolute bottom-0 bg-white w-full p-4\" align=\"middle\">\n      <Col span={8} offset={8}>\n        <Space size=\"large\">\n          <IconButton\n            icon={\n              audioOn ? (\n                <AudioOutlined style={Style.iconButton} />\n              ) : (\n                <AudioMutedOutlined style={Style.iconButton} />\n              )\n            }\n            danger={!audioOn}\n            type={audioOn ? \"default\" : \"primary\"}\n            onClick={toggleAudio}\n            label={`${t(\"videoOverlay.mic\")}${\" \"}${\n              audioOn ? t(\"videoOverlay.on\") : t(\"videoOverlay.off\")\n            }`}\n          />\n          <IconButton\n            shape=\"round\"\n            danger={!videoOn}\n            icon={\n              videoOn ? (\n                <VideoCameraOutlined style={Style.iconButton} />\n              ) : (\n                <VideoCameraOutlined style={Style.iconButton} />\n              )\n            }\n            size=\"large\"\n            type={videoOn ? \"default\" : \"primary\"}\n            onClick={toggleVideo}\n            label={`${t(\"videoOverlay.video\")} ${\n              videoOn ? t(\"videoOverlay.on\") : t(\"videoOverlay.off\")\n            }`}\n          />\n          <IconButton\n            shape=\"round\"\n            style={chatCollapsed ? Style.inactive : Style.active}\n            icon={\n              chatCollapsed ? (\n                <Badge dot={hasUnreadMessages}>\n                  <MessageOutlined style={Style.iconButton} />\n                </Badge>\n              ) : (\n                <MessageOutlined style={Style.iconButton} />\n              )\n            }\n            size=\"large\"\n            onClick={toggleChat}\n            label={t(\"videoOverlay.chat\")}\n          />\n          <IconButton\n            shape=\"round\"\n            style={!timerOn ? Style.inactive : Style.active}\n            icon={<ClockCircleOutlined style={Style.iconButton} />}\n            size=\"large\"\n            onClick={toggleTimer}\n            label={`${\n              timerOn ? t(\"videoOverlay.showTime\") : t(\"videoOverlay.hideTime\")\n            }`}\n          />\n        </Space>\n      </Col>\n      <Col span={2} offset={6}>\n        <Button\n          danger\n          size=\"large\"\n          onClick={() => terminateCall()}\n          className=\"align-self-end\"\n        >\n          {t(\"videoOverlay.leaveCall\")}\n        </Button>\n      </Col>\n    </Row>\n  ) : (\n    <Row className=\"absolute bottom-0 bg-white w-full p-4 flex\" align=\"middle\">\n      <Col className=\"m-auto\">\n        <Spin />\n      </Col>\n    </Row>\n  );\n};\n\nconst Style = {\n  iconButton: {\n    fontSize: 24,\n  },\n  active: {\n    backgroundColor: \"#f5f5f5\",\n  },\n  inactive: {\n    backgroundColor: \"#fff\",\n  },\n};\nexport default VideoOverlay;\n","import { Avatar } from \"antd\";\nimport React from \"react\";\n\ninterface Props {\n  initials: string;\n}\n\nconst VideoMePlaceholder: React.FC<Props> = ({ initials }) => {\n  return (\n    <div style={Styles.background}>\n      <Avatar size={64} style={Styles.avatar}>\n        {initials}\n      </Avatar>\n    </div>\n  );\n};\nconst Styles = {\n  background: {\n    backgroundColor: \"black\",\n    position: \"absolute\",\n    top: 16,\n    left: 16,\n    width: \"300px\",\n    height: \"200px\",\n    zIndex: 9999,\n    display: \"flex\",\n  } as React.CSSProperties,\n  avatar: {\n    color: \"#f56a00\",\n    backgroundColor: \"#fde3cf\",\n    margin: \"auto\",\n  },\n};\n\nexport default VideoMePlaceholder;\n","import { Button, Card, Space, Spin, Typography } from \"antd\";\nimport { differenceInMinutes, format } from \"date-fns\";\nimport React, { useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Call } from \"src/types/Call\";\nimport { Icebreaker } from \"src/types/Common\";\nimport { Language } from \"src/types/Session\";\nimport { FAQResource } from \"src/types/UI\";\nimport { QUESTIONS } from \"src/utils/constants\";\nimport { getRandomItem } from \"src/utils/utils\";\n\ninterface Props {\n  title: string;\n  call: Call;\n  navigateBack: () => void;\n  openInfoModal: (resource: FAQResource) => void;\n  openTestConnectionModal: () => void;\n}\n\nconst getTranslatedDailyQuestion = (\n  language: Language,\n  question: Icebreaker\n): string => {\n  switch (language) {\n    case \"en\":\n      return question.en;\n    case \"es\":\n      return question.es;\n    default:\n      return question.en;\n  }\n};\n\nexport const WaitingRoomCard = ({\n  title,\n  call,\n  navigateBack,\n  openInfoModal,\n  openTestConnectionModal,\n}: Props) => {\n  const { t, i18n } = useTranslation(\"call\");\n  const [icebreaker] = useState(getRandomItem(QUESTIONS) as Icebreaker);\n\n  return (\n    <Card className=\"bg-black\tbg-opacity-80 text-white w-6/12\t h-6/12 m-auto\">\n      <Space direction=\"vertical\" className=\"text-white\" size=\"large\">\n        <Space>\n          <Typography.Text strong className=\"text-white text-xl\t\">\n            {title}\n          </Typography.Text>\n          <Spin />\n        </Space>\n\n        <Typography.Text className=\"text-white\">\n          {format(new Date(call.scheduledStart), \"HH:mm\")} {\" \"}\n          {differenceInMinutes(\n            new Date(call.scheduledEnd),\n            new Date(call.scheduledStart)\n          )}\n          mins\n        </Typography.Text>\n        <Typography.Text className=\"text-white\">\n          {t(\"waitingRoom.questionOfDay\")}:{\" \"}\n          {getTranslatedDailyQuestion(i18n.language as Language, icebreaker)}\n        </Typography.Text>\n        <Typography.Link\n          onClick={() =>\n            openInfoModal({\n              title: t(\"waitingRoom.whenWillCallConnect\"),\n              body: \"Soon.\",\n            })\n          }\n        >\n          {t(\"waitingRoom.whenWillCallConnect\")}\n        </Typography.Link>\n        <Space>\n          <Button type=\"primary\" onClick={openTestConnectionModal}>\n            {t(\"waitingRoom.checkConnection\")}\n          </Button>\n          <Button onClick={navigateBack}>\n            {t(\"waitingRoom.leaveWaitingRoom\")}\n          </Button>\n        </Space>\n      </Space>\n    </Card>\n  );\n};\n","import { Typography } from \"antd\";\nimport React from \"react\";\nimport Countdown from \"react-countdown\";\nimport { mapCountdownTimeToStyle } from \"src/utils\";\n\ninterface Props {\n  endTime: Date;\n  style?: React.CSSProperties;\n  className?: string;\n}\n// Renderer callback with condition\nconst renderer = ({\n  formatted,\n  minutes,\n  seconds,\n  completed,\n}: {\n  formatted: { minutes: string; seconds: string };\n  minutes: number;\n  seconds: number;\n  completed: boolean;\n}) => {\n  const style = mapCountdownTimeToStyle(minutes, seconds);\n\n  return completed ? (\n    <div />\n  ) : (\n    <Typography.Text className={`${style} px-4 py-2 rounded-md`}>\n      {formatted.minutes}:{formatted.seconds}\n    </Typography.Text>\n  );\n};\n\nexport const Timer = ({ endTime, style, className }: Props) => {\n  return (\n    <div style={style} className={className}>\n      <Countdown date={endTime} renderer={renderer} zeroPadTime={2} />{\" \"}\n    </div>\n  );\n};\n","import { VideoHTMLAttributes, useEffect, useRef } from \"react\";\n\ntype PropsType = VideoHTMLAttributes<HTMLVideoElement> & {\n  srcObject: MediaStream;\n};\n\nexport default function Video({ srcObject, ...props }: PropsType) {\n  const refVideo = useRef<HTMLVideoElement>(null);\n\n  useEffect(() => {\n    if (!refVideo.current) return;\n    refVideo.current.srcObject = srcObject;\n  }, [srcObject]);\n\n  return <video ref={refVideo} {...props} />;\n}\n","import { AudioHTMLAttributes, useEffect, useRef } from \"react\";\n\ntype PropsType = AudioHTMLAttributes<HTMLAudioElement> & {\n  srcObject: MediaStream;\n};\n\nexport default function Video({ srcObject, ...props }: PropsType) {\n  const refAudio = useRef<HTMLAudioElement>(null);\n\n  useEffect(() => {\n    if (!refAudio.current) return;\n    refAudio.current.srcObject = srcObject;\n  }, [srcObject]);\n\n  return <audio ref={refAudio} {...props} />;\n}\n","import React, { useEffect, useState } from \"react\";\nimport RoomClient from \"src/pages/Call/RoomClient\";\nimport { Typography, Layout, Avatar } from \"antd\";\nimport { Call, CallParticipant, ControlledStream } from \"src/types/Call\";\nimport { AudioMutedOutlined } from \"@ant-design/icons\";\nimport {\n  genFullName,\n  getInitials,\n  openNotificationWithIcon,\n  showToast,\n} from \"src/utils/utils\";\nimport { useTranslation } from \"react-i18next\";\nimport \"src/i18n/config\";\nimport Chat from \"src/components/Call/Chat\";\nimport VideoOverlay from \"src/components/Call/VideoOverlay\";\nimport VideoMePlaceholder from \"src/components/Call/VideoMePlaceholder\";\nimport { WaitingRoomCard } from \"./WaitingRoomCard\";\nimport { FAQResource } from \"src/types/UI\";\nimport { Timer } from \"./Timer\";\nimport Video from \"./Video\";\nimport Audio from \"./Audio\";\nimport { User } from \"src/types/User\";\n\ndeclare global {\n  interface Window {\n    Debug: any;\n  }\n}\n\ninterface Props {\n  call: Call | undefined;\n  user: User;\n  remoteAudios: Record<number, MediaStream>;\n  remoteVideos: Record<number, MediaStream>;\n  roomClient: RoomClient;\n  localVideo?: ControlledStream;\n  localAudio?: ControlledStream;\n  push: (path: string) => void;\n  openInfoModal: (resource: FAQResource) => void;\n  openTestConnectionModal: () => void;\n}\n\nconst CallBase: React.FC<Props> = React.memo(\n  ({\n    call,\n    user,\n    roomClient,\n    localVideo,\n    localAudio,\n    remoteAudios,\n    remoteVideos,\n    push,\n    openInfoModal,\n    openTestConnectionModal,\n  }) => {\n    const { t } = useTranslation(\"call\");\n\n    const [showOverlay, setShowOverlay] = useState(true);\n    const [participantHasJoined, setParticipantsHasJoined] = useState(false);\n    const [chatCollapsed, setChatCollapsed] = useState(true);\n    const [hasUnreadMessages, setHasUnreadMessages] = useState(false);\n    const [peerAudioOn, setPeerAudioOn] = useState(true);\n    const [peerVideoOn, setPeerVideoOn] = useState(true);\n    const [timerOn, setTimerOn] = useState(false);\n\n    useEffect(() => {\n      Object.keys(remoteVideos).length > 0 ||\n      Object.keys(remoteAudios).length > 0\n        ? setParticipantsHasJoined(true)\n        : setParticipantsHasJoined(false);\n    }, [remoteVideos, remoteAudios]);\n\n    // TODO fix this\n    useEffect(() => {\n      if (roomClient) {\n        roomClient.socket.on(\n          \"producerUpdate\",\n          async ({\n            from,\n            contents,\n          }: {\n            from: CallParticipant;\n            contents: {\n              producerId: string;\n              active: boolean;\n              type: \"audio\" | \"video\";\n            };\n          }) => {\n            if (from.type !== \"user\") return;\n            contents.type === \"audio\"\n              ? setPeerAudioOn(contents.active)\n              : setPeerVideoOn(contents.active);\n          }\n        );\n      }\n    }, [roomClient, t]);\n\n    useEffect(() => {\n      if (!chatCollapsed) setHasUnreadMessages(false);\n    }, [hasUnreadMessages, chatCollapsed]);\n\n    useEffect(() => {\n      if (call && participantHasJoined)\n        showToast(\n          \"peerVideo\",\n          `${call.userParticipants[0].firstName} ${\n            peerVideoOn ? t(\"peer.videoOn\") : t(\"peer.videoOff\")\n          }`,\n          \"info\"\n        );\n    }, [peerVideoOn, call, participantHasJoined, t]);\n\n    useEffect(() => {\n      if (call && participantHasJoined)\n        showToast(\n          \"peerAudio\",\n          `${call.userParticipants[0].firstName} ${\n            peerAudioOn ? t(\"peer.unmuted\") : t(\"peer.muted\")\n          }`,\n          \"info\"\n        );\n    }, [peerAudioOn, call, participantHasJoined, t]);\n\n    useEffect(() => {\n      if (participantHasJoined && call)\n        openNotificationWithIcon(\n          `${call.userParticipants[0].firstName} ${t(\"peer.joinedCallTitle\")}.`,\n          t(\"peer.joinedCallBody\"),\n          \"info\"\n        );\n    }, [participantHasJoined, call, t]);\n\n    if (!call) return <div />;\n\n    const getMessage = (): string => {\n      if (!roomClient) {\n        return t(\"waitingRoom.initialization\");\n      } else if (!participantHasJoined) {\n        return `${t(\"waitingRoom.waitingForPrefix\")} ${\n          call.userParticipants[0].firstName\n        } ${t(\"waitingRoom.waitingForSuffix\")}...`;\n      }\n      return t(\"waitingRoom.loading\");\n    };\n\n    let timeout: any;\n    const onMouseMove = () => {\n      setShowOverlay(true);\n      (() => {\n        clearTimeout(timeout);\n        timeout = setTimeout(() => setShowOverlay(false), 5000);\n      })();\n    };\n\n    // TODO once we support calls with multiple people at once, we can expand on this implementation\n    const keys = Object.keys(remoteVideos).map((key) => parseInt(key));\n\n    return (\n      <Layout>\n        <div\n          className=\"ant-layout-content w-screen h-screen flex bg-gray-800\"\n          onMouseMove={() => onMouseMove()}\n          onMouseOver={() => onMouseMove()}\n        >\n          {keys.map((key: number) => (\n            <div className=\"w-full h-full\">\n              <Video\n                srcObject={remoteVideos[key]}\n                className=\"w-full h-full\"\n                autoPlay={true}\n              />\n              <Audio srcObject={remoteAudios[key]} autoPlay={true} />\n            </div>\n          ))}\n          {timerOn && (\n            <Timer\n              endTime={call.scheduledEnd}\n              className=\"absolute right-4 top-4 bg-opacity-80\"\n            />\n          )}\n          {!peerVideoOn && (\n            <Avatar size={128} className=\"bg-blue-500\tm-auto text-white\t\">\n              {getInitials(genFullName(call.userParticipants[0])).toUpperCase()}\n            </Avatar>\n          )}\n          {!peerAudioOn && (\n            <div className=\"absolute bottom-20 left-4 bg-black bg-opacity-50 py-1 px-2\">\n              <AudioMutedOutlined className=\"text-red-600 text-xs\" />\n              <Typography.Text className=\"text-white text-base\">\n                {\" \"}\n                {genFullName(call.userParticipants[0])}\n              </Typography.Text>\n            </div>\n          )}\n          {localVideo && localVideo.stream && !localVideo.paused ? (\n            <Video\n              srcObject={localVideo.stream}\n              className=\"w-2/12 absolute top-4 left-4 flex\"\n              autoPlay={true}\n            />\n          ) : (\n            <VideoMePlaceholder initials={getInitials(genFullName(user))} />\n          )}\n          {!participantHasJoined && (\n            <WaitingRoomCard\n              call={call}\n              title={getMessage()}\n              navigateBack={() => push(\"/\")}\n              openInfoModal={openInfoModal}\n              openTestConnectionModal={openTestConnectionModal}\n            />\n          )}\n          {showOverlay && (\n            <VideoOverlay\n              loading={!(localAudio && localVideo)}\n              audioOn={!!!localAudio?.paused}\n              toggleAudio={() => {\n                if (!roomClient || !localAudio) return;\n                showToast(\n                  \"microphone\",\n                  `You ${\n                    localAudio.paused ? \"unmuted\" : \"muted\"\n                  } your microphone`,\n                  \"info\"\n                );\n                localAudio.paused\n                  ? roomClient.resumeAudio()\n                  : roomClient.pauseAudio();\n              }}\n              videoOn={!!!localVideo?.paused}\n              toggleVideo={() => {\n                if (!roomClient || !localVideo) return;\n                showToast(\n                  \"webcam\",\n                  `You ${\n                    localVideo.paused ? \"turned on\" : \"turned off\"\n                  } your webcam`,\n                  \"info\"\n                );\n                localVideo.paused\n                  ? roomClient.resumeVideo()\n                  : roomClient.pauseVideo();\n              }}\n              chatCollapsed={chatCollapsed}\n              toggleChat={() => {\n                if (chatCollapsed) setHasUnreadMessages(false);\n                setChatCollapsed((collapsed) => !collapsed);\n              }}\n              timerOn={timerOn}\n              toggleTimer={() => setTimerOn((timerOn) => !timerOn)}\n              terminateCall={() => push(`/feedback/${call?.id}`)}\n              hasUnreadMessages={hasUnreadMessages}\n            />\n          )}\n        </div>\n        {!chatCollapsed && (\n          <Chat roomClient={roomClient} inmateId={user.id} call={call} />\n        )}\n      </Layout>\n    );\n  }\n);\nexport default CallBase;\n","import Call from \"./Call\";\n\nexport default Call;\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport { RootState, useAppDispatch, useAppSelector } from \"src/redux\";\nimport { connect, ConnectedProps, shallowEqual } from \"react-redux\";\nimport { RouteComponentProps } from \"react-router\";\nimport { push } from \"connected-react-router\";\nimport \"src/i18n/config\";\nimport {\n  enterFullScreen,\n  exitFullScreen,\n} from \"src/components/Common/commonSlice\";\nimport Call from \"src/components/Call\";\nimport { openModal } from \"src/redux/modules/modalsSlice\";\nimport { FAQResource } from \"src/types/UI\";\nimport {\n  initializeProducers,\n  initializeRemotes,\n  initializeVisit,\n} from \"src/redux/modules/call\";\nimport RoomClient from \"./RoomClient\";\nimport { ControlledStream } from \"src/types/Call\";\nimport { useCallById } from \"src/hooks/useCalls\";\n\ntype TParams = { id: string };\n\nconst CallBase: React.FC<RouteComponentProps<TParams>> = ({ match }) => {\n  const dispatch = useAppDispatch();\n  const stableDispatch = useCallback(dispatch, []);\n\n  const call = useCallById(parseInt(match.params.id));\n  const { authInfo, user } = useAppSelector((state) => state.session);\n\n  const [rc, setRc] = useState<RoomClient>();\n  const [localAudio, setLocalAudio] = useState<ControlledStream>();\n  const [localVideo, setLocalVideo] = useState<ControlledStream>();\n  const [remoteAudios, setRemoteAudios] = useState<Record<number, MediaStream>>(\n    {}\n  );\n  const [remoteVideos, setRemoteVideos] = useState<Record<number, MediaStream>>(\n    {}\n  );\n\n  const [hasInit, setHasInit] = useState(false);\n\n  useEffect(() => {\n    stableDispatch(enterFullScreen());\n    return () => {\n      stableDispatch(exitFullScreen());\n    };\n  }, [stableDispatch]);\n\n  useEffect(() => {\n    if (!call || hasInit || !call.videoHandler) return;\n    stableDispatch(\n      initializeVisit({\n        callId: call.id,\n        setRc,\n        authInfo,\n        videoHandler: call.videoHandler,\n      })\n    );\n  }, [call, stableDispatch, hasInit, authInfo]);\n\n  useEffect(() => {\n    if (!rc || hasInit) return;\n    stableDispatch(initializeRemotes({ rc, setRemoteAudios, setRemoteVideos }));\n    stableDispatch(\n      initializeProducers({ rc, setLocalAudio, setLocalVideo, setRc })\n    );\n    setHasInit(true);\n  }, [hasInit, stableDispatch, rc]);\n\n  if (!call) return <div />;\n\n  if (!rc || !hasInit) return <div />;\n\n  return (\n    <Call\n      call={call}\n      user={user}\n      push={(path: string) => dispatch(push(path))}\n      openInfoModal={(resource: FAQResource) =>\n        dispatch(openModal({ activeType: \"RESOURCE_MODAL\", entity: resource }))\n      }\n      openTestConnectionModal={() =>\n        dispatch(\n          openModal({ activeType: \"TEST_CONNECTION_MODAL\", entity: null })\n        )\n      }\n      roomClient={rc}\n      localAudio={localAudio}\n      localVideo={localVideo}\n      remoteAudios={remoteAudios}\n      remoteVideos={remoteVideos}\n    />\n  );\n};\n\nexport default CallBase;\n","import React, { ReactElement, useEffect } from \"react\";\nimport { Layout, Rate, Button, Space, Typography, Card } from \"antd\";\nimport {\n  HeartOutlined,\n  // FrownOutlined,\n  // SmileOutlined,\n  // MehOutlined,\n} from \"@ant-design/icons\";\nimport {\n  enterFullScreen,\n  exitFullScreen,\n} from \"src/components/Common/commonSlice\";\nimport { useAppDispatch } from \"src/redux\";\n\nconst desc = [\"terrible\", \"bad\", \"normal\", \"good\", \"wonderful\"];\n// const customIcons = {\n//   1: <FrownOutlined style={{ fontSize: 36 }} />,\n//   2: <FrownOutlined style={{ fontSize: 36 }} />,\n//   3: <MehOutlined style={{ fontSize: 36 }} />,\n//   4: <SmileOutlined style={{ fontSize: 36 }} />,\n//   5: <SmileOutlined style={{ fontSize: 36 }} />,\n// };\n\nfunction CallFeedbackBase(): ReactElement {\n  const dispatch = useAppDispatch();\n\n  useEffect(() => {\n    dispatch(enterFullScreen());\n\n    return () => {\n      dispatch(exitFullScreen());\n    };\n  }, [dispatch]);\n\n  return (\n    <Layout.Content\n      style={{\n        backgroundColor: \"white\",\n        height: \"100vh\",\n        width: \"100vw\",\n        display: \"flex\",\n      }}\n    >\n      <Space\n        direction=\"vertical\"\n        align=\"center\"\n        style={{ margin: \"auto\" }}\n        size=\"large\"\n      >\n        <Typography.Title level={2}>You left the meeting.</Typography.Title>\n        <Space>\n          <Button size=\"large\">Rejoin</Button>\n          <Button type=\"primary\" size=\"large\">\n            Return home\n          </Button>\n        </Space>\n        <Card title=\"How was the audio and video?\">\n          <Rate\n            character={<HeartOutlined style={{ fontSize: 36 }} />}\n            tooltips={desc}\n          />\n        </Card>\n      </Space>\n    </Layout.Content>\n  );\n}\n\nexport default CallFeedbackBase;\n","import { Icebreaker, Quote, Route } from \"src/types/Common\";\nimport ProfilePage from \"src/pages/Profile\";\nimport CallsPage from \"src/pages/Calls\";\nimport SettingsPage from \"src/pages/Settings\";\nimport DashboardPage from \"src/pages/Dashboard\";\nimport CallPage from \"src/pages/Call\";\nimport CallFeedbackPage from \"src/pages/CallFeedback\";\nimport { Language } from \"src/types/Session\";\n\nexport const UNAUTHENTICATED_USER_ID = -1;\n\nexport const AVATAR_LARGE = 135;\n\nexport const ROUTES: Route[] = [\n  { path: \"/calls\", component: CallsPage, label: \"Calls\" },\n  { path: \"/settings\", component: SettingsPage, label: \"Settings\" },\n  { path: \"/profile/:id\", component: ProfilePage, label: \"Profile\" },\n  { path: \"/call/:id\", component: CallPage, label: \"Call\" },\n  { path: \"/feedback/:id\", component: CallFeedbackPage, label: \"Feedback\" },\n  { path: \"/\", component: DashboardPage, label: \"Dash\" },\n];\n\nexport const TOKEN_KEY = \"apiToken\";\n\nexport const WRAPPER_PADDING = { padding: 24, paddingTop: 0 };\n\nexport const QUOTES: Quote[] = [\n  {\n    author: \"Mary Ann Evans\",\n    quote: \"It is never too late to be what you might have been.\",\n    description: \"\",\n    background:\n      \"https://images.unsplash.com/photo-1536257104079-aa99c6460a5a?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80\",\n  },\n  {\n    author: \"Walt Disney\",\n    quote:\n      \"All our dreams can come true, if we have the courage to pursue them.\",\n    description: \"\",\n    background:\n      \"https://images.unsplash.com/photo-1508556497405-ed7dcd94acfc?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80\",\n  },\n  {\n    author: \"Mark Twain\",\n    quote: \"The secret of getting ahead is getting started\",\n    description: \"\",\n    background:\n      \"https://images.unsplash.com/photo-1532971077387-7c6568101df5?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80\",\n  },\n  {\n    author: \"Babe Ruth\",\n    quote: \"Its hard to beat a person who never gives up.\",\n    description: \"\",\n    background:\n      \"https://images.unsplash.com/photo-1564521456797-9f176245daa9?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1951&q=80\",\n  },\n];\n\nexport const LANGUAGES: Record<Language, string> = {\n  en: \"English\",\n  es: \"Espaol\",\n};\n\nexport const QUESTIONS: Icebreaker[] = [\n  {\n    en: \"If you had your own intro theme song, which song would it be and why?\",\n    es: \"If you had your own intro theme song, which song would it be and why?\",\n  },\n];\n","import { UNAUTHENTICATED_USER_ID } from \"src/utils/constants\";\nimport { User } from \"src/types/User\";\nimport { Language } from \"src/types/Session\";\n\ninterface AuthInfo {\n  id: number;\n  type: \"inmate\";\n  token: string;\n}\n\ninterface SessionState {\n  isLoggedIn: boolean;\n  authInfo: AuthInfo;\n  user: User;\n  language: Language;\n}\n\n// Constants & Shapes\nconst SET_SESSION = \"user/SET_SESSION\";\nconst LOGOUT = \"user/LOGOUT\";\n\ninterface SetSessionAction {\n  type: typeof SET_SESSION;\n  payload: SessionState;\n}\ninterface LogoutAction {\n  type: typeof LOGOUT;\n}\n\ntype UserActionTypes = LogoutAction | SetSessionAction;\n\nexport const logout = (): UserActionTypes => {\n  return {\n    type: LOGOUT,\n  };\n};\n\nexport const setSession = (userState: SessionState): UserActionTypes => {\n  return {\n    type: SET_SESSION,\n    payload: userState,\n  };\n};\n\n// Reducer\nconst initialState: SessionState = {\n  authInfo: { id: UNAUTHENTICATED_USER_ID, type: \"inmate\", token: \"\" },\n  user: {\n    id: UNAUTHENTICATED_USER_ID,\n    firstName: \"\",\n    lastName: \"\",\n    location: \"\",\n    dateOfBirth: \"\",\n    inmateIdentification: \"\",\n    quota: 0,\n    race: \"\",\n  },\n  isLoggedIn: false,\n  language: \"en\",\n};\n\nexport function sessionReducer(\n  state = initialState,\n  action: UserActionTypes\n): SessionState {\n  switch (action.type) {\n    case SET_SESSION:\n      return action.payload;\n    case LOGOUT:\n      //   sessionStorage.clear();\n      return {\n        ...state,\n        authInfo: { id: UNAUTHENTICATED_USER_ID, type: \"inmate\", token: \"\" },\n        user: {\n          id: UNAUTHENTICATED_USER_ID,\n          firstName: \"\",\n          lastName: \"\",\n          location: \"\",\n          dateOfBirth: \"\",\n          inmateIdentification: \"\",\n          quota: 0,\n          race: \"\",\n        },\n        isLoggedIn: false,\n      };\n    default:\n      return state;\n  }\n}\n","import {\n  createSlice,\n  createEntityAdapter,\n  createAsyncThunk,\n} from \"@reduxjs/toolkit\";\nimport camelcaseKeys from \"camelcase-keys\";\nimport { Connection } from \"src/types/Connection\";\nimport { fetchAuthenticated } from \"src/api/Common\";\n\nexport const fetchConnections = createAsyncThunk(\n  \"connections/fetchAll\",\n  async () => {\n    const body = await fetchAuthenticated(`connections`);\n    const connections = ((body.data as Record<string, unknown>)\n      .connections as Connection[]).map((inmate) => camelcaseKeys(inmate));\n\n    return connections;\n  }\n);\n\nexport const connectionAdapter = createEntityAdapter<Connection>();\n\nexport const connectionSlice = createSlice({\n  name: \"connection\",\n  initialState: connectionAdapter.getInitialState(),\n  reducers: {},\n  extraReducers: (builder) => {\n    builder.addCase(fetchConnections.fulfilled, (state, action) => {\n      connectionAdapter.setAll(state, action.payload);\n    });\n  },\n});\n\nexport const connectionActions = connectionSlice.actions;\n","import { connectRouter, routerMiddleware } from \"connected-react-router\";\nimport { combineReducers } from \"redux\";\nimport { History, createBrowserHistory } from \"history\";\nimport { configureStore } from \"@reduxjs/toolkit\";\nimport { sessionReducer } from \"./modules/session\";\nimport { callSlice } from \"./modules/call\";\nimport { connectionSlice } from \"./modules/connection\";\nimport { modalsSlice } from \"src/redux/modules/modalsSlice\";\nimport { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\nimport { commonSlice } from \"src/components/Common/commonSlice\";\nimport { contactsSlice } from \"./modules/contactsSlice\";\n\nexport const history = createBrowserHistory();\n\nexport const createRootReducer = (history: History) =>\n  combineReducers({\n    common: commonSlice.reducer,\n    session: sessionReducer,\n    calls: callSlice.reducer,\n    contacts: contactsSlice.reducer,\n    modals: modalsSlice.reducer,\n    connections: connectionSlice.reducer,\n    router: connectRouter(history),\n  });\nexport const rootReducer = createRootReducer(history);\n\nexport const Store = configureStore({\n  reducer: rootReducer,\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware().concat(routerMiddleware(history)),\n});\n\nexport type RootState = ReturnType<typeof rootReducer>;\nexport type AppDispatch = typeof Store.dispatch;\nexport const useAppDispatch = () => useDispatch<AppDispatch>(); // Export a hook that can be reused to resolve types\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n","import * as React from \"react\";\nimport { Redirect, Route, RouteProps } from \"react-router\";\n\nexport interface ProtectedRouteProps extends RouteProps {\n  isAuthenticated: boolean;\n  authenticationPath: string;\n}\n\nexport const ProtectedRoute: React.FC<ProtectedRouteProps> = (props) => {\n  let redirectPath = \"\";\n  if (!props.isAuthenticated) {\n    redirectPath = props.authenticationPath;\n  }\n\n  if (redirectPath) {\n    const renderComponent = () => <Redirect to={{ pathname: redirectPath }} />;\n    return <Route {...props} component={renderComponent} render={undefined} />;\n  } else {\n    return <Route {...props} />;\n  }\n};\n\nexport default ProtectedRoute;\n","import { API_URL, fetchTimeout } from \"./Common\";\nimport { setSession } from \"src/redux/modules/session\";\nimport { Store } from \"src/redux\";\nimport { User } from \"src/types/User\";\nimport { Language } from \"src/types/Session\";\n\nasync function initializeSession(token: string, data: any, language: Language) {\n  const user: User = {\n    id: data.id,\n    firstName: data.firstName,\n    lastName: data.lastName,\n    dateOfBirth: data.dateOfBirth,\n    profileImagePath: data.profileImagePath,\n    inmateIdentification: data.inmateIdentification,\n    quota: data.quota,\n    location: data.location,\n    race: data.race,\n  };\n  Store.dispatch(\n    setSession({\n      user,\n      authInfo: { id: data.id, type: \"inmate\", token },\n      isLoggedIn: true,\n      language,\n    })\n  );\n}\n\nexport async function loginWithCredentials(cred: {\n  inmateNumber: string;\n  pin: string;\n  facilityId: number;\n  language: Language;\n}): Promise<void> {\n  const response = await fetchTimeout(`${API_URL}auth/member/login/`, {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n    },\n    credentials: \"include\",\n    body: JSON.stringify({\n      facilityId: cred.facilityId,\n      inmateIdentification: cred.inmateNumber,\n      pin: cred.pin,\n    }),\n  });\n  const body = await response.json();\n  const cookies = response.headers.get(\"cookie\") || \"\";\n  const re = /(?<=connect.sid=)([^\\s;]+)/gm;\n  const found = cookies.match(re);\n  if (!found || found.length !== 1) throw new Error(\"Cannot find header token\");\n  await initializeSession(found[0], body.data, cred.language);\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"style\", null, \".cls-1,.cls-2{fill:#0073eb;stroke:#fff;stroke-miterlimit:10;stroke-width:3px;}.cls-2{opacity:0.7;}.cls-3{fill:#1a1a1a;}\"));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-1\",\n  d: \"M111.83,48.88h0l-8.38,20.22L98.27,81.58l0,0v.08L91.48,98h0L90,101.55h0l-2.9,7-.6-2.23-.64-2.43-4-15.27L71,47.66l-1.6-6.1L63.79,20.1Z\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"cls-2\",\n  points: \"87.09 108.56 85.99 107.12 84.4 105.05 77.65 96.2 71.96 88.74 50.31 60.32 41.21 48.39 71.04 47.66 81.83 88.63 85.85 103.9 86.49 106.33 87.09 108.56\"\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"cls-1\",\n  points: \"67.95 154.72 59.71 174.61 29.58 171.5 58.55 149.76 64.48 145.32 75.17 137.31 67.96 154.69 67.95 154.72\"\n});\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-1\",\n  d: \"M134.41,137.69h0L81.75,151.16l-2.83.73-11,2.8,7.21-17.38h0l2.27-5.48h0l9.54-23,.1-.23h0l2.9-7h0L91.47,98h0l6.75-16.29h0l0-.09,5.17-12.47,8.38-20.22h0l4,15.53,4.51,17.78,4.95,19.43,3,11.89h0Z\"\n});\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"cls-1\",\n  points: \"161.52 72.3 156.34 84.79 151.4 96.73 147.81 105.36 146.74 107.93 146.74 107.94 134.41 137.69 128.27 113.52 128.26 113.52 125.24 101.63 120.29 82.2 120.3 82.19 121.87 81.82 141.5 77.1 160.2 72.62 161.52 72.3\"\n});\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"cls-2\",\n  points: \"187.8 89.91 179.44 91.47 170.42 93.17 170.41 93.16 151.4 96.73 156.34 84.79 161.52 72.3 162.14 72.71 187.8 89.91\"\n});\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-3\",\n  d: \"M234.77,211.91h-17.2L209.18,190H163l-8.4,21.88H137.37l38.93-98.23h19.54Zm-66-36.73H203.4l-17.33-45.27Z\"\n});\n\nvar _ref10 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-3\",\n  d: \"M259.67,211.91H245V161.28h-5.64V148.07h11.83l6.19,6.2c5.5-4.54,12.24-7.43,18.57-7.43a20.61,20.61,0,0,1,17.34,8.66,31.53,31.53,0,0,1,21-8.66c11.7,0,22.43,8,22.43,26.55v38.52H322V173.39c0-8.39-4.54-12.93-11.28-12.93-7.57,0-12.52,4.54-12.52,10.59v40.86H283.61V173.39c0-8.39-4.68-12.93-11.29-12.93-7.42,0-12.65,4.4-12.65,10.18Z\"\n});\n\nvar _ref11 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-3\",\n  d: \"M393.53,190.72l12.1,6.61c-4.95,8.39-14.17,16.09-26.82,16.09-18.3,0-31.37-15.41-31.37-33.29s13.07-33.57,31.23-33.57,29.44,15.27,30,31.92l-5.5,5.36H362.3c.82,9.5,8.11,15.82,16.51,15.82C384.58,199.66,390.36,196,393.53,190.72ZM363,172.15h30.95c-1-7.15-7.43-12.52-15.27-12.52A15.72,15.72,0,0,0,363,172.15Z\"\n});\n\nvar _ref12 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-3\",\n  d: \"M461.76,190.72l12.11,6.61c-4.95,8.39-14.17,16.09-26.83,16.09-18.3,0-31.37-15.41-31.37-33.29s13.07-33.57,31.23-33.57,29.44,15.27,30,31.92l-5.5,5.36H430.53c.83,9.5,8.12,15.82,16.51,15.82C452.82,199.66,458.6,196,461.76,190.72Zm-30.54-18.57h30.95c-1-7.15-7.42-12.52-15.27-12.52A15.72,15.72,0,0,0,431.22,172.15Z\"\n});\n\nvar _ref13 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-3\",\n  d: \"M489.41,113.68l4.82-5h10.18V197.6h5.64v14.31H495.6l-6.19-6.33Z\"\n});\n\nvar _ref14 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-3\",\n  d: \"M540.73,211.91H526V161.28h-5.5V148.07h15l5.23,5.23ZM532,112a10.49,10.49,0,0,1,10.39,10.39A10.37,10.37,0,0,1,532,132.67a10.25,10.25,0,0,1-10.25-10.26A10.37,10.37,0,0,1,532,112Z\"\n});\n\nvar _ref15 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-3\",\n  d: \"M620,180a33.36,33.36,0,1,1-33.29-33.29A33.35,33.35,0,0,1,620,180Zm-15,0c0-10.32-7.71-19.12-18.3-19.12s-18.44,8.8-18.44,19.12,7.85,19.26,18.44,19.26S605,190.31,605,180Z\"\n});\n\nfunction SvgLogo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Golden_Grid\",\n    \"data-name\": \"Golden Grid\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 666.85 257.93\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogo);\nexport default __webpack_public_path__ + \"static/media/logo.31994bf9.svg\";\nexport { ForwardRef as ReactComponent };","export const BORDER_RADIUS = { borderRadius: 8 };\n","import React, { ReactElement, useEffect, useState } from \"react\";\nimport { RootState } from \"src/redux\";\nimport { connect, ConnectedProps } from \"react-redux\";\nimport {\n  Input,\n  Layout,\n  Button,\n  Form,\n  Typography,\n  Space,\n  Row,\n  Radio,\n  Col,\n  Select,\n} from \"antd\";\nimport { Redirect } from \"react-router\";\nimport { loginWithCredentials } from \"src/api/User\";\nimport { LockOutlined, UserOutlined } from \"@ant-design/icons\";\nimport { getRandomItem, showToast } from \"src/utils/utils\";\nimport { ReactComponent as Logo } from \"src/assets/logo.svg\";\nimport \"./index.css\";\nimport \"src/i18n/config\";\nimport { useTranslation } from \"react-i18next\";\nimport { LANGUAGES, QUOTES } from \"src/utils/constants\";\nimport { BORDER_RADIUS } from \"src/styles/Layout\";\nimport { Quote } from \"src/types/Common\";\nimport { fetchFacilities } from \"src/api/Common\";\nimport { FacilityRO } from \"src/api/interfaces/apiResponses\";\n\nconst { Content } = Layout;\n\nconst mapStateToProps = (state: RootState) => ({\n  session: state.session,\n});\n\nconst mapDispatchToProps = {};\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\ntype PropsFromRedux = ConnectedProps<typeof connector>;\n\nconst FORM_LAYOUT = {\n  labelCol: { flex: \"95px\" },\n  wrapperCol: { flex: 1 },\n};\n\nconst FORM_TAIL_LAYOUT = {\n  wrapperCol: { span: 24 },\n};\n\nfunction LoginContainer({ session }: PropsFromRedux): ReactElement {\n  const { t, i18n } = useTranslation(\"login\");\n  const { Option } = Select;\n\n  const [dailyQuote] = useState(getRandomItem(QUOTES) as Quote);\n  const [facilities, setFacilities] = useState<FacilityRO[]>([]);\n\n  useEffect(() => {\n    const getFacilityOptions = async () => {\n      const response = await fetchFacilities();\n      setFacilities(response.data.results);\n    };\n    getFacilityOptions();\n  }, []);\n\n  if (session.isLoggedIn) {\n    return <Redirect to=\"/\" />;\n  }\n\n  const onFinish = async (values: any) => {\n    try {\n      await loginWithCredentials({\n        inmateNumber: values.inmateNumber,\n        pin: values.pin,\n        facilityId: values.facilityId,\n        language: values.language,\n      });\n    } catch (err) {\n      showToast(\"login_error\", \"Invalid ID or Pin Code\", \"error\");\n    }\n  };\n\n  const onFinishFailed = (_errorInfo: any) => {\n    showToast(\"login_error\", \"Invalid ID or Pin Code\", \"error\");\n  };\n\n  const facilityOptions = facilities.map((facility: FacilityRO) => (\n    <Option key={`option-${facility.id}`} value={facility.id}>\n      {facility.name}\n    </Option>\n  ));\n\n  return (\n    <Content\n      className=\"d-flex flex-column banner-background\"\n      style={{\n        backgroundImage: `url(${dailyQuote.background})`,\n      }}\n    >\n      <div className=\"login-form-container m-auto\" style={BORDER_RADIUS}>\n        <Space direction=\"vertical\" size=\"large\">\n          <Row>\n            <Logo className=\"login-logo\" />\n          </Row>\n          <Row justify=\"center\">\n            <Col>\n              <Typography.Text>\n                {t(\"caption\")}{\" \"}\n                <Typography.Link href=\"/tos.pdf\" target=\"_blank\">\n                  {t(\"tos\")}{\" \"}\n                </Typography.Link>\n                {t(\"and\")}{\" \"}\n                <Typography.Link href=\"/privacy_policy.pdf\" target=\"_blank\">\n                  {t(\"pp\")}.\n                </Typography.Link>{\" \"}\n              </Typography.Text>\n            </Col>\n          </Row>\n\n          <Form\n            {...FORM_LAYOUT}\n            name=\"login\"\n            className=\"w-full rounded-lg\"\n            onFinish={onFinish}\n            onFinishFailed={onFinishFailed}\n            initialValues={{\n              language: Object.keys(LANGUAGES)[0],\n            }}\n          >\n            <Form.Item\n              label=\"Language\"\n              name=\"language\"\n              rules={[{ required: true, message: \"Language is required.\" }]}\n            >\n              <Radio.Group\n                className=\"w-100\"\n                onChange={(e) => i18n.changeLanguage(e.target.value)}\n              >\n                {Object.entries(LANGUAGES).map(([key, value]) => (\n                  <Radio.Button key={key} value={key}>\n                    {value}\n                  </Radio.Button>\n                ))}\n              </Radio.Group>\n            </Form.Item>\n\n            <Form.Item\n              name=\"inmateNumber\"\n              label=\"ID Number\"\n              rules={[{ required: true, message: \"Inmate ID is required.\" }]}\n            >\n              <Input\n                prefix={<UserOutlined />}\n                placeholder={t(\"placeholder.inmateNumber\")}\n              />\n            </Form.Item>\n\n            <Form.Item\n              label=\"PIN Code\"\n              name=\"pin\"\n              rules={[{ required: true, message: \"Password is required.\" }]}\n            >\n              <Input.Password\n                prefix={<LockOutlined />}\n                placeholder={t(\"placeholder.pinCode\")}\n              />\n            </Form.Item>\n            <Form.Item\n              name=\"facilityId\"\n              label=\"Facility\"\n              rules={[\n                { required: true, message: \"Facility must be selected.\" },\n              ]}\n            >\n              <Select>{facilityOptions}</Select>\n            </Form.Item>\n\n            <Form.Item {...FORM_TAIL_LAYOUT} style={{ borderRadius: 4 }}>\n              <Button type=\"primary\" htmlType=\"submit\" size=\"large\">\n                {t(\"buttonText\")}\n              </Button>\n            </Form.Item>\n          </Form>\n        </Space>\n      </div>\n    </Content>\n  );\n}\n\nexport default connector(LoginContainer);\n","import React, { ReactElement } from \"react\";\nimport { Menu, Layout, Space, Row, Avatar, Typography, Divider } from \"antd\";\nimport {\n  EllipsisOutlined,\n  HomeOutlined,\n  ScheduleOutlined,\n} from \"@ant-design/icons\";\nimport { User } from \"src/types/User\";\nimport { ReactComponent as Logo } from \"src/assets/logo.svg\";\nimport { genFullName } from \"src/utils/utils\";\n\nconst { Sider } = Layout;\ninterface Props {\n  user: User;\n  navigate: (path: string) => void;\n}\n\nexport default function Sidebar({ user, navigate }: Props): ReactElement {\n  return (\n    <Sider theme=\"light\" className=\"shadow-lg\">\n      <Space direction=\"vertical\" className=\"w-full\">\n        <Row className=\"p-2 cursor-pointer\" onClick={() => navigate(\"/\")}>\n          <Logo className=\"login-logo\" />\n        </Row>\n        <Row\n          align=\"middle\"\n          className=\"pl-4 cursor-pointer\"\n          onClick={() => navigate(`/profile/${user.id}`)}\n        >\n          <Space>\n            <Avatar src={user.profileImagePath} size=\"large\" />\n            <Typography.Text>{genFullName(user)}</Typography.Text>\n          </Space>\n        </Row>\n        <Menu mode=\"inline\" defaultSelectedKeys={[\"home\"]} className=\"w-full\">\n          <Menu.Item\n            key=\"home\"\n            icon={<HomeOutlined />}\n            onClick={() => navigate(\"/\")}\n          >\n            Home\n          </Menu.Item>\n          <Menu.Item\n            key=\"calls\"\n            icon={<ScheduleOutlined />}\n            onClick={() => navigate(\"/calls\")}\n          >\n            Calls\n          </Menu.Item>\n          <Divider />\n          <Menu.Item\n            key=\"settings\"\n            icon={<EllipsisOutlined />}\n            onClick={() => navigate(\"/settings\")}\n          >\n            Settings\n          </Menu.Item>\n        </Menu>\n      </Space>\n    </Sider>\n  );\n}\n","import CancelCallModal from \"./CancelCallModal\";\n\nexport default CancelCallModal;\n","import { Space, Row, Col, Typography, Select } from \"antd\";\nimport Modal from \"antd/lib/modal/Modal\";\nimport { differenceInMinutes, format } from \"date-fns\";\nimport React from \"react\";\nimport { genFullName } from \"src/utils/utils\";\nimport { useTranslation } from \"react-i18next\";\nimport { CancelCallModalData } from \"src/types/UI\";\n\ninterface Props {\n  data: CancelCallModalData;\n  closeModal: () => void;\n}\n\nconst CancelCallModal: React.FC<Props> = ({ data, closeModal }) => {\n  const { t } = useTranslation(\"modals\");\n  const call = data.entity;\n  const fullName = genFullName(call.userParticipants[0]);\n  const startDate = format(new Date(call.scheduledStart), \"EEEE, MMMM d\");\n  const startTime = format(new Date(call.scheduledStart), \"h:mm aaa OOO\");\n  const duration =\n    call &&\n    differenceInMinutes(\n      new Date(call.scheduledEnd),\n      new Date(call.scheduledEnd)\n    );\n  const firstName = call.userParticipants[0].firstName;\n\n  return (\n    <Modal\n      title={t(\"cancelCallModal.title\")}\n      visible={true}\n      okText={t(\"cancelCallModal.okText\")}\n      onOk={closeModal}\n      onCancel={closeModal}\n      className=\"rounded-sm\"\n    >\n      <Space direction=\"vertical\" size=\"large\">\n        <Row>\n          <Typography.Text>\n            {t(\"cancelCallModal.messageOne\", { connectionName: fullName })}\n          </Typography.Text>\n        </Row>\n        <Row>\n          <Col>\n            <div>\n              <Typography.Text>{startDate}</Typography.Text>\n            </div>\n            <div>\n              <Typography.Text>\n                {startTime}  {`${duration}mins`}\n              </Typography.Text>\n            </div>\n          </Col>\n        </Row>\n        <Row>\n          <Typography.Text>\n            {t(\"cancelCallModal.messageTwo\", {\n              connectionFirstName: firstName,\n            })}\n          </Typography.Text>\n        </Row>\n        <Row />\n      </Space>\n      <Select\n        className=\"w-full\"\n        placeholder={t(\"cancelCallModal.dropdownPlaceholder\")}\n      ></Select>\n    </Modal>\n  );\n};\n\nexport default CancelCallModal;\n","import InformationalModal from \"./InformationalModal\";\n\nexport default InformationalModal;\n","import React from \"react\";\nimport { Typography, Modal } from \"antd\";\nimport { ResourceModalData } from \"src/types/UI\";\n\ninterface Props {\n  data: ResourceModalData;\n  closeModal: () => void;\n}\n\nconst InformationalModal: React.FC<Props> = ({ data, closeModal }) => {\n  const resource = data.entity;\n  return (\n    <Modal\n      title={resource.title}\n      visible={true}\n      okText={resource.okBtnText || \"OK\"}\n      cancelButtonProps={{\n        style: { display: data.entity.hideCancel ? \"none\" : \"inline\" },\n      }}\n      onOk={closeModal}\n      onCancel={closeModal}\n      className=\"rounded-sm w-full\"\n    >\n      <Typography.Text>{resource.body}</Typography.Text>\n    </Modal>\n  );\n};\n\nexport default InformationalModal;\n","import TestConnectionModal from \"./TestConnectionModal\";\n\nexport default TestConnectionModal;\n","import React, { useEffect, useState } from \"react\";\nimport { Typography, Modal } from \"antd\";\nimport { useTranslation } from \"react-i18next\";\nimport { TestConnectionModalData } from \"src/types/UI\";\nimport Video from \"src/components/Call/Video\";\nimport Audio from \"src/components/Call/Audio\";\nimport { getMedia } from \"src/utils\";\n// import { VolumeContainer } from \"src/components/Call/VolumeContainer\";\n\ninterface Props {\n  data: TestConnectionModalData;\n  closeModal: () => void;\n}\n\nconst TestConnectionModal = ({ data, closeModal }: Props) => {\n  const { t } = useTranslation(\"call\");\n\n  const [audio, setAudio] = useState<MediaStream>();\n  const [video, setVideo] = useState<MediaStream>();\n\n  useEffect(() => {\n    (async () => {\n      setAudio(await getMedia(\"audio\"));\n      setVideo(await getMedia(\"video\"));\n    })();\n  }, []);\n\n  useEffect(() => {\n    return () => {\n      if (audio) {\n        const tracks = audio.getTracks();\n        tracks.forEach((track) => {\n          track.stop();\n        });\n      }\n      if (video) {\n        const tracks = video.getTracks();\n        tracks.forEach((track) => {\n          track.stop();\n        });\n      }\n    };\n  }, [audio, video]);\n\n  if (data.activeType !== \"TEST_CONNECTION_MODAL\") return <div />;\n\n  return (\n    <Modal\n      title={t(\"testConnection.title\")}\n      visible={true}\n      cancelButtonProps={{\n        style: { display: \"none\" },\n      }}\n      onOk={closeModal}\n      className=\"rounded-sm w-full\"\n    >\n      {video ? (\n        <Video srcObject={video} className=\"w-full\" autoPlay={true} />\n      ) : (\n        <div />\n      )}\n      {audio ? <Audio srcObject={audio} /> : <div />}\n      <Typography.Text>{\"\"}</Typography.Text>\n      {/* TODO figure out what's the best way to implement this */}\n      {/* <VolumeContainer audioVolume={audioVolume} className=\"absolute left-2 top-4\"/> */}\n    </Modal>\n  );\n};\n\nexport default TestConnectionModal;\n","import React from \"react\";\nimport { useAppDispatch, useAppSelector } from \"src/redux\";\nimport { closeModal } from \"src/redux/modules/modalsSlice\";\nimport CancelCallModal from \"./CancelCallModal\";\nimport InformationalModal from \"./InformationalModal\";\nimport TestConnectionModal from \"./TestConnectionModal\";\n\nconst Modals: React.FC = () => {\n  const dispatch = useAppDispatch();\n  const data = useAppSelector((state) => state.modals.data);\n\n  switch (data.activeType) {\n    case \"CANCEL_CALL_MODAL\":\n      return (\n        <CancelCallModal\n          closeModal={() => dispatch(closeModal())}\n          data={data}\n        />\n      );\n    case \"RESOURCE_MODAL\":\n      return (\n        <InformationalModal\n          closeModal={() => dispatch(closeModal())}\n          data={data}\n        />\n      );\n    case \"TEST_CONNECTION_MODAL\":\n      return (\n        <TestConnectionModal\n          closeModal={() => dispatch(closeModal())}\n          data={data}\n        />\n      );\n    default:\n      return null;\n  }\n};\n\nexport default Modals;\n","import React from \"react\";\nimport \"./App.scss\";\nimport { useAppSelector } from \"src/redux\";\nimport { connect, ConnectedProps } from \"react-redux\";\nimport { ConnectedRouter, push } from \"connected-react-router\";\nimport { Layout } from \"antd\";\nimport { Redirect, Route, Switch } from \"react-router\";\nimport { History } from \"history\";\nimport ProtectedRoute, {\n  ProtectedRouteProps,\n} from \"./components/Hocs/ProtectedRoute\";\nimport LoginPage from \"src/pages/Login\";\nimport { ROUTES } from \"./utils/constants\";\nimport { useEffect } from \"react\";\nimport { fetchContacts } from \"./redux/modules/contactsSlice\";\nimport Sidebar from \"./components/Menu/Sidebar\";\nimport { useTranslation } from \"react-i18next\";\nimport Modals from \"./components/Modals/Modals\";\n\nconst mapDispatchToProps = { fetchContacts, push };\n\nconst connector = connect(null, mapDispatchToProps);\n\ntype PropsFromRedux = ConnectedProps<typeof connector>;\n\nfunction App({\n  history,\n  fetchContacts,\n  push,\n}: PropsFromRedux & { history: History }) {\n  const { i18n } = useTranslation();\n  const hasSideBar = useAppSelector((state) => state.common.fullScreen);\n  const session = useAppSelector((state) => state.session);\n\n  const defaultProtectedRouteProps: ProtectedRouteProps = {\n    isAuthenticated: session.isLoggedIn, // TODO: improve this later\n    authenticationPath: \"/login\",\n  };\n\n  const showSideBar = session.isLoggedIn && !hasSideBar;\n\n  useEffect(() => {\n    if (session.isLoggedIn) fetchContacts();\n  }, [session.isLoggedIn, fetchContacts]);\n\n  useEffect(() => {\n    i18n.changeLanguage(session.language);\n  }, [session.language, i18n]);\n\n  return (\n    <ConnectedRouter history={history}>\n      <Modals />\n      <Layout style={{ minHeight: \"100vh\" }}>\n        {showSideBar && <Sidebar user={session.user} navigate={push} />}\n        <Layout>\n          <Switch>\n            <Route exact path=\"/login\" component={LoginPage}></Route>\n            {ROUTES.map((route) => (\n              <ProtectedRoute\n                exact\n                {...defaultProtectedRouteProps}\n                path={route.path}\n                component={route.component}\n                key={route.label}\n              ></ProtectedRoute>\n            ))}\n            <Redirect to=\"/login\" />\n          </Switch>\n          {/* <Footer style={{ textAlign: \"center\" }}>\n            Connect 2021 Created by Ameelio Inc.\n          </Footer> */}\n        </Layout>\n      </Layout>\n    </ConnectedRouter>\n  );\n}\n\nexport default connector(App);\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { Provider } from \"react-redux\";\nimport { history, Store } from \"./redux\";\nimport \"./styles/tailwind.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={Store}>\n      <App history={history} />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}