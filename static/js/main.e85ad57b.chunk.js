(this["webpackJsonppathways-client"]=this["webpackJsonppathways-client"]||[]).push([[0],{293:function(e){e.exports=JSON.parse('{"privacyNotice":{"title":"Privacy Notice","body":"I understand that by joining this call, I am consenting to the monitoring and recording of it for security purposes. In addition, I understand that if I violate any facility calling policies, my call may be terminated.","okText":"Agree"},"call":{"title":"Upcoming Calls","seeAll":"See All","noCalls":"Upcoming calls will appear here when your contacts schedule a call with you.","upcomingCalls":"upcoming call","minutes":"minutes","ago":"ago","join":"Join Now","seeDetails":"See Details","cancelDescription":"Can\u2019t make this time? You can cancel this call and select a cancellation reason to send to your contact.","cancel":"Cancel","whatToExpect":"What to expect for my call","privacyNotice":"Privacy Notice"},"connection":{"active":"Active","pending":"Pending","title":"Contacts","lastCall":"Last call: {{daysPastNum}} days ago"}}')},294:function(e){e.exports=JSON.parse('{"profileInfo":{"editProfile":"Edit Profile","about":"About","history":"History","name":"Name","home":"Home","birthday":"Birthday","totalCalls":"Total Calls","totalMinutes":"Total Minutes Talked"}}')},295:function(e){e.exports=JSON.parse('{"profileInfo":{"editProfile":"Editar Perfil","about":"About","history":"Historia","name":"Nombre","home":"Home","birthday":"Birthday","totalCalls":"Total Calls","totalMinutes":"Total Minutes Talked"}}')},296:function(e){e.exports=JSON.parse('{"doc":{"warning":"DOC Warning"},"peer":{"joinedCallTitle":"joined the call","joinedCallBody":"Your call will connect soon.","muted":"muted their mic","unmuted":"unmuted their mic","videoOn":"turned on their video","videoOff":"turned off their video"},"waitingRoom":{"questionOfDay":"Question of the day","initialization":"Initializing video call...","waitingForPrefix":"Waiting for","waitingForSuffix":"to join the call","loading":"Loading...","whenWillCallConnect":"When will my call connect?","checkConnection":"Check Connection","leaveWaitingRoom":"Leave Waiting Room"},"chat":{"title":"Chat","placeholder":"Type here...","monitorWarning":"Note: All messages are monitored for security purposes."},"videoOverlay":{"on":"On","off":"off","chat":"Chat","video":"Video","mic":"Mic","showTime":"Show Time","hideTime":"Hide Time","leaveCall":"Leave Call"},"you":{"You":"You","enabledWebcam":"turned on your webcam","disabledWebcam":"turned off your webcam","mutedMic":"muted your microphone","unmutedMic":"unmuted your microphone"},"testConnection":{"title":"Check Your Audio & Video"}}')},297:function(e){e.exports=JSON.parse('{"callLimit":"Daily call limit","cancel":"Cancel"}')},298:function(e){e.exports=JSON.parse('{"title":"Welcome to pathways","caption":"To login, please enter your ID number and 6-digit PIN code. By using Ameelio Connect, you agree to","tos":"Terms of Service","pp":"Privacy Policy","and":"and","buttonText":"Login","placeholder":{"inmateNumber":"Inmate Number","pinCode":"Pin Code"}}')},299:function(e){e.exports=JSON.parse('{"title":"Bienvenido a Ameelio","buttonText":"Iniciar Sesi\xf3n","caption":"Para iniciar sesi\xf3n, ingresa tu n\xfamero de identificaci\xf3n y el c\xf3digo PIN. Al utilizar Ameelio Connect, acepta la","tos":"los T\xe9rminos de Servicio","pp":"la Pol\xedtica de Privacidad","and":"y","placeholder":{"inmateNumber":"N\xfamero de Persona Encarcelada","pinCode":"C\xf3digo PIN"}}')},300:function(e){e.exports=JSON.parse('{"call":{"title":"Pr\xf3ximas llamadas","seeAll":"Ver Todo","noCalls":"No hay pr\xf3ximas llamadas","upcomingCalls":"Pr\xf3ximas llamada","minutes":"minutos","ago":"atr\xe1s","join":"\xdanete Ahora","seeDetails":"Ver Detalles"},"connection":{"active":"Aprobada(o)s","pending":"Pendientes","title":"Contactos"}}')},301:function(e){e.exports=JSON.parse('{"doc":{"warning":"DOC Warning"},"peer":{"joinedCallTitle":"joined the call","joinedCallBody":"Your call will connect soon.","muted":"muted their mic","unmuted":"unmuted their mic","videoOn":"turned on their video","videoOff":"turned off their video"},"waitingRoom":{"questionOfDay":"Question of the day:","initialization":"Initializing video call...","waitingForPrefix":"Waiting for","waitingForSuffix":"to join the call","loading":"Loading...","whenWillCallConnect":"When will my call connect?","checkConnection":"Check Connection","leaveWaitingRoom":"Leave Waiting Room"},"chat":{"title":"Chat","placeholder":"Type here...","monitorWarning":"Note: All messages are monitored for security purposes."},"videoOverlay":{"on":"On","off":"off","chat":"Chat","video":"Video","mic":"Mic","showTime":"Show Time","hideTime":"Hide Time","leaveCall":"Leave Call"},"you":{"You":"You","enabledWebcam":"turned on your webcam","disabledWebcam":"turned off your webcam","mutedMic":"muted your microphone","unmutedMic":"unmuted your microphone"},"testConnection":{"title":"Check Your Audio & Video"}}')},302:function(e){e.exports=JSON.parse('{"cancelCallModal":{"title":"Cancel Call?","okText":"Confirm","messageOne":"You are about to cancel your call with {{connectionName}} for:","messageTwo":"Please select a cancellation reason to send to {{connectionFirstName}}.","dropdownPlaceholder":"Cancellation reason"}}')},303:function(e){e.exports=JSON.parse('{"cancelCallModal":{"title":"Cancelar llamada?","okText":"Confirmar","messageOne":"You are about to cancel your call with {{connectionName}} for:","messageTwo":"Please select a cancellation reason to send to {{connectionFirstName}}.","dropdownPlaceholder":"Cancellation reason"}}')},304:function(e){e.exports=JSON.parse('{"language":{"title":"Language","messageOne":"Please select your preferred language.","messageTwo":"Por favor elija su idioma preferido."},"resources":{"title":"Resources","contactVerification":"How does contact verification work","callInfo":"What can I expect for a call","privacyInfo":"Your privacy on Ameelio Connect video calls"}}')},305:function(e){e.exports=JSON.parse('{"language":{"title":"Language","messageOne":"Please select your preferred language.","messageTwo":"Por favor elija su idioma preferido."},"resources":{"title":"Resources","contactVerification":"How does contact verification work","callInfo":"What can I expect for a call","privacyInfo":"Your privacy on Ameelio Connect video calls"}}')},328:function(e,t,n){},329:function(e,t,n){},518:function(e,t,n){},533:function(e,t,n){},534:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(35),i=n.n(r),o=(n(328),n(33)),s=(n(329),n(112)),l=n(282),u=n(70),d=n(93),j=n(46),b=n(23),f=n(9),h=n.n(f),p=n(24),O="api/v1/";function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15e3;return Promise.race([fetch(e,Object(o.a)(Object(o.a)({},t),{},{mode:"cors"})),new Promise((function(e,t){return setTimeout((function(){return t(new Error("timeout"))}),n)}))])}function x(e){return v.apply(this,arguments)}function v(){return(v=Object(p.a)(h.a.mark((function e(t){var n,a,c,r,i,s,l=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:{},a=l.length>2&&void 0!==l[2]?l[2]:15e3,c=xn.getState(),r=Object(o.a)(Object(o.a)({},n),{},{headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}),e.next=6,m("".concat(O,"inmates/").concat(c.session.authInfo.id,"/").concat(t),r,a);case 6:if(200===(i=e.sent).status||201===i.status){e.next=9;break}throw i;case 9:return e.next=11,i.json();case 11:return s=e.sent,e.abrupt("return",s);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return y.apply(this,arguments)}function y(){return(y=Object(p.a)(h.a.mark((function e(){var t,n,a,c,r=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:1500,n={headers:{Accept:"application/json","Content-Type":"application/json"}},e.next=4,m("".concat(O,"public/facilities"),n,t);case 4:return a=e.sent,e.next=7,a.json();case 7:return c=e.sent,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}console.log(O);var w=n(287),C=n(288),k=n(289),T=n(320),N=n(317);function I(e){return e[Math.floor(Math.random()*e.length)]}var S=function(e){return e.split(" ").map((function(e){return e[0]})).join("")},E=function(e){return e?"".concat(e.firstName," ").concat(e.lastName):""},M=function(e,t,n){T.a[n]({message:e,description:t})},P=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3;switch(n){case"success":N.b.success({content:t,key:e,duration:a});break;case"error":N.b.error({content:t,key:e,duration:a});break;case"warning":N.b.warning({content:t,key:e,duration:a});break;case"loading":N.b.loading({content:t,key:e,duration:a});break;default:N.b.info({content:t,key:e,duration:a})}};function D(e){return null!==e&&void 0!==e}var A=[10,5,2],L="bg-white text-black";function R(e,t){var n=e.userIds.map((function(e){return t[e]})).filter(D);return Object(o.a)(Object(o.a)({},e),{},{userParticipants:n})}function H(e,t){return"audio"===e?{audio:!0}:{video:!0}}function z(e,t){return V.apply(this,arguments)}function V(){return(V=Object(p.a)(h.a.mark((function e(t,n){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=H(t),e.next=3,navigator.mediaDevices.getUserMedia(a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B={width:{min:640,ideal:1920},height:{min:400,ideal:1080},encodings:[{rid:"r0",maxBitrate:1e5,scalabilityMode:"S1T3"},{rid:"r1",maxBitrate:3e5,scalabilityMode:"S1T3"},{rid:"r2",maxBitrate:9e5,scalabilityMode:"S1T3"}],codecOptions:{videoGoogleStartBitrate:1e3}};var q=function(){function e(t,n){Object(w.a)(this,e),this.callId=void 0,this.producerTransport=void 0,this.consumerTransport=void 0,this.device=void 0,this.consumers=void 0,this.producers=void 0,this.handlers=void 0,this.socket=void 0,this.socket=t,this.callId=n,this.producerTransport=null,this.consumerTransport=null,this.device=null,this.consumers={},this.producers={},this.handlers={consume:[]}}return Object(C.a)(e,[{key:"request",value:function(){var e=Object(p.a)(h.a.mark((function e(t,n){var a=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,c){if(!a.socket)return c("No socket connection.");a.socket.emit(t,n,(function(t){t.error?c(t.error):e(t)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"handleTransportConnect",value:function(){var e=Object(p.a)(h.a.mark((function e(t){var n=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){t.on("connect",function(){var a=Object(p.a)(h.a.mark((function a(c,r,i){var o;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=c.dtlsParameters,a.next=3,n.request("establishDtls",{dtlsParameters:o,callId:n.callId,transportId:t.id});case 3:r(),e();case 5:case"end":return a.stop()}}),a)})));return function(e,t,n){return a.apply(this,arguments)}}())})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Object(p.a)(h.a.mark((function e(){var t,n,a,c,r=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("join",{callId:this.callId});case 2:return t=e.sent,n=t.producerTransportInfo,a=t.consumerTransportInfo,c=t.routerRtpCapabilities,e.next=8,this.loadDevice(c);case 8:if(this.device=e.sent,this.device){e.next=11;break}return e.abrupt("return");case 11:return n&&(this.producerTransport=this.device.createSendTransport(n),this.handleTransportConnect(this.producerTransport)),this.consumerTransport=this.device.createRecvTransport(a),this.handleTransportConnect(this.consumerTransport),e.next=16,this.request("declareRtpCapabilities",{rtpCapabilities:this.device.rtpCapabilities});case 16:this.request("finishConnecting",{callId:this.callId}),this.producerTransport&&this.producerTransport.on("produce",function(){var e=Object(p.a)(h.a.mark((function e(t,n,a){var c,i,o,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.kind,i=t.rtpParameters,e.next=3,r.request("produce",{callId:r.callId,kind:c,rtpParameters:i});case 3:o=e.sent,s=o.producerId,n({id:s});case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),this.socket.on("consume",function(){var e=Object(p.a)(h.a.mark((function e(t){var n,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.consume(t);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:a=n.consumer,c=n.stream,r.socket.emit("resumeConsumer",{callId:r.callId,consumerId:a.id}),r.handlers.consume.forEach((function(e){return e(t.kind,c,t.user)}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"produce",value:function(){var e=Object(p.a)(h.a.mark((function e(t,n){var a,c,r,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.producerTransport){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,z(t,n);case 4:return a=e.sent,c=("audio"===t?a.getAudioTracks():a.getVideoTracks())[0],r={track:c},"video"===t&&(r.encodings=B.encodings,r.codecOptions=B.codecOptions),e.next=10,this.producerTransport.produce(r);case 10:return i=e.sent,this.producers[i.id]=i,e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadDevice",value:function(){var e=Object(p.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new k.Device,e.next=3,n.load({routerRtpCapabilities:t});case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"consume",value:function(){var e=Object(p.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.consumerTransport){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.consumerTransport.consume(t);case 4:return n=e.sent,a=new MediaStream([n.track]),this.consumers[n.id]=n,e.abrupt("return",{consumer:n,stream:a});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"on",value:function(){var e=Object(p.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t in this.handlers||(this.handlers[t]=[]),this.handlers[t].push(n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"terminate",value:function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("terminate",{callId:this.callId});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pauseVideo",value:function(){var e=Object(p.a)(h.a.mark((function e(){var t,n=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=Object.values(this.producers))||void 0===t||t.forEach((function(e){"video"===e.kind&&(e.pause(),n.request("producerUpdate",{callId:n.callId,producerId:e.id,paused:!0,type:"video"}))})),this.handlers.pauseVideo.forEach((function(e){return e()}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resumeVideo",value:function(){var e=Object(p.a)(h.a.mark((function e(){var t,n=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=Object.values(this.producers))||void 0===t||t.forEach((function(e){"video"===e.kind&&(e.resume(),n.request("producerUpdate",{callId:n.callId,producerId:e.id,paused:!1,type:"video"}))})),this.handlers.resumeVideo.forEach((function(e){return e()}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pauseAudio",value:function(){var e=Object(p.a)(h.a.mark((function e(){var t,n=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=Object.values(this.producers))||void 0===t||t.forEach((function(e){"audio"===e.kind&&(e.pause(),n.request("producerUpdate",{callId:n.callId,producerId:e.id,paused:!0,type:"audio"}))})),this.handlers.pauseAudio.forEach((function(e){return e()}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resumeAudio",value:function(){var e=Object(p.a)(h.a.mark((function e(){var t,n=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=Object.values(this.producers))||void 0===t||t.forEach((function(e){"audio"===e.kind&&(e.resume(),n.request("producerUpdate",{callId:n.callId,producerId:e.id,paused:!1,type:"audio"}))})),this.handlers.resumeAudio.forEach((function(e){return e()}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.socket.off("connect"),this.socket.off("consume"),this.socket.off("textMessage"),this.socket.close(),this.consumerTransport&&this.consumerTransport.close(),this.producerTransport&&this.producerTransport.close(),this.consumerTransport=null,this.producerTransport=null,Object.values(this.producers).forEach((function(e){e.close()})),Object.values(this.consumers).forEach((function(e){e.close()})),this.consumers={},this.producers={},this.handlers={};case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),W=n(291),F=n.n(W),_=Object(j.b)("calls/fetchAll",Object(p.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("calls");case 2:return t=e.sent,n=t.data.results,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))),Y=Object(j.b)("visit/initializeVisit",function(){var e=Object(p.a)(h.a.mark((function e(t){var n,a,c,r,i,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.callId,a=t.setRc,c=t.authInfo,r=t.videoHandler,(i=F.a.connect("https://".concat(r.host),{transports:["websocket"]})).connected){e.next=5;break}return e.next=5,new Promise((function(e){return i.on("connect",e)}));case 5:return console.log("connected"),e.next=8,new Promise((function(e){i.emit("authenticate",c,e)}));case 8:return o=new q(i,n),e.next=11,o.init();case 11:return a(o),e.abrupt("return",{callId:n});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),U=Object(j.b)("visit/initializeProducers",function(){var e=Object(p.a)(h.a.mark((function e(t){var n,a,c,r,i,o,s,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.rc,a=t.setLocalAudio,c=t.setLocalVideo,r=t.setRc,e.next=3,Promise.all([n.produce("video"),n.produce("audio")]);case 3:if(i=e.sent,o=Object(b.a)(i,2),s=o[0],l=o[1],s){e.next=9;break}throw Error("Unable to produce video");case 9:if(l){e.next=11;break}throw Error("Unable to produce audio");case 11:a({stream:l,paused:!1}),c({stream:s,paused:!1}),n.on("pauseVideo",(function(){c((function(e){if(e)return{stream:e.stream,paused:!0}}))})),n.on("resumeVideo",(function(){c((function(e){if(e)return{stream:e.stream,paused:!1}}))})),n.on("pauseAudio",(function(){a((function(e){if(e)return{stream:e.stream,paused:!0}}))})),n.on("resumeAudio",(function(){a((function(e){if(e)return{stream:e.stream,paused:!1}}))})),r(n);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),J=Object(j.b)("visit/initializeRemotes",function(){var e=Object(p.a)(h.a.mark((function e(t){var n,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.rc,a=t.setRemoteAudios,c=t.setRemoteVideos,n.on("consume",function(){var e=Object(p.a)(h.a.mark((function e(t,n,r){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("user"===r.type){e.next=2;break}return e.abrupt("return");case 2:"audio"===t&&a((function(e){var t=Object(o.a)({},e);return t[r.id]=n,t})),"video"===t&&c((function(e){var t=Object(o.a)({},e);return t[r.id]=n,t}));case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),G=Object(j.c)(),Z=Object(j.d)({name:"calls",initialState:G.getInitialState(),reducers:{},extraReducers:function(e){e.addCase(_.fulfilled,(function(e,t){return G.setAll(e,t.payload)})),e.addCase(Y.rejected,(function(){return P("initializeVisit","Failed to initialize call.","error")})),e.addCase(U.rejected,(function(){return P("initializeProducers","Failed to initialize local streams.","error")})),e.addCase(J.rejected,(function(){return P("initializeProducers","Failed to initialize remotes.","error")}))}}),X=(Z.actions,n(178)),K=n.n(X),Q=Object(j.c)(),$=Object(j.b)("contacts/fetchAll",Object(p.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("contacts");case 2:return t=e.sent,n=t.data.contacts.map((function(e){return K()(e)})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))),ee=Object(j.d)({name:"contacts",initialState:Q.getInitialState(),reducers:{},extraReducers:function(e){e.addCase($.fulfilled,(function(e,t){Q.setAll(e,t.payload)}))}}),te=n(113),ne=G.getSelectors((function(e){return e.calls})),ae=ne.selectAll,ce=ne.selectById,re=Q.getSelectors((function(e){return e.contacts})),ie=re.selectAll,oe=(re.selectById,re.selectEntities),se=(Object(te.a)(ae,(function(e){return e.filter((function(e){return"ended"!==e.status&&"terminated"!==e.status}))})),Object(te.a)(ae,(function(e){return e.filter((function(e){return"ended"===e.status||"terminated"===e.status}))})),n(321)),le=n(293),ue=n(294),de=n(295),je=n(296),be=n(297),fe=n(298),he=n(299),pe=n(300),Oe=n(301),me=n(302),xe=n(303),ve=n(304),ge=n(305),ye=n(154),we={en:{login:fe,dashboard:le,profile:ue,call:je,calls:be,modals:me,settings:ve},es:{login:he,dashboard:pe,profile:de,call:Oe,modals:xe,settings:ge}};se.a.use(ye.e).init({lng:"en",ns:["login","dashboard","call","profile","settings","modals"],resources:we});var Ce=n(551),ke=n(544),Te=n(543),Ne=n(140),Ie=n(80),Se=n(541),Ee=n(306),Me=n.n(Ee),Pe=n(565),De=n(540),Ae=n(550),Le=n(536),Re=n(3),He=function(e){var t=e.children;return Object(Re.jsx)(Le.a,{className:"min-h-screen",children:Object(Re.jsxs)(Le.a.Content,{children:[Object(Re.jsx)("div",{style:{height:"60px",backgroundColor:"#F0DEFF",opacity:.4}}),t]})})},ze=n(552),Ve=n(67),Be=function(e){var t=e.children;return Object(Re.jsx)(Ve.a,{type:"primary",icon:Object(Re.jsx)(ze.a,{}),size:"large",className:"rounded",children:t})},qe=function(e){var t=e.user,n=e.calls,c=(e.onEdit,Object(Ae.a)("profile").t),r=Object(a.useState)(0),i=Object(b.a)(r,2),o=i[0],s=i[1];return Object(a.useEffect)((function(){if(n.length){var e=n.map((function(e){return Object(Pe.a)(new Date(e.scheduledEnd),new Date(e.scheduledStart))})).reduce((function(e,t){return e+t}));s(e)}}),[n]),Object(Re.jsx)(He,{children:Object(Re.jsxs)(Ce.b,{direction:"vertical",size:"large",className:"w-100 p-6 pt-9",children:[Object(Re.jsx)(ke.a,{className:"p-6 border border-solid border-opacity-1 border-gray-200",children:Object(Re.jsxs)(Ce.b,{className:"flex justify-between",children:[Object(Re.jsxs)(Ce.b,{children:[Object(Re.jsx)(Me.a,{src:t.profileImagePath,size:tn}),Object(Re.jsxs)(Ce.b,{direction:"vertical",children:[Object(Re.jsx)(Te.a.Title,{level:4,children:Object(Re.jsx)(Te.a.Text,{strong:!0,children:E(t)})}),Object(Re.jsx)(Te.a.Title,{level:5,children:Object(Re.jsx)(Te.a.Text,{children:t.location})})]})]}),Object(Re.jsx)(Be,{children:c("profileInfo.editProfile")})]})}),Object(Re.jsxs)(Ne.a,{gutter:32,children:[Object(Re.jsx)(Ie.a,{span:16,children:Object(Re.jsxs)(Se.a,{title:c("profileInfo.about"),children:[Object(Re.jsx)("p",{children:Object(Re.jsx)(Te.a.Text,{children:"".concat(c("profileInfo.name"),": ").concat(E(t))})}),Object(Re.jsx)("p",{children:Object(Re.jsx)(Te.a.Text,{children:"".concat(c("profileInfo.home"),": ").concat(t.location)})}),Object(Re.jsx)("p",{children:Object(Re.jsx)(Te.a.Text,{children:"".concat(c("profileInfo.birthday"),": ").concat(Object(De.a)(new Date(t.dateOfBirth),"MMMM d, yyyy"))})})]})}),Object(Re.jsx)(Ie.a,{span:8,children:Object(Re.jsx)(Se.a,{title:c("profileInfo.history"),children:Object(Re.jsxs)(Ne.a,{children:[Object(Re.jsxs)(Ie.a,{span:4,children:[Object(Re.jsx)("p",{children:Object(Re.jsx)(Te.a.Text,{type:"secondary",children:c("profileInfo.totalCalls")})}),Object(Re.jsx)("p",{children:Object(Re.jsx)(Te.a.Text,{children:n.length})})]}),Object(Re.jsxs)(Ie.a,{span:16,offset:2,children:[Object(Re.jsx)("p",{children:Object(Re.jsx)(Te.a.Text,{type:"secondary",children:c("profileInfo.totalMinutes")})}),Object(Re.jsx)("p",{children:Object(Re.jsx)(Te.a.Text,{children:o})})]})]})})})]})]})})},We=function(e){var t=e.calls,n=e.user,c=Object(a.useState)(!1),r=Object(b.a)(c,2),i=r[0],o=r[1];return i?null:Object(Re.jsx)(qe,{user:n,calls:t,onEdit:function(){return o(!0)}})},Fe=function(){var e=gn((function(e){return e.session.user})),t=gn((function(e){return ae(e)}));return Object(Re.jsx)(We,{calls:t,user:e})},_e=n(316),Ye=n(539),Ue=Object(j.d)({name:"modals",initialState:{data:{activeType:"INACTIVE_MODAL",entity:null}},reducers:{openModal:function(e,t){e.data=t.payload},closeModal:function(e){e.data={activeType:"INACTIVE_MODAL",entity:null}}}}),Je=Ue.actions,Ge=Je.openModal,Ze=Je.closeModal,Xe=[{title:"Date",dataIndex:"date"},{title:"Time",dataIndex:"time"},{title:"Participants",dataIndex:"participants"},{title:"",dataIndex:"cancel"}],Ke=function(e){var t=e.calls,n=e.user,c=vn(),r=Object(a.useState)(void 0),i=Object(b.a)(r,2),o=i[0],s=i[1],l=Object(Ae.a)("calls").t;return Object(a.useEffect)((function(){s(t.map((function(e){return{date:Object(De.a)(new Date(e.scheduledStart),"eeee, LLLL d"),time:"".concat(Object(De.a)(new Date(e.scheduledStart),"h:mm bbb")," - ").concat(Object(De.a)(new Date(e.scheduledStart),"h:mm bbb")),participants:Object(Re.jsxs)(Ce.b,{children:[Object(Re.jsx)(_e.a,{src:n.profileImagePath,size:"small"}),Object(Re.jsx)(Te.a.Text,{children:E(n)})]}),cancel:Object(Re.jsx)(Ve.a,{type:"link",onClick:function(){return c(Ge({activeType:"CANCEL_CALL_MODAL",entity:e}))},children:l("cancel")})}})))}),[t,n,c,l]),Object(Re.jsx)(He,{children:Object(Re.jsxs)(Ce.b,{className:"p-8 w-full",direction:"vertical",children:[Object(Re.jsx)(Ne.a,{className:"pb-2",children:Object(Re.jsxs)(Ie.a,{children:[Object(Re.jsx)("p",{className:"pb-2",children:Object(Re.jsx)(Te.a.Text,{type:"secondary",children:l("callLimit")})}),Object(Re.jsx)("p",{children:Object(Re.jsx)(Te.a.Text,{strong:!0,className:"text-base",children:n.quota})})]})}),Object(Re.jsx)(Ne.a,{children:Object(Re.jsx)(Ye.a,{className:"w-full",columns:Xe,dataSource:o})})]})})};function Qe(){var e=Object(a.useState)([]),t=Object(b.a)(e,2),n=t[0],c=t[1],r=gn(ae),i=gn(oe);return Object(a.useEffect)((function(){c(function(e,t){return e.map((function(e){return R(e,t)}))}(r,i))}),[r,i]),n}var $e=function(){var e=gn((function(e){return e.session.user})),t=Qe();return Object(Re.jsx)(Ke,{calls:t,user:e})},et=n(151),tt=function(){var e=Object(Ae.a)("settings"),t=e.t,n=e.i18n,a=vn(),c=et.a.Option;return Object(Re.jsx)(He,{children:Object(Re.jsx)(Ce.b,{direction:"vertical",size:"large",className:"w-100 p-6 pt-9",children:Object(Re.jsxs)(Ne.a,{gutter:32,children:[Object(Re.jsx)(Ie.a,{span:12,children:Object(Re.jsxs)(Se.a,{title:t("language.title"),children:[Object(Re.jsx)("p",{children:Object(Re.jsx)(Te.a.Text,{children:t("language.messageOne")})}),Object(Re.jsx)("p",{children:Object(Re.jsx)(Te.a.Text,{type:"secondary",children:t("language.messageTwo")})}),Object(Re.jsxs)("div",{className:"pt-4",children:[Object(Re.jsx)(Te.a.Text,{children:"".concat(t("language.title"),":")}),Object(Re.jsx)(et.a,{className:"pl-4",defaultValue:n.language,onChange:function(e){return n.changeLanguage(e)},children:Object.keys(rn).map((function(e,t){return Object(Re.jsx)(c,{value:e,children:rn[e]},"".concat(e,"-").concat(t))}))})]})]})}),Object(Re.jsx)(Ie.a,{span:12,children:Object(Re.jsxs)(Se.a,{title:t("resources.title"),children:[Object(Re.jsx)(Ne.a,{className:"pb-2",children:Object(Re.jsx)(Te.a.Link,{onClick:function(){return a(Ge({activeType:"RESOURCE_MODAL",entity:{title:"Hello",body:"World"}}))},children:t("resources.contactVerification")})}),Object(Re.jsx)(Ne.a,{className:"pb-2",children:Object(Re.jsx)(Te.a.Link,{onClick:function(){return a(Ge({activeType:"RESOURCE_MODAL",entity:{title:"Hello",body:"World"}}))},children:t("resources.callInfo")})}),Object(Re.jsx)(Ne.a,{className:"pb-2",children:Object(Re.jsx)(Te.a.Link,{onClick:function(){return a(Ge({activeType:"RESOURCE_MODAL",entity:{title:"Hello",body:"World"}}))},children:t("resources.privacyInfo")})})]})})]})})})},nt=function(){return Object(Re.jsx)(tt,{})},at=n(65),ct=n(54),rt=n(537),it=n(566),ot=function(e){var t,n=e.call,a=e.selectCall,c=e.navigate,r=e.openPrivacyNotice,i=Object(Ae.a)("dashboard").t,o=Object(Pe.a)(new Date(n.scheduledEnd),new Date(n.scheduledStart)),s=new Date(n.scheduledStart)<new Date;return Object(Re.jsx)(Se.a,{children:Object(Re.jsxs)(Ne.a,{justify:"space-between",align:"bottom",children:[Object(Re.jsxs)(Ce.b,{direction:"vertical",children:[Object(Re.jsx)(Te.a.Title,{level:5,children:(t=new Date(n.scheduledStart),Object(rt.a)(t)?"Today":Object(it.a)(t)?"Tomorrow":Object(De.a)(t,"EEEE, MMMM d"))}),Object(Re.jsxs)(Te.a.Text,{children:[Object(De.a)(new Date(n.scheduledStart),"h:mm aaa")," \u2022"," ","".concat(o," minutes")]}),Object(Re.jsxs)(Ce.b,{style:{paddingTop:18},children:[Object(Re.jsx)(_e.a,{src:n.userParticipants[0].profileImagePath}),Object(Re.jsx)(Te.a.Text,{type:"secondary",children:E(n.userParticipants[0])})]})]}),Object(Re.jsx)(Ce.b,{children:s?Object(Re.jsx)(Ve.a,{size:"large",type:"primary",className:"rounded-sm",disabled:!n.videoHandler,onClick:function(){c("call/".concat(n.id)),r({title:i("privacyNotice.title"),body:i("privacyNotice.body"),okBtnText:i("privacyNotice.okText")})},children:i("call.join")}):Object(Re.jsx)(Ve.a,{size:"large",className:"rounded-sm",onClick:function(){return a(n)},children:i("call.seeDetails")})})]})},n.id)},st=function(e){var t=e.calls,n=e.selectCall,a=e.openInfoModal,c=Object(Ae.a)("dashboard").t,r=vn();return Object(Re.jsxs)(Se.a,{title:c("call.title"),extra:Object(Re.jsx)(Te.a.Link,{onClick:function(){return r(Object(ct.d)("/"))},children:c("call.seeAll")}),className:"rounded-md",children:[Object(Re.jsx)("div",{className:"pb-5",children:Object(Re.jsx)(Te.a.Text,{children:t.length?"".concat(t.length," ").concat(c("call.upcomingCalls")).concat(t.length>1?"s":""):c("call.noCalls")})}),t.map((function(e){return Object(Re.jsx)(ot,{call:e,selectCall:n,navigate:function(e){return r(Object(ct.d)(e))},openPrivacyNotice:a},"callItem-".concat(e.id))}))]})},lt=function(e){var t=e.contact,n=Object(Ae.a)("dashboard").t;return Object(Re.jsx)(Ie.a,{className:"d-flex flex-column align-items-center",children:Object(Re.jsxs)(Ce.b,{direction:"vertical",children:[Object(Re.jsx)(_e.a,{shape:"square",size:80,src:t.profileImagePath}),Object(Re.jsxs)("div",{children:[Object(Re.jsx)("div",{children:Object(Re.jsx)(Te.a.Text,{children:E(t)})}),"active"===t.status&&Object(Re.jsx)("div",{children:Object(Re.jsx)(Te.a.Text,{type:"secondary",children:n("connection.lastCall",{daysPastNum:1})})})]})]})},t.id)},ut=function(e){e.calls;var t=e.contacts,n=Object(Ae.a)("dashboard").t,c=Object(a.useState)(null),r=Object(b.a)(c,2),i=r[0],o=r[1],s=Object(a.useState)("active"),l=Object(b.a)(s,2),u=l[0],d=l[1],j=[{key:"active",tab:n("connection.active")},{key:"pending",tab:n("connection.pending")}];Object(a.useEffect)((function(){o(t.filter((function(e){return e.status===u})))}),[u,t]);var f=null===i||void 0===i?void 0:i.map((function(e){return Object(Re.jsx)(lt,{contact:e},e.id)}));return Object(Re.jsx)(Se.a,{title:n("connection.title"),tabList:j,activeTabKey:u,onTabChange:function(e){return d(e)},children:Object(Re.jsx)(Ne.a,{justify:"space-around",children:f})})},dt={headerTime:{color:"white",marginBottom:0},headerDate:{color:"white",marginTop:0},quote:{color:"white"}},jt=function(){var e=Object(a.useState)(I(cn)),t=Object(b.a)(e,1)[0],n=Object(a.useState)(new Date),c=Object(b.a)(n,2),r=c[0],i=c[1];return Object(a.useEffect)((function(){var e=setInterval((function(){i(new Date)}),1e3);return function(){return clearInterval(e)}})),Object(Re.jsxs)(Ce.b,{direction:"vertical",align:"center",style:{backgroundImage:"url(".concat(t.background,")")},className:"w-full h-52 rounded-md bg-cover bg-center text-center flex-1 justify-end",children:[Object(Re.jsxs)(Ie.a,{className:"pb-4",children:[Object(Re.jsx)(Te.a.Title,{level:1,style:dt.headerTime,children:Object(De.a)(r,"HH:mm")}),Object(Re.jsx)(Te.a.Title,{level:5,style:dt.headerDate,children:Object(De.a)(r,"eeee, MMMM d")})]}),Object(Re.jsx)(Ie.a,{children:Object(Re.jsx)(Te.a.Title,{level:5,style:dt.quote,children:"".concat(t.quote," - ").concat(t.author)})})]})},bt=n(553),ft=n(554),ht=n(548),pt=n(538),Ot=function(e){var t=e.selectedCall,n=e.onClose,a=vn(),c=Object(Ae.a)("dashboard").t,r=t&&Object(Pe.a)(new Date(t.scheduledEnd),new Date(t.scheduledStart));return t?Object(Re.jsx)(ht.a,{title:"Call Details",placement:"right",closable:!1,onClose:n,visible:!!t,getContainer:!1,style:{position:"absolute"},children:Object(Re.jsxs)(Ce.b,{direction:"vertical",size:"large",children:[Object(Re.jsx)(Ne.a,{children:Object(Re.jsxs)(Ce.b,{children:[Object(Re.jsx)(Ie.a,{children:Object(Re.jsx)(bt.a,{className:"text-2xl"})}),Object(Re.jsxs)(Ie.a,{className:"text-sm",children:[Object(Re.jsx)("div",{children:Object(Re.jsx)(Te.a.Text,{children:Object(De.a)(new Date(t.scheduledStart),"EEEE, MMMM d")})}),Object(Re.jsx)("div",{children:Object(Re.jsxs)(Te.a.Text,{type:"secondary",children:[Object(De.a)(new Date(t.scheduledStart),"h:mm aaa OOO")," ","\u2022 ","".concat(r,"mins")]})})]})]})}),Object(Re.jsx)(Ne.a,{children:Object(Re.jsxs)(Ce.b,{children:[Object(Re.jsx)(Ie.a,{children:Object(Re.jsx)(ft.a,{className:"text-2xl"})}),Object(Re.jsx)(Ie.a,{children:Object(Re.jsx)(_e.a,{src:t.userParticipants[0].profileImagePath})}),Object(Re.jsx)(Ie.a,{style:{fontSize:14},children:Object(Re.jsx)(Te.a.Text,{type:"secondary",children:E(t.userParticipants[0])})})]})}),Object(Re.jsx)(Ne.a,{children:Object(Re.jsx)(Te.a.Text,{type:"secondary",children:c("call.cancelDescription")})}),Object(Re.jsx)(Ne.a,{children:Object(Re.jsx)(Ve.a,{className:"rounded-sm",onClick:function(){return a(Ge({activeType:"CANCEL_CALL_MODAL",entity:t}))},children:c("call.cancel")})}),Object(Re.jsx)(pt.a,{}),Object(Re.jsx)(Ne.a,{children:Object(Re.jsx)(Te.a.Link,{children:c("call.whatToExpect")})}),Object(Re.jsx)(Ne.a,{children:Object(Re.jsx)(Te.a.Link,{children:c("call.privacyNotice")})})]})}):null},mt=function(e){var t=e.calls,n=e.contacts,c=e.openInfoModal,r=Object(a.useState)(null),i=Object(b.a)(r,2),o=i[0],s=i[1];return Object(Re.jsxs)(He,{children:[Object(Re.jsxs)(Ce.b,{direction:"vertical",size:"large",className:"w-100 p-6 pt-9",children:[Object(Re.jsx)(Ne.a,{children:Object(Re.jsx)(Ie.a,{span:24,children:Object(Re.jsx)(jt,{})})}),Object(Re.jsxs)(Ne.a,{gutter:16,children:[Object(Re.jsx)(Ie.a,{span:16,children:Object(Re.jsx)(st,{calls:t,selectCall:function(e){return s(e)},openInfoModal:c})}),Object(Re.jsx)(Ie.a,{span:8,children:Object(Re.jsx)(ut,{calls:t,contacts:n})})]})]}),Object(Re.jsx)(Ot,{selectedCall:o,onClose:function(){return s(null)}})]})},xt={fetchCalls:_,push:ct.d},vt=Object(at.c)(null,xt)((function(e){var t=e.fetchCalls,n=vn(),c=gn(ie),r=Qe();return Object(a.useEffect)((function(){Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()}),[t]),Object(Re.jsx)(mt,{calls:r,contacts:c,openInfoModal:function(e){return n(Ge({activeType:"RESOURCE_MODAL",entity:e}))}})})),gt=Object(j.d)({name:"common",initialState:{fullScreen:!1},reducers:{enterFullScreen:function(e){e.fullScreen=!0},exitFullScreen:function(e){e.fullScreen=!1}}}),yt=gt.actions,wt=yt.enterFullScreen,Ct=yt.exitFullScreen,kt=n(556),Tt=n(224),Nt=n(545),It=function(e){var t=e.message,n=t.from.type;return Object(Re.jsxs)(Ce.b,{direction:"vertical",align:"inmate"===n?"end":"start",style:{width:"100%"},children:[Object(Re.jsxs)(Ce.b,{children:[Object(Re.jsx)(Te.a.Text,{strong:!0,children:function(){switch(n){case"inmate":return"You";case"doc":return"DOC";case"user":return"Loved One"}}()}),Object(Re.jsx)(Te.a.Text,{type:"secondary",children:Object(De.a)(new Date(t.timestamp),"HH:mm")})]}),Object(Re.jsx)(Te.a.Text,{children:t.content})]})},St=function(e){var t=e.roomClient,n=e.inmateId,c=e.call,r=Le.a.Sider,i=Object(Ae.a)("call").t,o=Object(a.useState)(!1),s=Object(b.a)(o,2),l=s[0],u=s[1],d=Object(a.useState)(""),j=Object(b.a)(d,2),f=j[0],O=j[1],m=Object(a.useState)([]),x=Object(b.a)(m,2),v=x[0],g=x[1],y=Object(a.useState)(!1),w=Object(b.a)(y,2),C=w[0],k=w[1];Object(a.useEffect)((function(){t&&t.socket.on("textMessage",function(){var e=Object(p.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.from,a=t.contents,k(!0),"doc"===n.type&&M(i("doc.warning"),a,"warning"),g((function(e){return[].concat(Object(Tt.a)(e),[{content:a,from:n,timestamp:(new Date).toLocaleDateString()}])}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[t,i]),Object(a.useEffect)((function(){l||k(!1)}),[C,l]);var T=function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:O(""),g([].concat(Object(Tt.a)(v),[{content:f,from:{type:"inmate",id:n},timestamp:(new Date).toLocaleDateString()}])),t.request("textMessage",{callId:c.id,contents:f}).then((function(){return console.log("ssucces")}),(function(e){return console.log(e)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Re.jsxs)(r,{theme:"light",style:{height:"100vh",maxHeight:"100vh"},width:300,collapsible:!0,collapsed:l,onCollapse:function(){return u(!0)},children:[!l&&Object(Re.jsx)(ke.a,{title:i("chat.title")}),!l&&Object(Re.jsxs)("div",{className:"flex flex-col h-full",style:an,children:[Object(Re.jsxs)(Ce.b,{direction:"vertical",style:{overflowY:"scroll"},children:[Object(Re.jsx)(Te.a.Text,{mark:!0,children:i("chat.monitorWarning")}),v.map((function(e){return Object(Re.jsx)(It,{message:e})}))]}),Object(Re.jsxs)("div",{className:"mt-auto mb-8 flex-shrink-0",children:[Object(Re.jsx)(pt.a,{}),Object(Re.jsx)(Nt.a.TextArea,{value:f,rows:2,onChange:function(e){return O(e.target.value)},onPressEnter:function(e){return T()},onSubmit:function(e){return T()},placeholder:i("chat.placeholder"),autoFocus:!0,bordered:!1})]})]})]})},Et=n(555),Mt=n(557),Pt=n(558),Dt=n(559),At=n(549),Lt=n(310),Rt=function(e){var t=e.icon,n=e.label,a=e.onClick,c=e.type,r=e.danger,i=e.block,o=e.size,s=e.shape,l=e.style;return Object(Re.jsxs)(Ce.b,{direction:"vertical",align:"center",children:[Object(Re.jsx)(Ve.a,{icon:t,onClick:a,type:c,block:i,danger:r,size:o||"large",shape:s||"round",style:l}),Object(Re.jsx)(Te.a.Text,{type:"secondary",children:n})]})},Ht={iconButton:{fontSize:24},active:{backgroundColor:"#f5f5f5"},inactive:{backgroundColor:"#fff"}},zt=function(e){var t=e.loading,n=e.audioOn,a=e.toggleAudio,c=e.videoOn,r=e.toggleVideo,i=e.chatCollapsed,o=e.toggleChat,s=e.terminateCall,l=e.timerOn,u=e.toggleTimer,d=e.hasUnreadMessages,j=Object(Ae.a)("call").t;return t?Object(Re.jsx)(Ne.a,{className:"absolute bottom-0 bg-white w-full p-4 flex",align:"middle",children:Object(Re.jsx)(Ie.a,{className:"m-auto",children:Object(Re.jsx)(Lt.a,{})})}):Object(Re.jsxs)(Ne.a,{className:"absolute bottom-0 bg-white w-full p-4",align:"middle",children:[Object(Re.jsx)(Ie.a,{span:8,offset:8,children:Object(Re.jsxs)(Ce.b,{size:"large",children:[Object(Re.jsx)(Rt,{icon:n?Object(Re.jsx)(Et.a,{style:Ht.iconButton}):Object(Re.jsx)(kt.a,{style:Ht.iconButton}),danger:!n,type:n?"default":"primary",onClick:a,label:"".concat(j("videoOverlay.mic")," ").concat(j(n?"videoOverlay.on":"videoOverlay.off"))}),Object(Re.jsx)(Rt,{shape:"round",danger:!c,icon:Object(Re.jsx)(Mt.a,{style:Ht.iconButton}),size:"large",type:c?"default":"primary",onClick:r,label:"".concat(j("videoOverlay.video")," ").concat(j(c?"videoOverlay.on":"videoOverlay.off"))}),Object(Re.jsx)(Rt,{shape:"round",style:i?Ht.inactive:Ht.active,icon:i?Object(Re.jsx)(At.a,{dot:d,children:Object(Re.jsx)(Pt.a,{style:Ht.iconButton})}):Object(Re.jsx)(Pt.a,{style:Ht.iconButton}),size:"large",onClick:o,label:j("videoOverlay.chat")}),Object(Re.jsx)(Rt,{shape:"round",style:l?Ht.active:Ht.inactive,icon:Object(Re.jsx)(Dt.a,{style:Ht.iconButton}),size:"large",onClick:u,label:"".concat(j(l?"videoOverlay.showTime":"videoOverlay.hideTime"))})]})}),Object(Re.jsx)(Ie.a,{span:2,offset:6,children:Object(Re.jsx)(Ve.a,{danger:!0,size:"large",onClick:function(){return s()},className:"align-self-end",children:j("videoOverlay.leaveCall")})})]})},Vt={background:{backgroundColor:"black",position:"absolute",top:16,left:16,width:"300px",height:"200px",zIndex:9999,display:"flex"},avatar:{color:"#f56a00",backgroundColor:"#fde3cf",margin:"auto"}},Bt=function(e){var t=e.initials;return Object(Re.jsx)("div",{style:Vt.background,children:Object(Re.jsx)(_e.a,{size:64,style:Vt.avatar,children:t})})},qt=function(e,t){switch(e){case"en":return t.en;case"es":return t.es;default:return t.en}},Wt=function(e){var t=e.title,n=e.call,c=e.navigateBack,r=e.openInfoModal,i=e.openTestConnectionModal,o=Object(Ae.a)("call"),s=o.t,l=o.i18n,u=Object(a.useState)(I(on)),d=Object(b.a)(u,1)[0];return Object(Re.jsx)(Se.a,{className:"bg-black\tbg-opacity-80 text-white w-6/12\t h-6/12 m-auto",children:Object(Re.jsxs)(Ce.b,{direction:"vertical",className:"text-white",size:"large",children:[Object(Re.jsxs)(Ce.b,{children:[Object(Re.jsx)(Te.a.Text,{strong:!0,className:"text-white text-xl\t",children:t}),Object(Re.jsx)(Lt.a,{})]}),Object(Re.jsxs)(Te.a.Text,{className:"text-white",children:[Object(De.a)(new Date(n.scheduledStart),"HH:mm")," \u2022"," ",Object(Pe.a)(new Date(n.scheduledEnd),new Date(n.scheduledStart)),"mins"]}),Object(Re.jsxs)(Te.a.Text,{className:"text-white",children:[s("waitingRoom.questionOfDay"),":"," ",qt(l.language,d)]}),Object(Re.jsx)(Te.a.Link,{onClick:function(){return r({title:s("waitingRoom.whenWillCallConnect"),body:"Soon."})},children:s("waitingRoom.whenWillCallConnect")}),Object(Re.jsxs)(Ce.b,{children:[Object(Re.jsx)(Ve.a,{type:"primary",onClick:i,children:s("waitingRoom.checkConnection")}),Object(Re.jsx)(Ve.a,{onClick:c,children:s("waitingRoom.leaveWaitingRoom")})]})]})})},Ft=n(312),_t=function(e){var t=e.formatted,n=e.minutes,a=e.seconds,c=e.completed,r=function(e,t){return A.some((function(n){return n===e&&0===t}))||A.some((function(n){return n===e+1&&t>=56}))?L:0===e||1===e&&0===t?"bg-blue-500 text-white":"bg-gray-900 text-white"}(n,a);return c?Object(Re.jsx)("div",{}):Object(Re.jsxs)(Te.a.Text,{className:"".concat(r," px-4 py-2 rounded-md"),children:[t.minutes,":",t.seconds]})},Yt=function(e){var t=e.endTime,n=e.style,a=e.className;return Object(Re.jsxs)("div",{style:n,className:a,children:[Object(Re.jsx)(Ft.a,{date:t,renderer:_t,zeroPadTime:2})," "]})},Ut=n(200);function Jt(e){var t=e.srcObject,n=Object(Ut.a)(e,["srcObject"]),c=Object(a.useRef)(null);return Object(a.useEffect)((function(){c.current&&(c.current.srcObject=t)}),[t]),Object(Re.jsx)("video",Object(o.a)({ref:c},n))}function Gt(e){var t=e.srcObject,n=Object(Ut.a)(e,["srcObject"]),c=Object(a.useRef)(null);return Object(a.useEffect)((function(){c.current&&(c.current.srcObject=t)}),[t]),Object(Re.jsx)("audio",Object(o.a)({ref:c},n))}var Zt=c.a.memo((function(e){var t=e.call,n=e.user,c=e.roomClient,r=e.localVideo,i=e.localAudio,o=e.remoteAudios,s=e.remoteVideos,l=e.push,u=e.openInfoModal,d=e.openTestConnectionModal,j=Object(Ae.a)("call").t,f=Object(a.useState)(!0),O=Object(b.a)(f,2),m=O[0],x=O[1],v=Object(a.useState)(!1),g=Object(b.a)(v,2),y=g[0],w=g[1],C=Object(a.useState)(!0),k=Object(b.a)(C,2),T=k[0],N=k[1],I=Object(a.useState)(!1),D=Object(b.a)(I,2),A=D[0],L=D[1],R=Object(a.useState)(!0),H=Object(b.a)(R,2),z=H[0],V=H[1],B=Object(a.useState)(!0),q=Object(b.a)(B,2),W=q[0],F=q[1],_=Object(a.useState)(!1),Y=Object(b.a)(_,2),U=Y[0],J=Y[1];if(Object(a.useEffect)((function(){Object.keys(s).length>0||Object.keys(o).length>0?w(!0):w(!1)}),[s,o]),Object(a.useEffect)((function(){c&&c.socket.on("producerUpdate",function(){var e=Object(p.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.from,a=t.contents,"user"===n.type){e.next=3;break}return e.abrupt("return");case 3:"audio"===a.type?V(a.active):F(a.active);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[c,j]),Object(a.useEffect)((function(){T||L(!1)}),[A,T]),Object(a.useEffect)((function(){t&&y&&P("peerVideo","".concat(t.userParticipants[0].firstName," ").concat(j(W?"peer.videoOn":"peer.videoOff")),"info")}),[W,t,y,j]),Object(a.useEffect)((function(){t&&y&&P("peerAudio","".concat(t.userParticipants[0].firstName," ").concat(j(z?"peer.unmuted":"peer.muted")),"info")}),[z,t,y,j]),Object(a.useEffect)((function(){y&&t&&M("".concat(t.userParticipants[0].firstName," ").concat(j("peer.joinedCallTitle"),"."),j("peer.joinedCallBody"),"info")}),[y,t,j]),!t)return Object(Re.jsx)("div",{});var G,Z=function(){x(!0),clearTimeout(G),G=setTimeout((function(){return x(!1)}),5e3)},X=Object.keys(s).map((function(e){return parseInt(e)}));return Object(Re.jsxs)(Le.a,{children:[Object(Re.jsxs)("div",{className:"ant-layout-content w-screen h-screen flex bg-gray-800",onMouseMove:function(){return Z()},onMouseOver:function(){return Z()},children:[X.map((function(e){return Object(Re.jsxs)("div",{className:"w-full h-full",children:[Object(Re.jsx)(Jt,{srcObject:s[e],className:"w-full h-full",autoPlay:!0}),Object(Re.jsx)(Gt,{srcObject:o[e],autoPlay:!0})]})})),U&&Object(Re.jsx)(Yt,{endTime:t.scheduledEnd,className:"absolute right-4 top-4 bg-opacity-80"}),!W&&Object(Re.jsx)(_e.a,{size:128,className:"bg-blue-500\tm-auto text-white\t",children:S(E(t.userParticipants[0])).toUpperCase()}),!z&&Object(Re.jsxs)("div",{className:"absolute bottom-20 left-4 bg-black bg-opacity-50 py-1 px-2",children:[Object(Re.jsx)(kt.a,{className:"text-red-600 text-xs"}),Object(Re.jsxs)(Te.a.Text,{className:"text-white text-base",children:[" ",E(t.userParticipants[0])]})]}),r&&r.stream&&!r.paused?Object(Re.jsx)(Jt,{srcObject:r.stream,className:"w-2/12 absolute top-4 left-4 flex",autoPlay:!0}):Object(Re.jsx)(Bt,{initials:S(E(n))}),!y&&Object(Re.jsx)(Wt,{call:t,title:c?y?j("waitingRoom.loading"):"".concat(j("waitingRoom.waitingForPrefix")," ").concat(t.userParticipants[0].firstName," ").concat(j("waitingRoom.waitingForSuffix"),"..."):j("waitingRoom.initialization"),navigateBack:function(){return l("/")},openInfoModal:u,openTestConnectionModal:d}),m&&Object(Re.jsx)(zt,{loading:!(i&&r),audioOn:!(null===i||void 0===i?void 0:i.paused),toggleAudio:function(){c&&i&&(P("microphone","You ".concat(i.paused?"unmuted":"muted"," your microphone"),"info"),i.paused?c.resumeAudio():c.pauseAudio())},videoOn:!(null===r||void 0===r?void 0:r.paused),toggleVideo:function(){c&&r&&(P("webcam","You ".concat(r.paused?"turned on":"turned off"," your webcam"),"info"),r.paused?c.resumeVideo():c.pauseVideo())},chatCollapsed:T,toggleChat:function(){T&&L(!1),N((function(e){return!e}))},timerOn:U,toggleTimer:function(){return J((function(e){return!e}))},terminateCall:function(){return l("/feedback/".concat(null===t||void 0===t?void 0:t.id))},hasUnreadMessages:A})]}),!T&&Object(Re.jsx)(St,{roomClient:c,inmateId:n.id,call:t})]})})),Xt=function(e){var t=e.match,n=vn(),c=Object(a.useCallback)(n,[]),r=function(e){var t=gn((function(t){return ce(t,e)})),n=gn(oe),c=Object(a.useState)(),r=Object(b.a)(c,2),i=r[0],o=r[1];return Object(a.useEffect)((function(){t&&o(R(t,n))}),[t,n]),i}(parseInt(t.params.id)),i=gn((function(e){return e.session})),o=i.authInfo,s=i.user,l=Object(a.useState)(),u=Object(b.a)(l,2),d=u[0],j=u[1],f=Object(a.useState)(),h=Object(b.a)(f,2),p=h[0],O=h[1],m=Object(a.useState)(),x=Object(b.a)(m,2),v=x[0],g=x[1],y=Object(a.useState)({}),w=Object(b.a)(y,2),C=w[0],k=w[1],T=Object(a.useState)({}),N=Object(b.a)(T,2),I=N[0],S=N[1],E=Object(a.useState)(!1),M=Object(b.a)(E,2),P=M[0],D=M[1];return Object(a.useEffect)((function(){return c(wt()),function(){c(Ct())}}),[c]),Object(a.useEffect)((function(){r&&!P&&r.videoHandler&&c(Y({callId:r.id,setRc:j,authInfo:o,videoHandler:r.videoHandler}))}),[r,c,P,o]),Object(a.useEffect)((function(){d&&!P&&(c(J({rc:d,setRemoteAudios:k,setRemoteVideos:S})),c(U({rc:d,setLocalAudio:O,setLocalVideo:g,setRc:j})),D(!0))}),[P,c,d]),r&&d&&P?Object(Re.jsx)(Zt,{call:r,user:s,push:function(e){return n(Object(ct.d)(e))},openInfoModal:function(e){return n(Ge({activeType:"RESOURCE_MODAL",entity:e}))},openTestConnectionModal:function(){return n(Ge({activeType:"TEST_CONNECTION_MODAL",entity:null}))},roomClient:d,localAudio:p,localVideo:v,remoteAudios:C,remoteVideos:I}):Object(Re.jsx)("div",{})},Kt=n(547),Qt=n(560),$t=["terrible","bad","normal","good","wonderful"];var en=-1,tn=135,nn=[{path:"/calls",component:$e,label:"Calls"},{path:"/settings",component:nt,label:"Settings"},{path:"/profile/:id",component:Fe,label:"Profile"},{path:"/call/:id",component:Xt,label:"Call"},{path:"/feedback/:id",component:function(){var e=vn();return Object(a.useEffect)((function(){return e(wt()),function(){e(Ct())}}),[e]),Object(Re.jsx)(Le.a.Content,{style:{backgroundColor:"white",height:"100vh",width:"100vw",display:"flex"},children:Object(Re.jsxs)(Ce.b,{direction:"vertical",align:"center",style:{margin:"auto"},size:"large",children:[Object(Re.jsx)(Te.a.Title,{level:2,children:"You left the meeting."}),Object(Re.jsxs)(Ce.b,{children:[Object(Re.jsx)(Ve.a,{size:"large",children:"Rejoin"}),Object(Re.jsx)(Ve.a,{type:"primary",size:"large",children:"Return home"})]}),Object(Re.jsx)(Se.a,{title:"How was the audio and video?",children:Object(Re.jsx)(Kt.a,{character:Object(Re.jsx)(Qt.a,{style:{fontSize:36}}),tooltips:$t})})]})})},label:"Feedback"},{path:"/",component:vt,label:"Dash"}],an={padding:24,paddingTop:0},cn=[{author:"Mary Ann Evans",quote:"It is never too late to be what you might have been.",description:"",background:"https://images.unsplash.com/photo-1536257104079-aa99c6460a5a?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80"},{author:"Walt Disney",quote:"All our dreams can come true, if we have the courage to pursue them.",description:"",background:"https://images.unsplash.com/photo-1508556497405-ed7dcd94acfc?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80"},{author:"Mark Twain",quote:"The secret of getting ahead is getting started",description:"",background:"https://images.unsplash.com/photo-1532971077387-7c6568101df5?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80"},{author:"Babe Ruth",quote:"It\u2019s hard to beat a person who never gives up.",description:"",background:"https://images.unsplash.com/photo-1564521456797-9f176245daa9?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1951&q=80"}],rn={en:"English",es:"Espa\xf1ol"},on=[{en:"If you had your own intro theme song, which song would it be and why?",es:"If you had your own intro theme song, which song would it be and why?"}],sn="user/SET_SESSION",ln="user/LOGOUT",un=function(e){return{type:sn,payload:e}},dn={authInfo:{id:en,type:"inmate",token:""},user:{id:en,firstName:"",lastName:"",location:"",dateOfBirth:"",inmateIdentification:"",quota:0,race:""},isLoggedIn:!1,language:"en"};function jn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case sn:return t.payload;case ln:return Object(o.a)(Object(o.a)({},e),{},{authInfo:{id:en,type:"inmate",token:""},user:{id:en,firstName:"",lastName:"",location:"",dateOfBirth:"",inmateIdentification:"",quota:0,race:""},isLoggedIn:!1});default:return e}}var bn,fn=Object(j.b)("connections/fetchAll",Object(p.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("connections");case 2:return t=e.sent,n=t.data.connections.map((function(e){return K()(e)})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))),hn=Object(j.c)(),pn=Object(j.d)({name:"connection",initialState:hn.getInitialState(),reducers:{},extraReducers:function(e){e.addCase(fn.fulfilled,(function(e,t){hn.setAll(e,t.payload)}))}}),On=(pn.actions,Object(d.a)()),mn=(bn=On,Object(u.c)({common:gt.reducer,session:jn,calls:Z.reducer,contacts:ee.reducer,modals:Ue.reducer,connections:pn.reducer,router:Object(s.b)(bn)})),xn=Object(j.a)({reducer:mn,middleware:function(e){return e().concat(Object(l.a)(On))}}),vn=function(){return Object(at.d)()},gn=at.e,yn=n(68),wn=function(e){var t="";if(e.isAuthenticated||(t=e.authenticationPath),t){return Object(Re.jsx)(yn.b,Object(o.a)(Object(o.a)({},e),{},{component:function(){return Object(Re.jsx)(yn.a,{to:{pathname:t}})},render:void 0}))}return Object(Re.jsx)(yn.b,Object(o.a)({},e))},Cn=n(542),kn=n(187);function Tn(e,t,n){return Nn.apply(this,arguments)}function Nn(){return(Nn=Object(p.a)(h.a.mark((function e(t,n,a){var c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c={id:n.id,firstName:n.firstName,lastName:n.lastName,dateOfBirth:n.dateOfBirth,profileImagePath:n.profileImagePath,inmateIdentification:n.inmateIdentification,quota:n.quota,location:n.location,race:n.race},xn.dispatch(un({user:c,authInfo:{id:n.id,type:"inmate",token:t},isLoggedIn:!0,language:a}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function In(e){return Sn.apply(this,arguments)}function Sn(){return(Sn=Object(p.a)(h.a.mark((function e(t){var n,a,c,r,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("".concat(O,"auth/member/login/"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",body:JSON.stringify({facilityId:t.facilityId,inmateIdentification:t.inmateNumber,pin:t.pin})});case 2:return n=e.sent,e.next=5,n.json();case 5:if(a=e.sent,c=n.headers.get("cookie")||"",r=/(?<=connect.sid=)([^\s;]+)/gm,(i=c.match(r))&&1===i.length){e.next=11;break}throw new Error("Cannot find header token");case 11:return e.next=13,Tn(i[0],a.data,t.language);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var En,Mn,Pn,Dn,An,Ln,Rn,Hn,zn,Vn,Bn,qn,Wn,Fn,_n=n(561),Yn=n(562);function Un(){return(Un=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Jn(e,t){if(null==e)return{};var n,a,c=function(e,t){if(null==e)return{};var n,a,c={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}function Gn(e,t){var n=e.title,c=e.titleId,r=Jn(e,["title","titleId"]);return a.createElement("svg",Un({id:"Golden_Grid","data-name":"Golden Grid",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 666.85 257.93",ref:t,"aria-labelledby":c},r),n?a.createElement("title",{id:c},n):null,En||(En=a.createElement("defs",null,a.createElement("style",null,".cls-1,.cls-2{fill:#0073eb;stroke:#fff;stroke-miterlimit:10;stroke-width:3px;}.cls-2{opacity:0.7;}.cls-3{fill:#1a1a1a;}"))),Mn||(Mn=a.createElement("path",{className:"cls-1",d:"M111.83,48.88h0l-8.38,20.22L98.27,81.58l0,0v.08L91.48,98h0L90,101.55h0l-2.9,7-.6-2.23-.64-2.43-4-15.27L71,47.66l-1.6-6.1L63.79,20.1Z"})),Pn||(Pn=a.createElement("polygon",{className:"cls-2",points:"87.09 108.56 85.99 107.12 84.4 105.05 77.65 96.2 71.96 88.74 50.31 60.32 41.21 48.39 71.04 47.66 81.83 88.63 85.85 103.9 86.49 106.33 87.09 108.56"})),Dn||(Dn=a.createElement("polygon",{className:"cls-1",points:"67.95 154.72 59.71 174.61 29.58 171.5 58.55 149.76 64.48 145.32 75.17 137.31 67.96 154.69 67.95 154.72"})),An||(An=a.createElement("path",{className:"cls-1",d:"M134.41,137.69h0L81.75,151.16l-2.83.73-11,2.8,7.21-17.38h0l2.27-5.48h0l9.54-23,.1-.23h0l2.9-7h0L91.47,98h0l6.75-16.29h0l0-.09,5.17-12.47,8.38-20.22h0l4,15.53,4.51,17.78,4.95,19.43,3,11.89h0Z"})),Ln||(Ln=a.createElement("polygon",{className:"cls-1",points:"161.52 72.3 156.34 84.79 151.4 96.73 147.81 105.36 146.74 107.93 146.74 107.94 134.41 137.69 128.27 113.52 128.26 113.52 125.24 101.63 120.29 82.2 120.3 82.19 121.87 81.82 141.5 77.1 160.2 72.62 161.52 72.3"})),Rn||(Rn=a.createElement("polygon",{className:"cls-2",points:"187.8 89.91 179.44 91.47 170.42 93.17 170.41 93.16 151.4 96.73 156.34 84.79 161.52 72.3 162.14 72.71 187.8 89.91"})),Hn||(Hn=a.createElement("path",{className:"cls-3",d:"M234.77,211.91h-17.2L209.18,190H163l-8.4,21.88H137.37l38.93-98.23h19.54Zm-66-36.73H203.4l-17.33-45.27Z"})),zn||(zn=a.createElement("path",{className:"cls-3",d:"M259.67,211.91H245V161.28h-5.64V148.07h11.83l6.19,6.2c5.5-4.54,12.24-7.43,18.57-7.43a20.61,20.61,0,0,1,17.34,8.66,31.53,31.53,0,0,1,21-8.66c11.7,0,22.43,8,22.43,26.55v38.52H322V173.39c0-8.39-4.54-12.93-11.28-12.93-7.57,0-12.52,4.54-12.52,10.59v40.86H283.61V173.39c0-8.39-4.68-12.93-11.29-12.93-7.42,0-12.65,4.4-12.65,10.18Z"})),Vn||(Vn=a.createElement("path",{className:"cls-3",d:"M393.53,190.72l12.1,6.61c-4.95,8.39-14.17,16.09-26.82,16.09-18.3,0-31.37-15.41-31.37-33.29s13.07-33.57,31.23-33.57,29.44,15.27,30,31.92l-5.5,5.36H362.3c.82,9.5,8.11,15.82,16.51,15.82C384.58,199.66,390.36,196,393.53,190.72ZM363,172.15h30.95c-1-7.15-7.43-12.52-15.27-12.52A15.72,15.72,0,0,0,363,172.15Z"})),Bn||(Bn=a.createElement("path",{className:"cls-3",d:"M461.76,190.72l12.11,6.61c-4.95,8.39-14.17,16.09-26.83,16.09-18.3,0-31.37-15.41-31.37-33.29s13.07-33.57,31.23-33.57,29.44,15.27,30,31.92l-5.5,5.36H430.53c.83,9.5,8.12,15.82,16.51,15.82C452.82,199.66,458.6,196,461.76,190.72Zm-30.54-18.57h30.95c-1-7.15-7.42-12.52-15.27-12.52A15.72,15.72,0,0,0,431.22,172.15Z"})),qn||(qn=a.createElement("path",{className:"cls-3",d:"M489.41,113.68l4.82-5h10.18V197.6h5.64v14.31H495.6l-6.19-6.33Z"})),Wn||(Wn=a.createElement("path",{className:"cls-3",d:"M540.73,211.91H526V161.28h-5.5V148.07h15l5.23,5.23ZM532,112a10.49,10.49,0,0,1,10.39,10.39A10.37,10.37,0,0,1,532,132.67a10.25,10.25,0,0,1-10.25-10.26A10.37,10.37,0,0,1,532,112Z"})),Fn||(Fn=a.createElement("path",{className:"cls-3",d:"M620,180a33.36,33.36,0,1,1-33.29-33.29A33.35,33.35,0,0,1,620,180Zm-15,0c0-10.32-7.71-19.12-18.3-19.12s-18.44,8.8-18.44,19.12,7.85,19.26,18.44,19.26S605,190.31,605,180Z"})))}var Zn=a.forwardRef(Gn),Xn=(n.p,n(518),{borderRadius:8}),Kn=Le.a.Content,Qn=Object(at.c)((function(e){return{session:e.session}}),{}),$n={labelCol:{flex:"95px"},wrapperCol:{flex:1}},ea={wrapperCol:{span:24}};var ta=Qn((function(e){var t=e.session,n=Object(Ae.a)("login"),c=n.t,r=n.i18n,i=et.a.Option,s=Object(a.useState)(I(cn)),l=Object(b.a)(s,1)[0],u=Object(a.useState)([]),d=Object(b.a)(u,2),j=d[0],f=d[1];if(Object(a.useEffect)((function(){(function(){var e=Object(p.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:t=e.sent,f(t.data.results);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),t.isLoggedIn)return Object(Re.jsx)(yn.a,{to:"/"});var O=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,In({inmateNumber:t.inmateNumber,pin:t.pin,facilityId:t.facilityId,language:t.language});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),P("login_error","Invalid ID or Pin Code","error");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),m=j.map((function(e){return Object(Re.jsx)(i,{value:e.id,children:e.name},"option-".concat(e.id))}));return Object(Re.jsx)(Kn,{className:"d-flex flex-column banner-background",style:{backgroundImage:"url(".concat(l.background,")")},children:Object(Re.jsx)("div",{className:"login-form-container m-auto",style:Xn,children:Object(Re.jsxs)(Ce.b,{direction:"vertical",size:"large",children:[Object(Re.jsx)(Ne.a,{children:Object(Re.jsx)(Zn,{className:"login-logo"})}),Object(Re.jsx)(Ne.a,{justify:"center",children:Object(Re.jsx)(Ie.a,{children:Object(Re.jsxs)(Te.a.Text,{children:[c("caption")," ",Object(Re.jsxs)(Te.a.Link,{href:"/tos.pdf",target:"_blank",children:[c("tos")," "]}),c("and")," ",Object(Re.jsxs)(Te.a.Link,{href:"/privacy_policy.pdf",target:"_blank",children:[c("pp"),"."]})," "]})})}),Object(Re.jsxs)(Cn.a,Object(o.a)(Object(o.a)({},$n),{},{name:"login",className:"w-full rounded-lg",onFinish:O,onFinishFailed:function(e){P("login_error","Invalid ID or Pin Code","error")},initialValues:{language:Object.keys(rn)[0]},children:[Object(Re.jsx)(Cn.a.Item,{label:"Language",name:"language",rules:[{required:!0,message:"Language is required."}],children:Object(Re.jsx)(kn.a.Group,{className:"w-100",onChange:function(e){return r.changeLanguage(e.target.value)},children:Object.entries(rn).map((function(e){var t=Object(b.a)(e,2),n=t[0],a=t[1];return Object(Re.jsx)(kn.a.Button,{value:n,children:a},n)}))})}),Object(Re.jsx)(Cn.a.Item,{name:"inmateNumber",label:"ID Number",rules:[{required:!0,message:"Inmate ID is required."}],children:Object(Re.jsx)(Nt.a,{prefix:Object(Re.jsx)(_n.a,{}),placeholder:c("placeholder.inmateNumber")})}),Object(Re.jsx)(Cn.a.Item,{label:"PIN Code",name:"pin",rules:[{required:!0,message:"Password is required."}],children:Object(Re.jsx)(Nt.a.Password,{prefix:Object(Re.jsx)(Yn.a,{}),placeholder:c("placeholder.pinCode")})}),Object(Re.jsx)(Cn.a.Item,{name:"facilityId",label:"Facility",rules:[{required:!0,message:"Facility must be selected."}],children:Object(Re.jsx)(et.a,{children:m})}),Object(Re.jsx)(Cn.a.Item,Object(o.a)(Object(o.a)({},ea),{},{style:{borderRadius:4},children:Object(Re.jsx)(Ve.a,{type:"primary",htmlType:"submit",size:"large",children:c("buttonText")})}))]}))]})})})})),na=n(90),aa=n(563),ca=n(564),ra=n(196),ia=Le.a.Sider;function oa(e){var t=e.user,n=e.navigate;return Object(Re.jsx)(ia,{theme:"light",className:"shadow-lg",children:Object(Re.jsxs)(Ce.b,{direction:"vertical",className:"w-full",children:[Object(Re.jsx)(Ne.a,{className:"p-2 cursor-pointer",onClick:function(){return n("/")},children:Object(Re.jsx)(Zn,{className:"login-logo"})}),Object(Re.jsx)(Ne.a,{align:"middle",className:"pl-4 cursor-pointer",onClick:function(){return n("/profile/".concat(t.id))},children:Object(Re.jsxs)(Ce.b,{children:[Object(Re.jsx)(_e.a,{src:t.profileImagePath,size:"large"}),Object(Re.jsx)(Te.a.Text,{children:E(t)})]})}),Object(Re.jsxs)(na.a,{mode:"inline",defaultSelectedKeys:["home"],className:"w-full",children:[Object(Re.jsx)(na.a.Item,{icon:Object(Re.jsx)(aa.a,{}),onClick:function(){return n("/")},children:"Home"},"home"),Object(Re.jsx)(na.a.Item,{icon:Object(Re.jsx)(ca.a,{}),onClick:function(){return n("/calls")},children:"Calls"},"calls"),Object(Re.jsx)(pt.a,{}),Object(Re.jsx)(na.a.Item,{icon:Object(Re.jsx)(ra.a,{}),onClick:function(){return n("/settings")},children:"Settings"},"settings")]})]})})}var sa=n(169),la=n.n(sa),ua=function(e){var t=e.data,n=e.closeModal,a=Object(Ae.a)("modals").t,c=t.entity,r=E(c.userParticipants[0]),i=Object(De.a)(new Date(c.scheduledStart),"EEEE, MMMM d"),o=Object(De.a)(new Date(c.scheduledStart),"h:mm aaa OOO"),s=c&&Object(Pe.a)(new Date(c.scheduledEnd),new Date(c.scheduledEnd)),l=c.userParticipants[0].firstName;return Object(Re.jsxs)(la.a,{title:a("cancelCallModal.title"),visible:!0,okText:a("cancelCallModal.okText"),onOk:n,onCancel:n,className:"rounded-sm",children:[Object(Re.jsxs)(Ce.b,{direction:"vertical",size:"large",children:[Object(Re.jsx)(Ne.a,{children:Object(Re.jsx)(Te.a.Text,{children:a("cancelCallModal.messageOne",{connectionName:r})})}),Object(Re.jsx)(Ne.a,{children:Object(Re.jsxs)(Ie.a,{children:[Object(Re.jsx)("div",{children:Object(Re.jsx)(Te.a.Text,{children:i})}),Object(Re.jsx)("div",{children:Object(Re.jsxs)(Te.a.Text,{children:[o," \u2022 ","".concat(s,"mins")]})})]})}),Object(Re.jsx)(Ne.a,{children:Object(Re.jsx)(Te.a.Text,{children:a("cancelCallModal.messageTwo",{connectionFirstName:l})})}),Object(Re.jsx)(Ne.a,{})]}),Object(Re.jsx)(et.a,{className:"w-full",placeholder:a("cancelCallModal.dropdownPlaceholder")})]})},da=n(546),ja=function(e){var t=e.data,n=e.closeModal,a=t.entity;return Object(Re.jsx)(da.a,{title:a.title,visible:!0,okText:a.okBtnText||"OK",cancelButtonProps:{style:{display:t.entity.hideCancel?"none":"inline"}},onOk:n,onCancel:n,className:"rounded-sm w-full",children:Object(Re.jsx)(Te.a.Text,{children:a.body})})},ba=function(e){var t=e.data,n=e.closeModal,c=Object(Ae.a)("call").t,r=Object(a.useState)(),i=Object(b.a)(r,2),o=i[0],s=i[1],l=Object(a.useState)(),u=Object(b.a)(l,2),d=u[0],j=u[1];return Object(a.useEffect)((function(){Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,z("audio");case 3:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=j,e.next=8,z("video");case 8:e.t3=e.sent,(0,e.t2)(e.t3);case 10:case"end":return e.stop()}}),e)})))()}),[]),Object(a.useEffect)((function(){return function(){o&&o.getTracks().forEach((function(e){e.stop()}));d&&d.getTracks().forEach((function(e){e.stop()}))}}),[o,d]),"TEST_CONNECTION_MODAL"!==t.activeType?Object(Re.jsx)("div",{}):Object(Re.jsxs)(da.a,{title:c("testConnection.title"),visible:!0,cancelButtonProps:{style:{display:"none"}},onOk:n,className:"rounded-sm w-full",children:[d?Object(Re.jsx)(Jt,{srcObject:d,className:"w-full",autoPlay:!0}):Object(Re.jsx)("div",{}),o?Object(Re.jsx)(Gt,{srcObject:o}):Object(Re.jsx)("div",{}),Object(Re.jsx)(Te.a.Text,{children:""})]})},fa=function(){var e=vn(),t=gn((function(e){return e.modals.data}));switch(t.activeType){case"CANCEL_CALL_MODAL":return Object(Re.jsx)(ua,{closeModal:function(){return e(Ze())},data:t});case"RESOURCE_MODAL":return Object(Re.jsx)(ja,{closeModal:function(){return e(Ze())},data:t});case"TEST_CONNECTION_MODAL":return Object(Re.jsx)(ba,{closeModal:function(){return e(Ze())},data:t});default:return null}},ha={fetchContacts:$,push:ct.d};var pa=Object(at.c)(null,ha)((function(e){var t=e.history,n=e.fetchContacts,c=e.push,r=Object(Ae.a)().i18n,i=gn((function(e){return e.common.fullScreen})),l=gn((function(e){return e.session})),u={isAuthenticated:l.isLoggedIn,authenticationPath:"/login"},d=l.isLoggedIn&&!i;return Object(a.useEffect)((function(){l.isLoggedIn&&n()}),[l.isLoggedIn,n]),Object(a.useEffect)((function(){r.changeLanguage(l.language)}),[l.language,r]),Object(Re.jsxs)(s.a,{history:t,children:[Object(Re.jsx)(fa,{}),Object(Re.jsxs)(Le.a,{style:{minHeight:"100vh"},children:[d&&Object(Re.jsx)(oa,{user:l.user,navigate:c}),Object(Re.jsx)(Le.a,{children:Object(Re.jsxs)(yn.d,{children:[Object(Re.jsx)(yn.b,{exact:!0,path:"/login",component:ta}),nn.map((function(e){return Object(a.createElement)(wn,Object(o.a)(Object(o.a)({exact:!0},u),{},{path:e.path,component:e.component,key:e.label}))})),Object(Re.jsx)(yn.a,{to:"/login"})]})})]})]})})),Oa=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,567)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};n(533);i.a.render(Object(Re.jsx)(c.a.StrictMode,{children:Object(Re.jsx)(at.a,{store:xn,children:Object(Re.jsx)(pa,{history:On})})}),document.getElementById("root")),Oa()}},[[534,1,2]]]);
//# sourceMappingURL=main.e85ad57b.chunk.js.map